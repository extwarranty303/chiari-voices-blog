import{J as rr,K as Mu,c as je,M as Mt,r as x,R as Q,j as m,B as $e,X as bt,G as Ut,U as Iu,N as Lu,I as Qe,O as zu,H as Ya,k as Sr,d as wt,P as Pr,i as $u,a as Nr,A as Wu,C as qu,D as Hu,E as Ku,y as Vu,u as Uu,q as Gu,o as Yu,g as on,t as nt,L as ln}from"./index-Cwzn0Rv2.js";import{p as Xu,H as Ju,C as Xa,a as Zu,T as Qu}from"./atom-one-dark-CFck_wUQ.js";import{f as cn}from"./format-Dpr0NHdZ.js";import{L as _u,S as es,T as fn}from"./trash-2-CxensYrn.js";import{C as ts}from"./circle-check-big-BRKT5XWh.js";import{S as rs}from"./search-DQT7nwcl.js";var ns=Mu();const as=rr(ns);const us=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],ss=je("bold",us);const is=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],os=je("code",is);const ls=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],cs=je("eye",ls);const fs=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ds=je("file-text",fs);const vs=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],hs=je("flag",vs);const gs=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]],Ds=je("heading-1",gs);const ms=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]],ps=je("heading-2",ms);const Cs=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Bs=je("image",Cs);const Es=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],bs=je("italic",Es);const ws=[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]],As=je("list-ordered",ws);const Fs=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],ys=je("list",Fs);const xs=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Os=je("pen",xs);const js=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Ss=je("pencil",js);const Ps=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ns=je("plus",Ps);const Ts=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],ks=je("quote",Ts);const Rs=[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]],Ms=je("underline",Rs),Is=225,Ls=t=>{const e=t.trim().split(/\s+/).length;return Math.ceil(e/Is)};var zs={transform(t,e){var{current:r,affinity:n}=t;if(r!=null){var a=g.transform(r,e,{affinity:n});t.current=a,a==null&&t.unref()}}},$s={transform(t,e){var{current:r,affinity:n}=t;if(r!=null){var a=ue.transform(r,e,{affinity:n});t.current=a,a==null&&t.unref()}}},Ws={transform(t,e){var{current:r,affinity:n}=t;if(r!=null){var a=y.transform(r,e,{affinity:n});t.current=a,a==null&&t.unref()}}},Jt=new WeakMap,Zt=new WeakMap,At=new WeakMap,Ja=new WeakMap,dn=new WeakMap,vn=new WeakMap,hn=new WeakMap,g={ancestors(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:r=!1}=e,n=g.levels(t,e);return r?n=n.slice(1):n=n.slice(0,-1),n},common(t,e){for(var r=[],n=0;n<t.length&&n<e.length;n++){var a=t[n],u=e[n];if(a!==u)break;r.push(a)}return r},compare(t,e){for(var r=Math.min(t.length,e.length),n=0;n<r;n++){if(t[n]<e[n])return-1;if(t[n]>e[n])return 1}return 0},endsAfter(t,e){var r=t.length-1,n=t.slice(0,r),a=e.slice(0,r),u=t[r],s=e[r];return g.equals(n,a)&&u>s},endsAt(t,e){var r=t.length,n=t.slice(0,r),a=e.slice(0,r);return g.equals(n,a)},endsBefore(t,e){var r=t.length-1,n=t.slice(0,r),a=e.slice(0,r),u=t[r],s=e[r];return g.equals(n,a)&&u<s},equals(t,e){return t.length===e.length&&t.every((r,n)=>r===e[n])},hasPrevious(t){return t[t.length-1]>0},isAfter(t,e){return g.compare(t,e)===1},isAncestor(t,e){return t.length<e.length&&g.compare(t,e)===0},isBefore(t,e){return g.compare(t,e)===-1},isChild(t,e){return t.length===e.length+1&&g.compare(t,e)===0},isCommon(t,e){return t.length<=e.length&&g.compare(t,e)===0},isDescendant(t,e){return t.length>e.length&&g.compare(t,e)===0},isParent(t,e){return t.length+1===e.length&&g.compare(t,e)===0},isPath(t){return Array.isArray(t)&&(t.length===0||typeof t[0]=="number")},isSibling(t,e){if(t.length!==e.length)return!1;var r=t.slice(0,-1),n=e.slice(0,-1),a=t[t.length-1],u=e[e.length-1];return a!==u&&g.equals(r,n)},levels(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:r=!1}=e,n=[],a=0;a<=t.length;a++)n.push(t.slice(0,a));return r&&n.reverse(),n},next(t){if(t.length===0)throw new Error("Cannot get the next path of a root path [".concat(t,"], because it has no next index."));var e=t[t.length-1];return t.slice(0,-1).concat(e+1)},operationCanTransformPath(t){switch(t.type){case"insert_node":case"remove_node":case"merge_node":case"split_node":case"move_node":return!0;default:return!1}},parent(t){if(t.length===0)throw new Error("Cannot get the parent path of the root path [".concat(t,"]."));return t.slice(0,-1)},previous(t){if(t.length===0)throw new Error("Cannot get the previous path of a root path [".concat(t,"], because it has no previous index."));var e=t[t.length-1];if(e<=0)throw new Error("Cannot get the previous path of a first child path [".concat(t,"] because it would result in a negative index."));return t.slice(0,-1).concat(e-1)},relative(t,e){if(!g.isAncestor(e,t)&&!g.equals(t,e))throw new Error("Cannot get the relative path of [".concat(t,"] inside ancestor [").concat(e,"], because it is not above or equal to the path."));return t.slice(e.length)},transform(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!t)return null;var n=[...t],{affinity:a="forward"}=r;if(t.length===0)return n;switch(e.type){case"insert_node":{var{path:u}=e;(g.equals(u,n)||g.endsBefore(u,n)||g.isAncestor(u,n))&&(n[u.length-1]+=1);break}case"remove_node":{var{path:s}=e;if(g.equals(s,n)||g.isAncestor(s,n))return null;g.endsBefore(s,n)&&(n[s.length-1]-=1);break}case"merge_node":{var{path:i,position:f}=e;g.equals(i,n)||g.endsBefore(i,n)?n[i.length-1]-=1:g.isAncestor(i,n)&&(n[i.length-1]-=1,n[i.length]+=f);break}case"split_node":{var{path:c,position:d}=e;if(g.equals(c,n)){if(a==="forward")n[n.length-1]+=1;else if(a!=="backward")return null}else g.endsBefore(c,n)?n[c.length-1]+=1:g.isAncestor(c,n)&&t[c.length]>=d&&(n[c.length-1]+=1,n[c.length]-=d);break}case"move_node":{var{path:h,newPath:v}=e;if(g.equals(h,v))return n;if(g.isAncestor(h,n)||g.equals(h,n)){var D=v.slice();return g.endsBefore(h,v)&&h.length<v.length&&(D[h.length-1]-=1),D.concat(n.slice(h.length))}else g.isSibling(h,v)&&(g.isAncestor(v,n)||g.equals(v,n))?g.endsBefore(h,n)?n[h.length-1]-=1:n[h.length-1]+=1:g.endsBefore(v,n)||g.equals(v,n)||g.isAncestor(v,n)?(g.endsBefore(h,n)&&(n[h.length-1]-=1),n[v.length-1]+=1):g.endsBefore(h,n)&&(g.equals(v,n)&&(n[v.length-1]+=1),n[h.length-1]-=1);break}}return n}};function St(t){"@babel/helpers - typeof";return St=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},St(t)}function qs(t,e){if(St(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(St(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Hs(t){var e=qs(t,"string");return St(e)==="symbol"?e:String(e)}function Ae(t,e,r){return e=Hs(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ks(t,e){if(t==null)return{};var r={},n=Object.keys(t),a,u;for(u=0;u<n.length;u++)a=n[u],!(e.indexOf(a)>=0)&&(r[a]=t[a]);return r}function Ge(t,e){if(t==null)return{};var r=Ks(t,e),n,a;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(a=0;a<u.length;a++)n=u[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var Vs=["anchor","focus"];function gn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Us(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?gn(Object(r),!0).forEach(function(n){Ae(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gn(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var y={edges(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:r=!1}=e,{anchor:n,focus:a}=t;return y.isBackward(t)===r?[n,a]:[a,n]},end(t){var[,e]=y.edges(t);return e},equals(t,e){return ue.equals(t.anchor,e.anchor)&&ue.equals(t.focus,e.focus)},surrounds(t,e){var r=y.intersection(t,e);return r?y.equals(r,e):!1},includes(t,e){if(y.isRange(e)){if(y.includes(t,e.anchor)||y.includes(t,e.focus))return!0;var[r,n]=y.edges(t),[a,u]=y.edges(e);return ue.isBefore(r,a)&&ue.isAfter(n,u)}var[s,i]=y.edges(t),f=!1,c=!1;return ue.isPoint(e)?(f=ue.compare(e,s)>=0,c=ue.compare(e,i)<=0):(f=g.compare(e,s.path)>=0,c=g.compare(e,i.path)<=0),f&&c},intersection(t,e){var r=Ge(t,Vs),[n,a]=y.edges(t),[u,s]=y.edges(e),i=ue.isBefore(n,u)?u:n,f=ue.isBefore(a,s)?a:s;return ue.isBefore(f,i)?null:Us({anchor:i,focus:f},r)},isBackward(t){var{anchor:e,focus:r}=t;return ue.isAfter(e,r)},isCollapsed(t){var{anchor:e,focus:r}=t;return ue.equals(e,r)},isExpanded(t){return!y.isCollapsed(t)},isForward(t){return!y.isBackward(t)},isRange(t){return xe(t)&&ue.isPoint(t.anchor)&&ue.isPoint(t.focus)},*points(t){yield[t.anchor,"anchor"],yield[t.focus,"focus"]},start(t){var[e]=y.edges(t);return e},transform(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(t===null)return null;var{affinity:n="inward"}=r,a,u;if(n==="inward"){var s=y.isCollapsed(t);y.isForward(t)?(a="forward",u=s?a:"backward"):(a="backward",u=s?a:"forward")}else n==="outward"?y.isForward(t)?(a="backward",u="forward"):(a="forward",u="backward"):(a=n,u=n);var i=ue.transform(t.anchor,e,{affinity:a}),f=ue.transform(t.focus,e,{affinity:u});return!i||!f?null:{anchor:i,focus:f}}},Dn=function(e){var{deep:r=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!xe(e))return!1;var n=typeof e.apply=="function";if(n)return!1;var a=r?H.isNodeList(e.children):Array.isArray(e.children);return a},J={isAncestor(t){var{deep:e=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return xe(t)&&H.isNodeList(t.children,{deep:e})},isElement:Dn,isElementList(t){var{deep:e=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Array.isArray(t)&&t.every(r=>J.isElement(r,{deep:e}))},isElementProps(t){return t.children!==void 0},isElementType:function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"type";return Dn(e)&&e[n]===r},matches(t,e){for(var r in e)if(r!=="children"&&t[r]!==e[r])return!1;return!0}},Gs=["children"],Ys=["text"];function mn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function It(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?mn(Object(r),!0).forEach(function(n){Ae(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mn(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var H={ancestor(t,e){var r=H.get(t,e);if(X.isText(r))throw new Error("Cannot get the ancestor node at path [".concat(e,"] because it refers to a text node instead: ").concat(Be.stringify(r)));return r},ancestors(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return(function*(){for(var n of g.ancestors(e,r)){var a=H.ancestor(t,n),u=[a,n];yield u}})()},child(t,e){if(X.isText(t))throw new Error("Cannot get the child of a text node: ".concat(Be.stringify(t)));var r=t.children[e];if(r==null)throw new Error("Cannot get child at index `".concat(e,"` in node: ").concat(Be.stringify(t)));return r},children(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return(function*(){for(var{reverse:n=!1}=r,a=H.ancestor(t,e),{children:u}=a,s=n?u.length-1:0;n?s>=0:s<u.length;){var i=H.child(a,s),f=e.concat(s);yield[i,f],s=n?s-1:s+1}})()},common(t,e,r){var n=g.common(e,r),a=H.get(t,n);return[a,n]},descendant(t,e){var r=H.get(t,e);if(o.isEditor(r))throw new Error("Cannot get the descendant node at path [".concat(e,"] because it refers to the root editor node instead: ").concat(Be.stringify(r)));return r},descendants(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(function*(){for(var[r,n]of H.nodes(t,e))n.length!==0&&(yield[r,n])})()},elements(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(function*(){for(var[r,n]of H.nodes(t,e))J.isElement(r)&&(yield[r,n])})()},extractProps(t){if(J.isAncestor(t)){var e=Ge(t,Gs);return e}else{var e=Ge(t,Ys);return e}},first(t,e){for(var r=e.slice(),n=H.get(t,r);n&&!(X.isText(n)||n.children.length===0);)n=n.children[0],r.push(0);return[n,r]},fragment(t,e){var r={children:t.children},[n,a]=y.edges(e),u=H.nodes(r,{reverse:!0,pass:f=>{var[,c]=f;return!y.includes(e,c)}}),s=function(){if(!y.includes(e,i)){var c=i[i.length-1];ut(r,g.parent(i),d=>Tr(d,c,1))}g.equals(i,a.path)&&_t(r,i,d=>{var h=d.text.slice(0,a.offset);return It(It({},d),{},{text:h})}),g.equals(i,n.path)&&_t(r,i,d=>{var h=d.text.slice(n.offset);return It(It({},d),{},{text:h})})};for(var[,i]of u)s();return r.children},get(t,e){var r=H.getIf(t,e);if(r===void 0)throw new Error("Cannot find a descendant at path [".concat(e,"] in node: ").concat(Be.stringify(t)));return r},getIf(t,e){for(var r=t,n=0;n<e.length;n++){var a=e[n];if(X.isText(r)||!r.children[a])return;r=r.children[a]}return r},has(t,e){for(var r=t,n=0;n<e.length;n++){var a=e[n];if(X.isText(r)||!r.children[a])return!1;r=r.children[a]}return!0},isNode(t){var{deep:e=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return X.isText(t)||J.isElement(t,{deep:e})||o.isEditor(t,{deep:e})},isNodeList(t){var{deep:e=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Array.isArray(t)&&t.every(r=>H.isNode(r,{deep:e}))},last(t,e){for(var r=e.slice(),n=H.get(t,r);n&&!(X.isText(n)||n.children.length===0);){var a=n.children.length-1;n=n.children[a],r.push(a)}return[n,r]},leaf(t,e){var r=H.get(t,e);if(!X.isText(r))throw new Error("Cannot get the leaf node at path [".concat(e,"] because it refers to a non-leaf node: ").concat(Be.stringify(r)));return r},levels(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return(function*(){for(var n of g.levels(e,r)){var a=H.get(t,n);yield[a,n]}})()},matches(t,e){return J.isElement(t)&&J.isElementProps(e)&&J.matches(t,e)||X.isText(t)&&X.isTextProps(e)&&X.matches(t,e)},nodes(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(function*(){for(var{pass:r,reverse:n=!1}=e,{from:a=[],to:u}=e,s=new Set,i=[],f=t;!(u&&(n?g.isBefore(i,u):g.isAfter(i,u)));){if(s.has(f)||(yield[f,i]),!s.has(f)&&!X.isText(f)&&f.children.length!==0&&(r==null||r([f,i])===!1)){s.add(f);var c=n?f.children.length-1:0;g.isAncestor(i,a)&&(c=a[i.length]),i=i.concat(c),f=H.get(t,i);continue}if(i.length===0)break;if(!n){var d=g.next(i);if(H.has(t,d)){i=d,f=H.get(t,i);continue}}if(n&&i[i.length-1]!==0){var h=g.previous(i);i=h,f=H.get(t,i);continue}i=g.parent(i),f=H.get(t,i),s.add(f)}})()},parent(t,e){var r=g.parent(e),n=H.get(t,r);if(X.isText(n))throw new Error("Cannot get the parent of path [".concat(e,"] because it does not exist in the root."));return n},string(t){return X.isText(t)?t.text:t.children.map(H.string).join("")},texts(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(function*(){for(var[r,n]of H.nodes(t,e))X.isText(r)&&(yield[r,n])})()}};function pn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ce(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?pn(Object(r),!0).forEach(function(n){Ae(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pn(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var et={isNodeOperation(t){return et.isOperation(t)&&t.type.endsWith("_node")},isOperation(t){if(!xe(t))return!1;switch(t.type){case"insert_node":return g.isPath(t.path)&&H.isNode(t.node);case"insert_text":return typeof t.offset=="number"&&typeof t.text=="string"&&g.isPath(t.path);case"merge_node":return typeof t.position=="number"&&g.isPath(t.path)&&xe(t.properties);case"move_node":return g.isPath(t.path)&&g.isPath(t.newPath);case"remove_node":return g.isPath(t.path)&&H.isNode(t.node);case"remove_text":return typeof t.offset=="number"&&typeof t.text=="string"&&g.isPath(t.path);case"set_node":return g.isPath(t.path)&&xe(t.properties)&&xe(t.newProperties);case"set_selection":return t.properties===null&&y.isRange(t.newProperties)||t.newProperties===null&&y.isRange(t.properties)||xe(t.properties)&&xe(t.newProperties);case"split_node":return g.isPath(t.path)&&typeof t.position=="number"&&xe(t.properties);default:return!1}},isOperationList(t){return Array.isArray(t)&&t.every(e=>et.isOperation(e))},isSelectionOperation(t){return et.isOperation(t)&&t.type.endsWith("_selection")},isTextOperation(t){return et.isOperation(t)&&t.type.endsWith("_text")},inverse(t){switch(t.type){case"insert_node":return ce(ce({},t),{},{type:"remove_node"});case"insert_text":return ce(ce({},t),{},{type:"remove_text"});case"merge_node":return ce(ce({},t),{},{type:"split_node",path:g.previous(t.path)});case"move_node":{var{newPath:e,path:r}=t;if(g.equals(e,r))return t;if(g.isSibling(r,e))return ce(ce({},t),{},{path:e,newPath:r});var n=g.transform(r,t),a=g.transform(g.next(r),t);return ce(ce({},t),{},{path:n,newPath:a})}case"remove_node":return ce(ce({},t),{},{type:"insert_node"});case"remove_text":return ce(ce({},t),{},{type:"insert_text"});case"set_node":{var{properties:u,newProperties:s}=t;return ce(ce({},t),{},{properties:s,newProperties:u})}case"set_selection":{var{properties:i,newProperties:f}=t;return i==null?ce(ce({},t),{},{properties:f,newProperties:null}):f==null?ce(ce({},t),{},{properties:null,newProperties:i}):ce(ce({},t),{},{properties:f,newProperties:i})}case"split_node":return ce(ce({},t),{},{type:"merge_node",path:g.next(t.path)})}}},xe=t=>typeof t=="object"&&t!==null,Za=(t,e)=>{for(var r in t){var n=t[r],a=e[r];if(Array.isArray(n)&&Array.isArray(a)){if(n.length!==a.length)return!1;for(var u=0;u<n.length;u++)if(n[u]!==a[u])return!1}else if(xe(n)&&xe(a)){if(!Za(n,a))return!1}else if(n!==a)return!1}for(var s in e)if(t[s]===void 0&&e[s]!==void 0)return!1;return!0},qr=t=>t.selection?t.selection:t.children.length>0?o.end(t,[]):[0],Bt=(t,e)=>{var[r]=o.node(t,e);return n=>n===r},Hr=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=!r,a=r?ei(e):e,u=_.None,s=_.None,i=0,f=null,c=null;for(var d of a){var h=d.codePointAt(0);if(!h)break;var v=di(d,h);if([u,s]=n?[s,v]:[v,u],ht(u,_.ZWJ)&&ht(s,_.ExtPict)&&(n?f=Cn(e.substring(0,i)):f=Cn(e.substring(0,e.length-i)),!f)||ht(u,_.RI)&&ht(s,_.RI)&&(c!==null?c=!c:n?c=!0:c=mi(e.substring(0,e.length-i)),!c)||u!==_.None&&s!==_.None&&hi(u,s))break;i+=d.length}return i||1},Xs=/\s/,Js=/[\u002B\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,Zs=/['\u2018\u2019]/,Qs=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=0,a=!1;e.length>0;){var u=Hr(e,r),[s,i]=Kr(e,u,r);if(_s(s,i,r))a=!0,n+=u;else if(!a)n+=u;else break;e=i}return n},Kr=(t,e,r)=>{if(r){var n=t.length-e;return[t.slice(n,t.length),t.slice(0,n)]}return[t.slice(0,e),t.slice(e)]},_s=function t(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(Xs.test(e))return!1;if(Zs.test(e)){var a=Hr(r,n),[u,s]=Kr(r,a,n);if(t(u,s,n))return!0}return!Js.test(e)},ei=function*(e){for(var r=e.length-1,n=0;n<e.length;n++){var a=e.charAt(r-n);if(ri(a.charCodeAt(0))){var u=e.charAt(r-n-1);if(ti(u.charCodeAt(0))){yield u+a,n++;continue}}yield a}},ti=t=>t>=55296&&t<=56319,ri=t=>t>=56320&&t<=57343,_;(function(t){t[t.None=0]="None",t[t.Extend=1]="Extend",t[t.ZWJ=2]="ZWJ",t[t.RI=4]="RI",t[t.Prepend=8]="Prepend",t[t.SpacingMark=16]="SpacingMark",t[t.L=32]="L",t[t.V=64]="V",t[t.T=128]="T",t[t.LV=256]="LV",t[t.LVT=512]="LVT",t[t.ExtPict=1024]="ExtPict",t[t.Any=2048]="Any"})(_||(_={}));var ni=/^(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC01\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDE41\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4\uDF00\uDF01\uDF36-\uDF3A\uDF40\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])$/,ai=/^(?:[\u0600-\u0605\u06DD\u070F\u0890\u0891\u08E2\u0D4E]|\uD804[\uDCBD\uDCCD\uDDC2\uDDC3]|\uD806[\uDD3F\uDD41\uDE3A\uDE84-\uDE89]|\uD807\uDD46)$/,ui=/^(?:[\u0903\u093B\u093E-\u0940\u0949-\u094C\u094E\u094F\u0982\u0983\u09BF\u09C0\u09C7\u09C8\u09CB\u09CC\u0A03\u0A3E-\u0A40\u0A83\u0ABE-\u0AC0\u0AC9\u0ACB\u0ACC\u0B02\u0B03\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0C01-\u0C03\u0C41-\u0C44\u0C82\u0C83\u0CBE\u0CC0\u0CC1\u0CC3\u0CC4\u0CC7\u0CC8\u0CCA\u0CCB\u0D02\u0D03\u0D3F\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D82\u0D83\u0DD0\u0DD1\u0DD8-\u0DDE\u0DF2\u0DF3\u0E33\u0EB3\u0F3E\u0F3F\u0F7F\u1031\u103B\u103C\u1056\u1057\u1084\u1715\u1734\u17B6\u17BE-\u17C5\u17C7\u17C8\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1A19\u1A1A\u1A55\u1A57\u1A6D-\u1A72\u1B04\u1B3B\u1B3D-\u1B41\u1B43\u1B44\u1B82\u1BA1\u1BA6\u1BA7\u1BAA\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1C24-\u1C2B\u1C34\u1C35\u1CE1\u1CF7\uA823\uA824\uA827\uA880\uA881\uA8B4-\uA8C3\uA952\uA953\uA983\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9C0\uAA2F\uAA30\uAA33\uAA34\uAA4D\uAAEB\uAAEE\uAAEF\uAAF5\uABE3\uABE4\uABE6\uABE7\uABE9\uABEA\uABEC]|\uD804[\uDC00\uDC02\uDC82\uDCB0-\uDCB2\uDCB7\uDCB8\uDD2C\uDD45\uDD46\uDD82\uDDB3-\uDDB5\uDDBF\uDDC0\uDDCE\uDE2C-\uDE2E\uDE32\uDE33\uDE35\uDEE0-\uDEE2\uDF02\uDF03\uDF3F\uDF41-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF62\uDF63]|\uD805[\uDC35-\uDC37\uDC40\uDC41\uDC45\uDCB1\uDCB2\uDCB9\uDCBB\uDCBC\uDCBE\uDCC1\uDDB0\uDDB1\uDDB8-\uDDBB\uDDBE\uDE30-\uDE32\uDE3B\uDE3C\uDE3E\uDEAC\uDEAE\uDEAF\uDEB6\uDF26]|\uD806[\uDC2C-\uDC2E\uDC38\uDD31-\uDD35\uDD37\uDD38\uDD3D\uDD40\uDD42\uDDD1-\uDDD3\uDDDC-\uDDDF\uDDE4\uDE39\uDE57\uDE58\uDE97]|\uD807[\uDC2F\uDC3E\uDCA9\uDCB1\uDCB4\uDD8A-\uDD8E\uDD93\uDD94\uDD96\uDEF5\uDEF6]|\uD81B[\uDF51-\uDF87\uDFF0\uDFF1]|\uD834[\uDD66\uDD6D])$/,si=/^[\u1100-\u115F\uA960-\uA97C]$/,ii=/^[\u1160-\u11A7\uD7B0-\uD7C6]$/,oi=/^[\u11A8-\u11FF\uD7CB-\uD7FB]$/,li=/^[\uAC00\uAC1C\uAC38\uAC54\uAC70\uAC8C\uACA8\uACC4\uACE0\uACFC\uAD18\uAD34\uAD50\uAD6C\uAD88\uADA4\uADC0\uADDC\uADF8\uAE14\uAE30\uAE4C\uAE68\uAE84\uAEA0\uAEBC\uAED8\uAEF4\uAF10\uAF2C\uAF48\uAF64\uAF80\uAF9C\uAFB8\uAFD4\uAFF0\uB00C\uB028\uB044\uB060\uB07C\uB098\uB0B4\uB0D0\uB0EC\uB108\uB124\uB140\uB15C\uB178\uB194\uB1B0\uB1CC\uB1E8\uB204\uB220\uB23C\uB258\uB274\uB290\uB2AC\uB2C8\uB2E4\uB300\uB31C\uB338\uB354\uB370\uB38C\uB3A8\uB3C4\uB3E0\uB3FC\uB418\uB434\uB450\uB46C\uB488\uB4A4\uB4C0\uB4DC\uB4F8\uB514\uB530\uB54C\uB568\uB584\uB5A0\uB5BC\uB5D8\uB5F4\uB610\uB62C\uB648\uB664\uB680\uB69C\uB6B8\uB6D4\uB6F0\uB70C\uB728\uB744\uB760\uB77C\uB798\uB7B4\uB7D0\uB7EC\uB808\uB824\uB840\uB85C\uB878\uB894\uB8B0\uB8CC\uB8E8\uB904\uB920\uB93C\uB958\uB974\uB990\uB9AC\uB9C8\uB9E4\uBA00\uBA1C\uBA38\uBA54\uBA70\uBA8C\uBAA8\uBAC4\uBAE0\uBAFC\uBB18\uBB34\uBB50\uBB6C\uBB88\uBBA4\uBBC0\uBBDC\uBBF8\uBC14\uBC30\uBC4C\uBC68\uBC84\uBCA0\uBCBC\uBCD8\uBCF4\uBD10\uBD2C\uBD48\uBD64\uBD80\uBD9C\uBDB8\uBDD4\uBDF0\uBE0C\uBE28\uBE44\uBE60\uBE7C\uBE98\uBEB4\uBED0\uBEEC\uBF08\uBF24\uBF40\uBF5C\uBF78\uBF94\uBFB0\uBFCC\uBFE8\uC004\uC020\uC03C\uC058\uC074\uC090\uC0AC\uC0C8\uC0E4\uC100\uC11C\uC138\uC154\uC170\uC18C\uC1A8\uC1C4\uC1E0\uC1FC\uC218\uC234\uC250\uC26C\uC288\uC2A4\uC2C0\uC2DC\uC2F8\uC314\uC330\uC34C\uC368\uC384\uC3A0\uC3BC\uC3D8\uC3F4\uC410\uC42C\uC448\uC464\uC480\uC49C\uC4B8\uC4D4\uC4F0\uC50C\uC528\uC544\uC560\uC57C\uC598\uC5B4\uC5D0\uC5EC\uC608\uC624\uC640\uC65C\uC678\uC694\uC6B0\uC6CC\uC6E8\uC704\uC720\uC73C\uC758\uC774\uC790\uC7AC\uC7C8\uC7E4\uC800\uC81C\uC838\uC854\uC870\uC88C\uC8A8\uC8C4\uC8E0\uC8FC\uC918\uC934\uC950\uC96C\uC988\uC9A4\uC9C0\uC9DC\uC9F8\uCA14\uCA30\uCA4C\uCA68\uCA84\uCAA0\uCABC\uCAD8\uCAF4\uCB10\uCB2C\uCB48\uCB64\uCB80\uCB9C\uCBB8\uCBD4\uCBF0\uCC0C\uCC28\uCC44\uCC60\uCC7C\uCC98\uCCB4\uCCD0\uCCEC\uCD08\uCD24\uCD40\uCD5C\uCD78\uCD94\uCDB0\uCDCC\uCDE8\uCE04\uCE20\uCE3C\uCE58\uCE74\uCE90\uCEAC\uCEC8\uCEE4\uCF00\uCF1C\uCF38\uCF54\uCF70\uCF8C\uCFA8\uCFC4\uCFE0\uCFFC\uD018\uD034\uD050\uD06C\uD088\uD0A4\uD0C0\uD0DC\uD0F8\uD114\uD130\uD14C\uD168\uD184\uD1A0\uD1BC\uD1D8\uD1F4\uD210\uD22C\uD248\uD264\uD280\uD29C\uD2B8\uD2D4\uD2F0\uD30C\uD328\uD344\uD360\uD37C\uD398\uD3B4\uD3D0\uD3EC\uD408\uD424\uD440\uD45C\uD478\uD494\uD4B0\uD4CC\uD4E8\uD504\uD520\uD53C\uD558\uD574\uD590\uD5AC\uD5C8\uD5E4\uD600\uD61C\uD638\uD654\uD670\uD68C\uD6A8\uD6C4\uD6E0\uD6FC\uD718\uD734\uD750\uD76C\uD788]$/,ci=/^[\uAC01-\uAC1B\uAC1D-\uAC37\uAC39-\uAC53\uAC55-\uAC6F\uAC71-\uAC8B\uAC8D-\uACA7\uACA9-\uACC3\uACC5-\uACDF\uACE1-\uACFB\uACFD-\uAD17\uAD19-\uAD33\uAD35-\uAD4F\uAD51-\uAD6B\uAD6D-\uAD87\uAD89-\uADA3\uADA5-\uADBF\uADC1-\uADDB\uADDD-\uADF7\uADF9-\uAE13\uAE15-\uAE2F\uAE31-\uAE4B\uAE4D-\uAE67\uAE69-\uAE83\uAE85-\uAE9F\uAEA1-\uAEBB\uAEBD-\uAED7\uAED9-\uAEF3\uAEF5-\uAF0F\uAF11-\uAF2B\uAF2D-\uAF47\uAF49-\uAF63\uAF65-\uAF7F\uAF81-\uAF9B\uAF9D-\uAFB7\uAFB9-\uAFD3\uAFD5-\uAFEF\uAFF1-\uB00B\uB00D-\uB027\uB029-\uB043\uB045-\uB05F\uB061-\uB07B\uB07D-\uB097\uB099-\uB0B3\uB0B5-\uB0CF\uB0D1-\uB0EB\uB0ED-\uB107\uB109-\uB123\uB125-\uB13F\uB141-\uB15B\uB15D-\uB177\uB179-\uB193\uB195-\uB1AF\uB1B1-\uB1CB\uB1CD-\uB1E7\uB1E9-\uB203\uB205-\uB21F\uB221-\uB23B\uB23D-\uB257\uB259-\uB273\uB275-\uB28F\uB291-\uB2AB\uB2AD-\uB2C7\uB2C9-\uB2E3\uB2E5-\uB2FF\uB301-\uB31B\uB31D-\uB337\uB339-\uB353\uB355-\uB36F\uB371-\uB38B\uB38D-\uB3A7\uB3A9-\uB3C3\uB3C5-\uB3DF\uB3E1-\uB3FB\uB3FD-\uB417\uB419-\uB433\uB435-\uB44F\uB451-\uB46B\uB46D-\uB487\uB489-\uB4A3\uB4A5-\uB4BF\uB4C1-\uB4DB\uB4DD-\uB4F7\uB4F9-\uB513\uB515-\uB52F\uB531-\uB54B\uB54D-\uB567\uB569-\uB583\uB585-\uB59F\uB5A1-\uB5BB\uB5BD-\uB5D7\uB5D9-\uB5F3\uB5F5-\uB60F\uB611-\uB62B\uB62D-\uB647\uB649-\uB663\uB665-\uB67F\uB681-\uB69B\uB69D-\uB6B7\uB6B9-\uB6D3\uB6D5-\uB6EF\uB6F1-\uB70B\uB70D-\uB727\uB729-\uB743\uB745-\uB75F\uB761-\uB77B\uB77D-\uB797\uB799-\uB7B3\uB7B5-\uB7CF\uB7D1-\uB7EB\uB7ED-\uB807\uB809-\uB823\uB825-\uB83F\uB841-\uB85B\uB85D-\uB877\uB879-\uB893\uB895-\uB8AF\uB8B1-\uB8CB\uB8CD-\uB8E7\uB8E9-\uB903\uB905-\uB91F\uB921-\uB93B\uB93D-\uB957\uB959-\uB973\uB975-\uB98F\uB991-\uB9AB\uB9AD-\uB9C7\uB9C9-\uB9E3\uB9E5-\uB9FF\uBA01-\uBA1B\uBA1D-\uBA37\uBA39-\uBA53\uBA55-\uBA6F\uBA71-\uBA8B\uBA8D-\uBAA7\uBAA9-\uBAC3\uBAC5-\uBADF\uBAE1-\uBAFB\uBAFD-\uBB17\uBB19-\uBB33\uBB35-\uBB4F\uBB51-\uBB6B\uBB6D-\uBB87\uBB89-\uBBA3\uBBA5-\uBBBF\uBBC1-\uBBDB\uBBDD-\uBBF7\uBBF9-\uBC13\uBC15-\uBC2F\uBC31-\uBC4B\uBC4D-\uBC67\uBC69-\uBC83\uBC85-\uBC9F\uBCA1-\uBCBB\uBCBD-\uBCD7\uBCD9-\uBCF3\uBCF5-\uBD0F\uBD11-\uBD2B\uBD2D-\uBD47\uBD49-\uBD63\uBD65-\uBD7F\uBD81-\uBD9B\uBD9D-\uBDB7\uBDB9-\uBDD3\uBDD5-\uBDEF\uBDF1-\uBE0B\uBE0D-\uBE27\uBE29-\uBE43\uBE45-\uBE5F\uBE61-\uBE7B\uBE7D-\uBE97\uBE99-\uBEB3\uBEB5-\uBECF\uBED1-\uBEEB\uBEED-\uBF07\uBF09-\uBF23\uBF25-\uBF3F\uBF41-\uBF5B\uBF5D-\uBF77\uBF79-\uBF93\uBF95-\uBFAF\uBFB1-\uBFCB\uBFCD-\uBFE7\uBFE9-\uC003\uC005-\uC01F\uC021-\uC03B\uC03D-\uC057\uC059-\uC073\uC075-\uC08F\uC091-\uC0AB\uC0AD-\uC0C7\uC0C9-\uC0E3\uC0E5-\uC0FF\uC101-\uC11B\uC11D-\uC137\uC139-\uC153\uC155-\uC16F\uC171-\uC18B\uC18D-\uC1A7\uC1A9-\uC1C3\uC1C5-\uC1DF\uC1E1-\uC1FB\uC1FD-\uC217\uC219-\uC233\uC235-\uC24F\uC251-\uC26B\uC26D-\uC287\uC289-\uC2A3\uC2A5-\uC2BF\uC2C1-\uC2DB\uC2DD-\uC2F7\uC2F9-\uC313\uC315-\uC32F\uC331-\uC34B\uC34D-\uC367\uC369-\uC383\uC385-\uC39F\uC3A1-\uC3BB\uC3BD-\uC3D7\uC3D9-\uC3F3\uC3F5-\uC40F\uC411-\uC42B\uC42D-\uC447\uC449-\uC463\uC465-\uC47F\uC481-\uC49B\uC49D-\uC4B7\uC4B9-\uC4D3\uC4D5-\uC4EF\uC4F1-\uC50B\uC50D-\uC527\uC529-\uC543\uC545-\uC55F\uC561-\uC57B\uC57D-\uC597\uC599-\uC5B3\uC5B5-\uC5CF\uC5D1-\uC5EB\uC5ED-\uC607\uC609-\uC623\uC625-\uC63F\uC641-\uC65B\uC65D-\uC677\uC679-\uC693\uC695-\uC6AF\uC6B1-\uC6CB\uC6CD-\uC6E7\uC6E9-\uC703\uC705-\uC71F\uC721-\uC73B\uC73D-\uC757\uC759-\uC773\uC775-\uC78F\uC791-\uC7AB\uC7AD-\uC7C7\uC7C9-\uC7E3\uC7E5-\uC7FF\uC801-\uC81B\uC81D-\uC837\uC839-\uC853\uC855-\uC86F\uC871-\uC88B\uC88D-\uC8A7\uC8A9-\uC8C3\uC8C5-\uC8DF\uC8E1-\uC8FB\uC8FD-\uC917\uC919-\uC933\uC935-\uC94F\uC951-\uC96B\uC96D-\uC987\uC989-\uC9A3\uC9A5-\uC9BF\uC9C1-\uC9DB\uC9DD-\uC9F7\uC9F9-\uCA13\uCA15-\uCA2F\uCA31-\uCA4B\uCA4D-\uCA67\uCA69-\uCA83\uCA85-\uCA9F\uCAA1-\uCABB\uCABD-\uCAD7\uCAD9-\uCAF3\uCAF5-\uCB0F\uCB11-\uCB2B\uCB2D-\uCB47\uCB49-\uCB63\uCB65-\uCB7F\uCB81-\uCB9B\uCB9D-\uCBB7\uCBB9-\uCBD3\uCBD5-\uCBEF\uCBF1-\uCC0B\uCC0D-\uCC27\uCC29-\uCC43\uCC45-\uCC5F\uCC61-\uCC7B\uCC7D-\uCC97\uCC99-\uCCB3\uCCB5-\uCCCF\uCCD1-\uCCEB\uCCED-\uCD07\uCD09-\uCD23\uCD25-\uCD3F\uCD41-\uCD5B\uCD5D-\uCD77\uCD79-\uCD93\uCD95-\uCDAF\uCDB1-\uCDCB\uCDCD-\uCDE7\uCDE9-\uCE03\uCE05-\uCE1F\uCE21-\uCE3B\uCE3D-\uCE57\uCE59-\uCE73\uCE75-\uCE8F\uCE91-\uCEAB\uCEAD-\uCEC7\uCEC9-\uCEE3\uCEE5-\uCEFF\uCF01-\uCF1B\uCF1D-\uCF37\uCF39-\uCF53\uCF55-\uCF6F\uCF71-\uCF8B\uCF8D-\uCFA7\uCFA9-\uCFC3\uCFC5-\uCFDF\uCFE1-\uCFFB\uCFFD-\uD017\uD019-\uD033\uD035-\uD04F\uD051-\uD06B\uD06D-\uD087\uD089-\uD0A3\uD0A5-\uD0BF\uD0C1-\uD0DB\uD0DD-\uD0F7\uD0F9-\uD113\uD115-\uD12F\uD131-\uD14B\uD14D-\uD167\uD169-\uD183\uD185-\uD19F\uD1A1-\uD1BB\uD1BD-\uD1D7\uD1D9-\uD1F3\uD1F5-\uD20F\uD211-\uD22B\uD22D-\uD247\uD249-\uD263\uD265-\uD27F\uD281-\uD29B\uD29D-\uD2B7\uD2B9-\uD2D3\uD2D5-\uD2EF\uD2F1-\uD30B\uD30D-\uD327\uD329-\uD343\uD345-\uD35F\uD361-\uD37B\uD37D-\uD397\uD399-\uD3B3\uD3B5-\uD3CF\uD3D1-\uD3EB\uD3ED-\uD407\uD409-\uD423\uD425-\uD43F\uD441-\uD45B\uD45D-\uD477\uD479-\uD493\uD495-\uD4AF\uD4B1-\uD4CB\uD4CD-\uD4E7\uD4E9-\uD503\uD505-\uD51F\uD521-\uD53B\uD53D-\uD557\uD559-\uD573\uD575-\uD58F\uD591-\uD5AB\uD5AD-\uD5C7\uD5C9-\uD5E3\uD5E5-\uD5FF\uD601-\uD61B\uD61D-\uD637\uD639-\uD653\uD655-\uD66F\uD671-\uD68B\uD68D-\uD6A7\uD6A9-\uD6C3\uD6C5-\uD6DF\uD6E1-\uD6FB\uD6FD-\uD717\uD719-\uD733\uD735-\uD74F\uD751-\uD76B\uD76D-\uD787\uD789-\uD7A3]$/,fi=/^(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])$/,di=(t,e)=>{var r=_.Any;return t.search(ni)!==-1&&(r|=_.Extend),e===8205&&(r|=_.ZWJ),e>=127462&&e<=127487&&(r|=_.RI),t.search(ai)!==-1&&(r|=_.Prepend),t.search(ui)!==-1&&(r|=_.SpacingMark),t.search(si)!==-1&&(r|=_.L),t.search(ii)!==-1&&(r|=_.V),t.search(oi)!==-1&&(r|=_.T),t.search(li)!==-1&&(r|=_.LV),t.search(ci)!==-1&&(r|=_.LVT),t.search(fi)!==-1&&(r|=_.ExtPict),r};function ht(t,e){return(t&e)!==0}var vi=[[_.L,_.L|_.V|_.LV|_.LVT],[_.LV|_.V,_.V|_.T],[_.LVT|_.T,_.T],[_.Any,_.Extend|_.ZWJ],[_.Any,_.SpacingMark],[_.Prepend,_.Any],[_.ZWJ,_.ExtPict],[_.RI,_.RI]];function hi(t,e){return vi.findIndex(r=>ht(t,r[0])&&ht(e,r[1]))===-1}var gi=/(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC01\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDE41\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4\uDF00\uDF01\uDF36-\uDF3A\uDF40\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])*\u200D$/,Cn=t=>t.search(gi)!==-1,Di=/(?:\uD83C[\uDDE6-\uDDFF])+$/g,mi=t=>{var e=t.match(Di);if(e===null)return!1;var r=e[0].length/2;return r%2===1},pi=function(e){var{deep:r=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!xe(e))return!1;var n=typeof e.addMark=="function"&&typeof e.apply=="function"&&typeof e.deleteFragment=="function"&&typeof e.insertBreak=="function"&&typeof e.insertSoftBreak=="function"&&typeof e.insertFragment=="function"&&typeof e.insertNode=="function"&&typeof e.insertText=="function"&&typeof e.isElementReadOnly=="function"&&typeof e.isInline=="function"&&typeof e.isSelectable=="function"&&typeof e.isVoid=="function"&&typeof e.normalizeNode=="function"&&typeof e.onChange=="function"&&typeof e.removeMark=="function"&&typeof e.getDirtyPaths=="function"&&(e.marks===null||xe(e.marks))&&(e.selection===null||y.isRange(e.selection))&&(!r||H.isNodeList(e.children))&&et.isOperationList(e.operations);return n},o={above(t,e){return t.above(e)},addMark(t,e,r){t.addMark(e,r)},after(t,e,r){return t.after(e,r)},before(t,e,r){return t.before(e,r)},deleteBackward(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:r="character"}=e;t.deleteBackward(r)},deleteForward(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:r="character"}=e;t.deleteForward(r)},deleteFragment(t,e){t.deleteFragment(e)},edges(t,e){return t.edges(e)},elementReadOnly(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t.elementReadOnly(e)},end(t,e){return t.end(e)},first(t,e){return t.first(e)},fragment(t,e){return t.fragment(e)},hasBlocks(t,e){return t.hasBlocks(e)},hasInlines(t,e){return t.hasInlines(e)},hasPath(t,e){return t.hasPath(e)},hasTexts(t,e){return t.hasTexts(e)},insertBreak(t){t.insertBreak()},insertFragment(t,e,r){t.insertFragment(e,r)},insertNode(t,e){t.insertNode(e)},insertSoftBreak(t){t.insertSoftBreak()},insertText(t,e){t.insertText(e)},isBlock(t,e){return t.isBlock(e)},isEdge(t,e,r){return t.isEdge(e,r)},isEditor(t){return pi(t)},isElementReadOnly(t,e){return t.isElementReadOnly(e)},isEmpty(t,e){return t.isEmpty(e)},isEnd(t,e,r){return t.isEnd(e,r)},isInline(t,e){return t.isInline(e)},isNormalizing(t){return t.isNormalizing()},isSelectable(t,e){return t.isSelectable(e)},isStart(t,e,r){return t.isStart(e,r)},isVoid(t,e){return t.isVoid(e)},last(t,e){return t.last(e)},leaf(t,e,r){return t.leaf(e,r)},levels(t,e){return t.levels(e)},marks(t){return t.getMarks()},next(t,e){return t.next(e)},node(t,e,r){return t.node(e,r)},nodes(t,e){return t.nodes(e)},normalize(t,e){t.normalize(e)},parent(t,e,r){return t.parent(e,r)},path(t,e,r){return t.path(e,r)},pathRef(t,e,r){return t.pathRef(e,r)},pathRefs(t){return t.pathRefs()},point(t,e,r){return t.point(e,r)},pointRef(t,e,r){return t.pointRef(e,r)},pointRefs(t){return t.pointRefs()},positions(t,e){return t.positions(e)},previous(t,e){return t.previous(e)},range(t,e,r){return t.range(e,r)},rangeRef(t,e,r){return t.rangeRef(e,r)},rangeRefs(t){return t.rangeRefs()},removeMark(t,e){t.removeMark(e)},setNormalizing(t,e){t.setNormalizing(e)},start(t,e){return t.start(e)},string(t,e,r){return t.string(e,r)},unhangRange(t,e,r){return t.unhangRange(e,r)},void(t,e){return t.void(e)},withoutNormalizing(t,e){t.withoutNormalizing(e)},shouldMergeNodesRemovePrevNode:(t,e,r)=>t.shouldMergeNodesRemovePrevNode(e,r)},Ci={isSpan(t){return Array.isArray(t)&&t.length===2&&t.every(g.isPath)}};function Bn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function En(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Bn(Object(r),!0).forEach(function(n){Ae(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Bn(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var ue={compare(t,e){var r=g.compare(t.path,e.path);return r===0?t.offset<e.offset?-1:t.offset>e.offset?1:0:r},isAfter(t,e){return ue.compare(t,e)===1},isBefore(t,e){return ue.compare(t,e)===-1},equals(t,e){return t.offset===e.offset&&g.equals(t.path,e.path)},isPoint(t){return xe(t)&&typeof t.offset=="number"&&g.isPath(t.path)},transform(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(t===null)return null;var{affinity:n="forward"}=r,{path:a,offset:u}=t;switch(e.type){case"insert_node":case"move_node":{a=g.transform(a,e,r);break}case"insert_text":{g.equals(e.path,a)&&(e.offset<u||e.offset===u&&n==="forward")&&(u+=e.text.length);break}case"merge_node":{g.equals(e.path,a)&&(u+=e.position),a=g.transform(a,e,r);break}case"remove_text":{g.equals(e.path,a)&&e.offset<=u&&(u-=Math.min(u-e.offset,e.text.length));break}case"remove_node":{if(g.equals(e.path,a)||g.isAncestor(e.path,a))return null;a=g.transform(a,e,r);break}case"split_node":{if(g.equals(e.path,a)){if(e.position===u&&n==null)return null;(e.position<u||e.position===u&&n==="forward")&&(u-=e.position,a=g.transform(a,e,En(En({},r),{},{affinity:"forward"})))}else a=g.transform(a,e,r);break}default:return t}return{path:a,offset:u}}},bn=void 0,Be={setScrubber(t){bn=t},stringify(t){return JSON.stringify(t,bn)}},Bi=["text"],Ei=["anchor","focus","merge"];function wn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function He(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?wn(Object(r),!0).forEach(function(n){Ae(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wn(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var X={equals(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{loose:n=!1}=r;function a(u){var s=Ge(u,Bi);return s}return Za(n?a(t):t,n?a(e):e)},isText(t){return xe(t)&&typeof t.text=="string"},isTextList(t){return Array.isArray(t)&&t.every(e=>X.isText(e))},isTextProps(t){return t.text!==void 0},matches(t,e){for(var r in e)if(r!=="text"&&(!t.hasOwnProperty(r)||t[r]!==e[r]))return!1;return!0},decorations(t,e){var r=[{leaf:He({},t)}];for(var n of e){var{anchor:a,focus:u,merge:s}=n,i=Ge(n,Ei),[f,c]=y.edges(n),d=[],h=0,v=f.offset,D=c.offset,C=s??Object.assign;for(var{leaf:E}of r){var{length:w}=E.text,p=h;if(h+=w,v<=p&&h<=D){C(E,i),d.push({leaf:E});continue}if(v!==D&&(v===h||D===p)||v>h||D<p||D===p&&p!==0){d.push({leaf:E});continue}var l=E,b=void 0,A=void 0;if(D<h){var O=D-p;A={leaf:He(He({},l),{},{text:l.text.slice(O)})},l=He(He({},l),{},{text:l.text.slice(0,O)})}if(v>p){var k=v-p;b={leaf:He(He({},l),{},{text:l.text.slice(0,k)})},l=He(He({},l),{},{text:l.text.slice(k)})}C(l,i),b&&d.push(b),d.push({leaf:l}),A&&d.push(A)}r=d}if(r.length>1){var I=0;for(var[L,W]of r.entries()){var $=I,K=$+W.leaf.text.length,N={start:$,end:K};L===0&&(N.isFirst=!0),L===r.length-1&&(N.isLast=!0),W.position=N,I=K}}return r}};function An(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Qt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?An(Object(r),!0).forEach(function(n){Ae(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):An(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Fn=function(e,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),u=2;u<n;u++)a[u-2]=arguments[u];return[...e.slice(0,r),...a,...e.slice(r)]},Pt=function(e,r,n){for(var a=arguments.length,u=new Array(a>3?a-3:0),s=3;s<a;s++)u[s-3]=arguments[s];return[...e.slice(0,r),...u,...e.slice(r+n)]},Tr=Pt,Vr=(t,e,r)=>{if(e.length===0)throw new Error("Cannot modify the editor");for(var n=H.get(t,e),a=e.slice(),u=r(n);a.length>1;){var s=a.pop(),i=H.get(t,a);u=Qt(Qt({},i),{},{children:Pt(i.children,s,1,u)})}var f=a.pop();t.children=Pt(t.children,f,1,u)},ut=(t,e,r)=>{e.length===0?t.children=r(t.children):Vr(t,e,n=>{if(X.isText(n))throw new Error("Cannot get the element at path [".concat(e,"] because it refers to a leaf node: ").concat(Be.stringify(n)));return Qt(Qt({},n),{},{children:r(n.children)})})},_t=(t,e,r)=>Vr(t,e,n=>{if(!X.isText(n))throw new Error("Cannot get the leaf node at path [".concat(e,"] because it refers to a non-leaf node: ").concat(Be.stringify(n)));return r(n)});function yn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function me(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?yn(Object(r),!0).forEach(function(n){Ae(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yn(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var bi={transform(t,e){var r=!1;switch(e.type){case"insert_node":{var{path:n,node:a}=e;ut(t,g.parent(n),R=>{var S=n[n.length-1];if(S>R.length)throw new Error('Cannot apply an "insert_node" operation at path ['.concat(n,"] because the destination is past the end of the node."));return Fn(R,S,a)}),r=!0;break}case"insert_text":{var{path:u,offset:s,text:i}=e;if(i.length===0)break;_t(t,u,R=>{var S=R.text.slice(0,s),M=R.text.slice(s);return me(me({},R),{},{text:S+i+M})}),r=!0;break}case"merge_node":{var{path:f}=e,c=f[f.length-1],d=g.previous(f),h=d[d.length-1];ut(t,g.parent(f),R=>{var S=R[c],M=R[h],te;if(X.isText(S)&&X.isText(M))te=me(me({},M),{},{text:M.text+S.text});else if(!X.isText(S)&&!X.isText(M))te=me(me({},M),{},{children:M.children.concat(S.children)});else throw new Error('Cannot apply a "merge_node" operation at path ['.concat(f,"] to nodes of different interfaces: ").concat(Be.stringify(S)," ").concat(Be.stringify(M)));return Pt(R,h,2,te)}),r=!0;break}case"move_node":{var{path:v,newPath:D}=e,C=v[v.length-1];if(g.isAncestor(v,D))throw new Error("Cannot move a path [".concat(v,"] to new path [").concat(D,"] because the destination is inside itself."));var E=H.get(t,v);ut(t,g.parent(v),R=>Tr(R,C,1));var w=g.transform(v,e),p=w[w.length-1];ut(t,g.parent(w),R=>Fn(R,p,E)),r=!0;break}case"remove_node":{var{path:l}=e,b=l[l.length-1];if(ut(t,g.parent(l),R=>Tr(R,b,1)),t.selection){var A=me({},t.selection);for(var[O,k]of y.points(A)){var I=ue.transform(O,e);if(A!=null&&I!=null)A[k]=I;else{var L=void 0,W=void 0;for(var[$,K]of H.texts(t))if(g.compare(K,l)===-1)L=[$,K];else{W=[$,K];break}var N=!1;L&&W&&(g.isSibling(L[1],l)?N=!1:g.equals(W[1],l)?N=!0:N=g.common(L[1],l).length<g.common(W[1],l).length),L&&!N?A[k]={path:L[1],offset:L[0].text.length}:W?A[k]={path:W[1],offset:0}:A=null}}(!A||!y.equals(A,t.selection))&&(t.selection=A)}break}case"remove_text":{var{path:j,offset:T,text:F}=e;if(F.length===0)break;_t(t,j,R=>{var S=R.text.slice(0,T),M=R.text.slice(T+F.length);return me(me({},R),{},{text:S+M})}),r=!0;break}case"set_node":{var{path:G,properties:V,newProperties:re}=e;if(G.length===0)throw new Error("Cannot set properties on the root node!");Vr(t,G,R=>{var S=me({},R);for(var M in re){if(M==="children"||M==="text")throw new Error('Cannot set the "'.concat(M,'" property of nodes!'));var te=re[M];te==null?delete S[M]:S[M]=te}for(var Y in V)re.hasOwnProperty(Y)||delete S[Y];return S});break}case"set_selection":{var{newProperties:q}=e;if(q==null){t.selection=null;break}if(t.selection==null){if(!y.isRange(q))throw new Error('Cannot apply an incomplete "set_selection" operation properties '.concat(Be.stringify(q)," when there is no current selection."));t.selection=me({},q);break}var Z=me({},t.selection);for(var ne in q){var se=q[ne];if(se==null){if(ne==="anchor"||ne==="focus")throw new Error('Cannot remove the "'.concat(ne,'" selection property'));delete Z[ne]}else Z[ne]=se}t.selection=Z;break}case"split_node":{var{path:U,position:ae,properties:De}=e,pe=U[U.length-1];if(U.length===0)throw new Error('Cannot apply a "split_node" operation at path ['.concat(U,"] because the root node cannot be split."));ut(t,g.parent(U),R=>{var S=R[pe],M,te;if(X.isText(S)){var Y=S.text.slice(0,ae),ve=S.text.slice(ae);M=me(me({},S),{},{text:Y}),te=me(me({},De),{},{text:ve})}else{var le=S.children.slice(0,ae),oe=S.children.slice(ae);M=me(me({},S),{},{children:le}),te=me(me({},De),{},{children:oe})}return Pt(R,pe,1,M,te)}),r=!0;break}}if(r&&t.selection){var Fe=me({},t.selection);for(var[Pe,B]of y.points(Fe))Fe[B]=ue.transform(Pe,e);y.equals(Fe,t.selection)||(t.selection=Fe)}}},wi={insertNodes(t,e,r){t.insertNodes(e,r)},liftNodes(t,e){t.liftNodes(e)},mergeNodes(t,e){t.mergeNodes(e)},moveNodes(t,e){t.moveNodes(e)},removeNodes(t,e){t.removeNodes(e)},setNodes(t,e,r){t.setNodes(e,r)},splitNodes(t,e){t.splitNodes(e)},unsetNodes(t,e,r){t.unsetNodes(e,r)},unwrapNodes(t,e){t.unwrapNodes(e)},wrapNodes(t,e,r){t.wrapNodes(e,r)}},Ai={collapse(t,e){t.collapse(e)},deselect(t){t.deselect()},move(t,e){t.move(e)},select(t,e){t.select(e)},setPoint(t,e,r){t.setPoint(e,r)},setSelection(t,e){t.setSelection(e)}},Fi={delete(t,e){t.delete(e)},insertFragment(t,e,r){t.insertFragment(e,r)},insertText(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};o.withoutNormalizing(t,()=>{var{voids:n=!1}=r,{at:a=qr(t)}=r;if(g.isPath(a)&&(a=o.range(t,a)),y.isRange(a))if(y.isCollapsed(a))a=a.anchor;else{var u=y.end(a);if(!n&&o.void(t,{at:u}))return;var s=y.start(a),i=o.pointRef(t,s),f=o.pointRef(t,u);P.delete(t,{at:a,voids:n});var c=i.unref(),d=f.unref();a=c||d,P.setSelection(t,{anchor:a,focus:a})}if(!(!n&&o.void(t,{at:a})||o.elementReadOnly(t,{at:a}))){var{path:h,offset:v}=a;e.length>0&&t.apply({type:"insert_text",path:h,offset:v,text:e})}})}};function xn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Lt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?xn(Object(r),!0).forEach(function(n){Ae(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xn(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var P=Lt(Lt(Lt(Lt({},bi),wi),Ai),Fi),Gt=new WeakMap,yi=t=>Gt.get(t)||!1,xi=(t,e,r)=>{var n=Gt.get(t)||!1;Gt.set(t,!0);try{e(),r()}finally{Gt.set(t,n)}};function Qa(t,e,r){var n=Jt.get(t)||[],a=Zt.get(t)||new Set,u,s,i=h=>{if(h){var v=h.join(",");s.has(v)||(s.add(v),u.push(h))}};if(r){u=[],s=new Set;for(var f of n){var c=r(f);i(c)}}else u=n,s=a;for(var d of e)i(d);Jt.set(t,u),Zt.set(t,s)}var Oi=(t,e)=>{for(var r of o.pathRefs(t))zs.transform(r,e);for(var n of o.pointRefs(t))$s.transform(n,e);for(var a of o.rangeRefs(t))Ws.transform(a,e);if(!yi(t)){var u=g.operationCanTransformPath(e)?s=>g.transform(s,e):void 0;Qa(t,t.getDirtyPaths(e),u)}P.transform(t,e),t.operations.push(e),o.normalize(t,{operation:e}),e.type==="set_selection"&&(t.marks=null),At.get(t)||(At.set(t,!0),Promise.resolve().then(()=>{At.set(t,!1),t.onChange({operation:e}),t.operations=[]}))},ji=(t,e)=>{switch(e.type){case"insert_text":case"remove_text":case"set_node":{var{path:r}=e;return g.levels(r)}case"insert_node":{var{node:n,path:a}=e,u=g.levels(a),s=X.isText(n)?[]:Array.from(H.nodes(n),$=>{var[,K]=$;return a.concat(K)});return[...u,...s]}case"merge_node":{var{path:i}=e,f=g.ancestors(i),c=g.previous(i);return[...f,c]}case"move_node":{var{path:d,newPath:h}=e;if(g.equals(d,h))return[];var v=[],D=[];for(var C of g.ancestors(d)){var E=g.transform(C,e);v.push(E)}for(var w of g.ancestors(h)){var p=g.transform(w,e);D.push(p)}var l=D[D.length-1],b=h[h.length-1],A=l.concat(b);return[...v,...D,A]}case"remove_node":{var{path:O}=e,k=g.ancestors(O);return[...k]}case"split_node":{var{path:I}=e,L=g.levels(I),W=g.next(I);return[...L,W]}default:return[]}},Si=t=>{var{selection:e}=t;return e?H.fragment(t,e):[]},Pi=(t,e,r)=>{var[n,a]=e;if(!X.isText(n)){if(J.isElement(n)&&n.children.length===0){var u={text:""};P.insertNodes(t,u,{at:a.concat(0),voids:!0});return}for(var s=o.isEditor(n)?!1:J.isElement(n)&&(t.isInline(n)||n.children.length===0||X.isText(n.children[0])||t.isInline(n.children[0])),i=0,f=0;f<n.children.length;f++,i++){var c=H.get(t,a);if(!X.isText(c)){var d=c.children[i],h=c.children[i-1],v=f===n.children.length-1,D=X.isText(d)||J.isElement(d)&&t.isInline(d);if(D!==s)D?r!=null&&r.fallbackElement?P.wrapNodes(t,r.fallbackElement(),{at:a.concat(i),voids:!0}):P.removeNodes(t,{at:a.concat(i),voids:!0}):P.unwrapNodes(t,{at:a.concat(i),voids:!0}),i--;else if(J.isElement(d)){if(t.isInline(d)){if(h==null||!X.isText(h)){var C={text:""};P.insertNodes(t,C,{at:a.concat(i),voids:!0}),i++}else if(v){var E={text:""};P.insertNodes(t,E,{at:a.concat(i+1),voids:!0}),i++}}}else{if(!X.isText(d)&&!("children"in d)){var w=d;w.children=[]}h!=null&&X.isText(h)&&(X.equals(d,h,{loose:!0})?(P.mergeNodes(t,{at:a.concat(i),voids:!0}),i--):h.text===""?(P.removeNodes(t,{at:a.concat(i-1),voids:!0}),i--):d.text===""&&(P.removeNodes(t,{at:a.concat(i),voids:!0}),i--))}}}}},Ni=(t,e)=>{var{iteration:r,initialDirtyPathsLength:n}=e,a=n*42;if(r>a)throw new Error("Could not completely normalize the editor after ".concat(a," iterations! This is usually due to incorrect normalization logic that leaves a node in an invalid state."));return!0},Ti=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{voids:n=!1,mode:a="lowest",at:u=e.selection,match:s}=r;if(u){var i=o.path(e,u);if(!y.isRange(u)||g.equals(u.focus.path,u.anchor.path)){if(i.length===0)return;i=g.parent(i)}var f=a==="lowest",[c]=o.levels(e,{at:i,voids:n,match:s,reverse:f});return c}};function On(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function jn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?On(Object(r),!0).forEach(function(n){Ae(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):On(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var ki=(t,e,r)=>{var{selection:n}=t;if(n){var a=(h,v)=>{if(!X.isText(h))return!1;var[D,C]=o.parent(t,v);return!t.isVoid(D)||t.markableVoid(D)},u=y.isExpanded(n),s=!1;if(!u){var[i,f]=o.node(t,n);if(i&&a(i,f)){var[c]=o.parent(t,f);s=c&&t.markableVoid(c)}}if(u||s)P.setNodes(t,{[e]:r},{match:a,split:!0,voids:!0});else{var d=jn(jn({},o.marks(t)||{}),{},{[e]:r});t.marks=d,At.get(t)||t.onChange()}}};function Sn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Pn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Sn(Object(r),!0).forEach(function(n){Ae(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Sn(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Ri=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=o.point(e,r,{edge:"end"}),u=o.end(e,[]),s={anchor:a,focus:u},{distance:i=1}=n,f=0,c;for(var d of o.positions(e,Pn(Pn({},n),{},{at:s}))){if(f>i)break;f!==0&&(c=d),f++}return c};function Nn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Tn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Nn(Object(r),!0).forEach(function(n){Ae(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Nn(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Mi=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=o.start(e,[]),u=o.point(e,r,{edge:"start"}),s={anchor:a,focus:u},{distance:i=1}=n,f=0,c;for(var d of o.positions(e,Tn(Tn({},n),{},{at:s,reverse:!0}))){if(f>i)break;f!==0&&(c=d),f++}return c},Ii=(t,e)=>{var{selection:r}=t;r&&y.isCollapsed(r)&&P.delete(t,{unit:e,reverse:!0})},Li=(t,e)=>{var{selection:r}=t;r&&y.isCollapsed(r)&&P.delete(t,{unit:e})},zi=function(e){var{direction:r="forward"}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{selection:n}=e;n&&y.isExpanded(n)&&P.delete(e,{reverse:r==="backward"})},$i=(t,e)=>[o.start(t,e),o.end(t,e)];function kn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Rn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?kn(Object(r),!0).forEach(function(n){Ae(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kn(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Wi=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return o.above(e,Rn(Rn({},r),{},{match:n=>J.isElement(n)&&o.isElementReadOnly(e,n)}))},qi=(t,e)=>o.point(t,e,{edge:"end"}),Hi=(t,e)=>{var r=o.path(t,e,{edge:"start"});return o.node(t,r)},Ki=(t,e)=>{var r=o.range(t,e);return H.fragment(t,r)};function Mn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function In(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Mn(Object(r),!0).forEach(function(n){Ae(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Mn(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Vi=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return o.above(e,In(In({},r),{},{match:n=>J.isElement(n)&&o.isVoid(e,n)}))},Ui=(t,e)=>e.children.some(r=>J.isElement(r)&&o.isBlock(t,r)),Gi=(t,e)=>e.children.some(r=>X.isText(r)||o.isInline(t,r)),Yi=(t,e)=>H.has(t,e),Xi=(t,e)=>e.children.every(r=>X.isText(r)),Ji=t=>{P.splitNodes(t,{always:!0})},Zi=(t,e,r)=>{P.insertNodes(t,e,r)},Qi=t=>{P.splitNodes(t,{always:!0})};function Ln(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function _i(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ln(Object(r),!0).forEach(function(n){Ae(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ln(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var eo=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{selection:a,marks:u}=e;if(a){if(u){var s=_i({text:r},u);P.insertNodes(e,s,{at:n.at,voids:n.voids})}else P.insertText(e,r,n);e.marks=null}},to=(t,e)=>!t.isInline(e),ro=(t,e,r)=>o.isStart(t,e,r)||o.isEnd(t,e,r),no=(t,e)=>{var{children:r}=e,[n]=r;return r.length===0||r.length===1&&X.isText(n)&&n.text===""&&!t.isVoid(e)},ao=(t,e,r)=>{var n=o.end(t,r);return ue.equals(e,n)},uo=t=>{var e=Ja.get(t);return e===void 0?!0:e},so=(t,e,r)=>{if(e.offset!==0)return!1;var n=o.start(t,r);return ue.equals(e,n)},io=(t,e)=>{var r=o.path(t,e,{edge:"end"});return o.node(t,r)},oo=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=o.path(e,r,n),u=H.leaf(e,a);return[u,a]};function lo(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(function*(){var{at:r=t.selection,reverse:n=!1,voids:a=!1}=e,{match:u}=e;if(u==null&&(u=()=>!0),!!r){var s=[],i=o.path(t,r);for(var[f,c]of H.levels(t,i))if(u(f,c)&&(s.push([f,c]),!a&&J.isElement(f)&&o.isVoid(t,f)))break;n&&s.reverse(),yield*s}})()}var co=["text"],fo=["text"],vo=function(e){var{marks:r,selection:n}=e;if(!n)return null;var{anchor:a,focus:u}=n;if(r)return r;if(y.isExpanded(n)){var s=y.isBackward(n);s&&([u,a]=[a,u]);var i=o.isEnd(e,a,a.path);if(i){var f=o.after(e,a);f&&(a=f)}var[c]=o.nodes(e,{match:X.isText,at:{anchor:a,focus:u}});if(c){var[d]=c,h=Ge(d,co);return h}else return{}}var{path:v}=a,[D]=o.leaf(e,v);if(a.offset===0){var C=o.previous(e,{at:v,match:X.isText}),E=o.above(e,{match:O=>J.isElement(O)&&o.isVoid(e,O)&&e.markableVoid(O)});if(!E){var w=o.above(e,{match:O=>J.isElement(O)&&o.isBlock(e,O)});if(C&&w){var[p,l]=C,[,b]=w;g.isAncestor(b,l)&&(D=p)}}}var A=Ge(D,fo);return A},ho=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:n="lowest",voids:a=!1}=r,{match:u,at:s=e.selection}=r;if(s){var i=o.after(e,s,{voids:a});if(i){var[,f]=o.last(e,[]),c=[i.path,f];if(g.isPath(s)&&s.length===0)throw new Error("Cannot get the next node from the root node!");if(u==null)if(g.isPath(s)){var[d]=o.parent(e,s);u=v=>d.children.includes(v)}else u=()=>!0;var[h]=o.nodes(e,{at:c,match:u,mode:n,voids:a});return h}}},go=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=o.path(e,r,n),u=H.get(e,a);return[u,a]};function Do(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(function*(){var{at:r=t.selection,mode:n="all",universal:a=!1,reverse:u=!1,voids:s=!1,pass:i}=e,{match:f}=e;if(f||(f=()=>!0),!!r){var c,d;if(Ci.isSpan(r))c=r[0],d=r[1];else{var h=o.path(t,r,{edge:"start"}),v=o.path(t,r,{edge:"end"});c=u?v:h,d=u?h:v}var D=H.nodes(t,{reverse:u,from:c,to:d,pass:A=>{var[O,k]=A;return i&&i([O,k])?!0:J.isElement(O)?!!(!s&&(o.isVoid(t,O)||o.isElementReadOnly(t,O))):!1}}),C=[],E;for(var[w,p]of D){var l=E&&g.compare(p,E[1])===0;if(!(n==="highest"&&l)){if(!f(w,p)){if(a&&!l&&X.isText(w))return;continue}if(n==="lowest"&&l){E=[w,p];continue}var b=n==="lowest"?E:[w,p];b&&(a?C.push(b):yield b),E=[w,p]}}n==="lowest"&&E&&(a?C.push(E):yield E),a&&(yield*C)}})()}var mo=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{force:n=!1,operation:a}=r,u=d=>Jt.get(d)||[],s=d=>Zt.get(d)||new Set,i=d=>{var h=u(d).pop(),v=h.join(",");return s(d).delete(v),h};if(o.isNormalizing(e)){if(n){var f=Array.from(H.nodes(e),d=>{var[,h]=d;return h}),c=new Set(f.map(d=>d.join(",")));Jt.set(e,f),Zt.set(e,c)}u(e).length!==0&&o.withoutNormalizing(e,()=>{for(var d of u(e))if(H.has(e,d)){var h=o.node(e,d),[v,D]=h;J.isElement(v)&&v.children.length===0&&e.normalizeNode(h,{operation:a})}for(var C=u(e),E=C.length,w=0;C.length!==0;){if(!e.shouldNormalize({dirtyPaths:C,iteration:w,initialDirtyPathsLength:E,operation:a}))return;var p=i(e);if(H.has(e,p)){var l=o.node(e,p);e.normalizeNode(l,{operation:a})}w++,C=u(e)}})}},po=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=o.path(e,r,n),u=g.parent(a),s=o.node(e,u);return s},Co=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:a="forward"}=n,u={current:r,affinity:a,unref(){var{current:i}=u,f=o.pathRefs(e);return f.delete(u),u.current=null,i}},s=o.pathRefs(e);return s.add(u),u},Bo=t=>{var e=dn.get(t);return e||(e=new Set,dn.set(t,e)),e},Eo=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{depth:a,edge:u}=n;if(g.isPath(r)){if(u==="start"){var[,s]=H.first(e,r);r=s}else if(u==="end"){var[,i]=H.last(e,r);r=i}}return y.isRange(r)&&(u==="start"?r=y.start(r):u==="end"?r=y.end(r):r=g.common(r.anchor.path,r.focus.path)),ue.isPoint(r)&&(r=r.path),a!=null&&(r=r.slice(0,a)),r},bo=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:a="forward"}=n,u={current:r,affinity:a,unref(){var{current:i}=u,f=o.pointRefs(e);return f.delete(u),u.current=null,i}},s=o.pointRefs(e);return s.add(u),u},wo=t=>{var e=vn.get(t);return e||(e=new Set,vn.set(t,e)),e},Ao=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{edge:a="start"}=n;if(g.isPath(r)){var u;if(a==="end"){var[,s]=H.last(e,r);u=s}else{var[,i]=H.first(e,r);u=i}var f=H.get(e,u);if(!X.isText(f))throw new Error("Cannot get the ".concat(a," point in the node at path [").concat(r,"] because it has no ").concat(a," text node."));return{path:u,offset:a==="end"?f.text.length:0}}if(y.isRange(r)){var[c,d]=y.edges(r);return a==="start"?c:d}return r};function Fo(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(function*(){var{at:r=t.selection,unit:n="offset",reverse:a=!1,voids:u=!1}=e;if(!r)return;var s=o.range(t,r),[i,f]=y.edges(s),c=a?f:i,d=!1,h="",v=0,D=0,C=0,E=[],w=function*(k){var I=E.some(j=>g.isAncestor(j,k));function*L(j){I||(yield j)}if(J.isElement(l)){if(!t.isSelectable(l)){if(E.push(k),a)return g.hasPrevious(k)&&(yield*L(o.end(t,g.previous(k)))),0;var W=g.next(k);return o.hasPath(t,W)&&(yield*L(o.start(t,W))),0}if(!u&&(t.isVoid(l)||t.isElementReadOnly(l)))return yield*L(o.start(t,k)),0;if(t.isInline(l))return 0;if(o.hasInlines(t,l)){var $=g.isAncestor(k,f.path)?f:o.end(t,k),K=g.isAncestor(k,i.path)?i:o.start(t,k);h=o.string(t,{anchor:K,focus:$},{voids:u}),d=!0}}if(X.isText(l)){var N=g.equals(k,c.path);for(N?(D=a?c.offset:l.text.length-c.offset,C=c.offset):(D=l.text.length,C=a?D:0),(N||d||n==="offset")&&(yield*L({path:k,offset:C}),d=!1);;){if(v===0){if(h==="")break;v=A(h,n,a),h=Kr(h,v,a)[1]}if(C=a?C-v:C+v,D=D-v,D<0){v=-D;break}v=0,yield*L({path:k,offset:C})}}},p;for(var[l,b]of o.nodes(t,{at:r,reverse:a,voids:u}))p=yield*w(b);function A(O,k,I){return k==="character"?Hr(O,I):k==="word"?Qs(O,I):k==="line"||k==="block"?O.length:1}})()}var yo=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:n="lowest",voids:a=!1}=r,{match:u,at:s=e.selection}=r;if(s){var i=o.before(e,s,{voids:a});if(i){var[,f]=o.first(e,[]),c=[i.path,f];if(g.isPath(s)&&s.length===0)throw new Error("Cannot get the previous node from the root node!");if(u==null)if(g.isPath(s)){var[d]=o.parent(e,s);u=v=>d.children.includes(v)}else u=()=>!0;var[h]=o.nodes(e,{reverse:!0,at:c,match:u,mode:n,voids:a});return h}}},xo=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:a="forward"}=n,u={current:r,affinity:a,unref(){var{current:i}=u,f=o.rangeRefs(e);return f.delete(u),u.current=null,i}},s=o.rangeRefs(e);return s.add(u),u},Oo=t=>{var e=hn.get(t);return e||(e=new Set,hn.set(t,e)),e},jo=(t,e,r)=>{if(y.isRange(e)&&!r)return e;var n=o.start(t,e),a=o.end(t,r||e);return{anchor:n,focus:a}};function zn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function So(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?zn(Object(r),!0).forEach(function(n){Ae(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zn(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Po=(t,e)=>{var{selection:r}=t;if(r){var n=(d,h)=>{if(!X.isText(d))return!1;var[v,D]=o.parent(t,h);return!t.isVoid(v)||t.markableVoid(v)},a=y.isExpanded(r),u=!1;if(!a){var[s,i]=o.node(t,r);if(s&&n(s,i)){var[f]=o.parent(t,i);u=f&&t.markableVoid(f)}}if(a||u)P.unsetNodes(t,e,{match:n,split:!0,voids:!0});else{var c=So({},o.marks(t)||{});delete c[e],t.marks=c,At.get(t)||t.onChange()}}},No=(t,e)=>{Ja.set(t,e)},To=(t,e)=>o.point(t,e,{edge:"start"}),ko=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:a=!1}=n,u=o.range(e,r),[s,i]=y.edges(u),f="";for(var[c,d]of o.nodes(e,{at:u,match:X.isText,voids:a})){var h=c.text;g.equals(d,i.path)&&(h=h.slice(0,i.offset)),g.equals(d,s.path)&&(h=h.slice(s.offset)),f+=h}return f},Ro=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:a=!1}=n,[u,s]=y.edges(r);if(u.offset!==0||s.offset!==0||y.isCollapsed(r)||g.hasPrevious(s.path))return r;var i=o.above(e,{at:s,match:C=>J.isElement(C)&&o.isBlock(e,C),voids:a}),f=i?i[1]:[],c=o.start(e,u),d={anchor:c,focus:s},h=!0;for(var[v,D]of o.nodes(e,{at:d,match:X.isText,reverse:!0,voids:a})){if(h){h=!1;continue}if(v.text!==""||g.isBefore(D,f)){s={path:D,offset:v.text.length};break}}return{anchor:u,focus:s}},Mo=(t,e)=>{var r=o.isNormalizing(t);o.setNormalizing(t,!1);try{e()}finally{o.setNormalizing(t,r)}o.normalize(t)},Io=(t,e,r)=>{var[n,a]=e;return J.isElement(n)&&o.isEmpty(t,n)||X.isText(n)&&n.text===""&&a[a.length-1]!==0},Lo=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};o.withoutNormalizing(e,()=>{var n,a,{reverse:u=!1,unit:s="character",distance:i=1,voids:f=!1}=r,{at:c=e.selection,hanging:d=!1}=r;if(c){var h=!1;if(y.isRange(c)&&y.isCollapsed(c)&&(h=!0,c=c.anchor),ue.isPoint(c)){var v=o.void(e,{at:c,mode:"highest"});if(!f&&v){var[,D]=v;c=D}else{var C={unit:s,distance:i},E=u?o.before(e,c,C)||o.start(e,[]):o.after(e,c,C)||o.end(e,[]);c={anchor:c,focus:E},d=!0}}if(g.isPath(c)){P.removeNodes(e,{at:c,voids:f});return}if(!y.isCollapsed(c)){if(!d){var[,w]=y.edges(c),p=o.end(e,[]);ue.equals(w,p)||(c=o.unhangRange(e,c,{voids:f}))}var[l,b]=y.edges(c),A=o.above(e,{match:Y=>J.isElement(Y)&&o.isBlock(e,Y),at:l,voids:f}),O=o.above(e,{match:Y=>J.isElement(Y)&&o.isBlock(e,Y),at:b,voids:f}),k=A&&O&&!g.equals(A[1],O[1]),I=g.equals(l.path,b.path),L=f?null:(n=o.void(e,{at:l,mode:"highest"}))!==null&&n!==void 0?n:o.elementReadOnly(e,{at:l,mode:"highest"}),W=f?null:(a=o.void(e,{at:b,mode:"highest"}))!==null&&a!==void 0?a:o.elementReadOnly(e,{at:b,mode:"highest"});if(L){var $=o.before(e,l);$&&A&&g.isAncestor(A[1],$.path)&&(l=$)}if(W){var K=o.after(e,b);K&&O&&g.isAncestor(O[1],K.path)&&(b=K)}var N=[],j;for(var T of o.nodes(e,{at:c,voids:f})){var[F,G]=T;j&&g.compare(G,j)===0||(!f&&J.isElement(F)&&(o.isVoid(e,F)||o.isElementReadOnly(e,F))||!g.isCommon(G,l.path)&&!g.isCommon(G,b.path))&&(N.push(T),j=G)}var V=Array.from(N,Y=>{var[,ve]=Y;return o.pathRef(e,ve)}),re=o.pointRef(e,l),q=o.pointRef(e,b),Z="";if(!I&&!L){var ne=re.current,[se]=o.leaf(e,ne),{path:U}=ne,{offset:ae}=l,De=se.text.slice(ae);De.length>0&&(e.apply({type:"remove_text",path:U,offset:ae,text:De}),Z=De)}if(V.reverse().map(Y=>Y.unref()).filter(Y=>Y!==null).forEach(Y=>P.removeNodes(e,{at:Y,voids:f})),!W){var pe=q.current,[Fe]=o.leaf(e,pe),{path:Pe}=pe,B=I?l.offset:0,R=Fe.text.slice(B,b.offset);R.length>0&&(e.apply({type:"remove_text",path:Pe,offset:B,text:R}),Z=R)}!I&&k&&q.current&&re.current&&P.mergeNodes(e,{at:q.current,hanging:!0,voids:f}),h&&u&&s==="character"&&Z.length>1&&Z.match(/[\u0980-\u09FF\u0E00-\u0E7F\u1000-\u109F\u0900-\u097F\u1780-\u17FF\u0D00-\u0D7F\u0B00-\u0B7F\u0A00-\u0A7F\u0B80-\u0BFF\u0C00-\u0C7F]+/)&&P.insertText(e,Z.slice(0,Z.length-i));var S=re.unref(),M=q.unref(),te=u?S||M:M||S;r.at==null&&te&&P.select(e,te)}}})},zo=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};o.withoutNormalizing(e,()=>{var{hanging:a=!1,voids:u=!1}=n,{at:s=qr(e),batchDirty:i=!0}=n;if(r.length){if(y.isRange(s))if(a||(s=o.unhangRange(e,s,{voids:u})),y.isCollapsed(s))s=s.anchor;else{var[,f]=y.edges(s);if(!u&&o.void(e,{at:f}))return;var c=o.pointRef(e,f);P.delete(e,{at:s}),s=c.unref()}else g.isPath(s)&&(s=o.start(e,s));if(!(!u&&o.void(e,{at:s}))){var d=o.above(e,{at:s,match:U=>J.isElement(U)&&o.isInline(e,U),mode:"highest",voids:u});if(d){var[,h]=d;if(o.isEnd(e,s,h)){var v=o.after(e,h);s=v}else if(o.isStart(e,s,h)){var D=o.before(e,h);s=D}}var C=o.above(e,{match:U=>J.isElement(U)&&o.isBlock(e,U),at:s,voids:u}),[,E]=C,w=o.isStart(e,s,E),p=o.isEnd(e,s,E),l=w&&p,[,b]=H.first({children:r},[]),[,A]=H.last({children:r},[]),O=U=>{var[ae,De]=U,pe=De.length===0;return pe?!1:l?!0:!(!w&&g.isAncestor(De,b)&&J.isElement(ae)&&!e.isVoid(ae)&&!e.isInline(ae)||!p&&g.isAncestor(De,A)&&J.isElement(ae)&&!e.isVoid(ae)&&!e.isInline(ae))},k=!0,I=[],L=[],W=[];for(var $ of H.nodes({children:r},{pass:O})){var[K,N]=$;k&&J.isElement(K)&&!e.isInline(K)&&!g.isAncestor(N,b)&&(k=!1),O($)&&(J.isElement(K)&&!e.isInline(K)?(k=!1,L.push(K)):k?I.push(K):W.push(K))}var[j]=o.nodes(e,{at:s,match:U=>X.isText(U)||o.isInline(e,U),mode:"highest",voids:u}),[,T]=j,F=o.isStart(e,s,T),G=o.isEnd(e,s,T),V=o.pathRef(e,p&&!W.length?g.next(E):E),re=o.pathRef(e,G?g.next(T):T),q=W.length>0;P.splitNodes(e,{at:s,match:U=>q?J.isElement(U)&&o.isBlock(e,U):X.isText(U)||o.isInline(e,U),mode:q?"lowest":"highest",always:q&&(!w||I.length>0)&&(!p||W.length>0),voids:u});var Z=o.pathRef(e,!F||F&&G?g.next(T):T);if(P.insertNodes(e,I,{at:Z.current,match:U=>X.isText(U)||o.isInline(e,U),mode:"highest",voids:u,batchDirty:i}),l&&!I.length&&L.length&&!W.length&&P.delete(e,{at:E,voids:u}),P.insertNodes(e,L,{at:V.current,match:U=>J.isElement(U)&&o.isBlock(e,U),mode:"lowest",voids:u,batchDirty:i}),P.insertNodes(e,W,{at:re.current,match:U=>X.isText(U)||o.isInline(e,U),mode:"highest",voids:u,batchDirty:i}),!n.at){var ne;if(W.length>0&&re.current?ne=g.previous(re.current):L.length>0&&V.current?ne=g.previous(V.current):Z.current&&(ne=g.previous(Z.current)),ne){var se=o.end(e,ne);P.select(e,se)}}Z.unref(),V.unref(),re.unref()}}})},$o=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{edge:n="anchor"}=r,{selection:a}=e;if(a){if(n==="anchor")P.select(e,a.anchor);else if(n==="focus")P.select(e,a.focus);else if(n==="start"){var[u]=y.edges(a);P.select(e,u)}else if(n==="end"){var[,s]=y.edges(a);P.select(e,s)}}else return},Wo=t=>{var{selection:e}=t;e&&t.apply({type:"set_selection",properties:e,newProperties:null})},qo=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{selection:n}=e,{distance:a=1,unit:u="character",reverse:s=!1}=r,{edge:i=null}=r;if(n){i==="start"&&(i=y.isBackward(n)?"focus":"anchor"),i==="end"&&(i=y.isBackward(n)?"anchor":"focus");var{anchor:f,focus:c}=n,d={distance:a,unit:u},h={};if(i==null||i==="anchor"){var v=s?o.before(e,f,d):o.after(e,f,d);v&&(h.anchor=v)}if(i==null||i==="focus"){var D=s?o.before(e,c,d):o.after(e,c,d);D&&(h.focus=D)}P.setSelection(e,h)}},Ho=(t,e)=>{var{selection:r}=t;if(e=o.range(t,e),r){P.setSelection(t,e);return}if(!y.isRange(e))throw new Error("When setting the selection and the current selection is `null` you must provide at least an `anchor` and `focus`, but you passed: ".concat(Be.stringify(e)));t.apply({type:"set_selection",properties:r,newProperties:e})};function $n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Wn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$n(Object(r),!0).forEach(function(n){Ae(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$n(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Ko=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{selection:a}=e,{edge:u="both"}=n;if(a){u==="start"&&(u=y.isBackward(a)?"focus":"anchor"),u==="end"&&(u=y.isBackward(a)?"anchor":"focus");var{anchor:s,focus:i}=a,f=u==="anchor"?s:i;P.setSelection(e,{[u==="anchor"?"anchor":"focus"]:Wn(Wn({},f),r)})}},Vo=(t,e)=>{var{selection:r}=t,n={},a={};if(r){for(var u in e)(u==="anchor"&&e.anchor!=null&&!ue.equals(e.anchor,r.anchor)||u==="focus"&&e.focus!=null&&!ue.equals(e.focus,r.focus)||u!=="anchor"&&u!=="focus"&&e[u]!==r[u])&&(n[u]=r[u],a[u]=e[u]);Object.keys(n).length>0&&t.apply({type:"set_selection",properties:n,newProperties:a})}},Uo=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};o.withoutNormalizing(e,()=>{var{hanging:a=!1,voids:u=!1,mode:s="lowest",batchDirty:i=!0}=n,{at:f,match:c,select:d}=n;if(H.isNode(r)&&(r=[r]),r.length!==0){var[h]=r;if(f||(f=qr(e),d!==!1&&(d=!0)),d==null&&(d=!1),y.isRange(f))if(a||(f=o.unhangRange(e,f,{voids:u})),y.isCollapsed(f))f=f.anchor;else{var[,v]=y.edges(f),D=o.pointRef(e,v);P.delete(e,{at:f}),f=D.unref()}if(ue.isPoint(f)){c==null&&(X.isText(h)?c=$=>X.isText($):e.isInline(h)?c=$=>X.isText($)||o.isInline(e,$):c=$=>J.isElement($)&&o.isBlock(e,$));var[C]=o.nodes(e,{at:f.path,match:c,mode:s,voids:u});if(C){var[,E]=C,w=o.pathRef(e,E),p=o.isEnd(e,f,E);P.splitNodes(e,{at:f,match:c,mode:s,voids:u});var l=w.unref();f=p?g.next(l):l}else return}var b=g.parent(f),A=f[f.length-1];if(!(!u&&o.void(e,{at:b}))){if(i){var O=[],k=g.levels(b);xi(e,()=>{var $=function(){var j=b.concat(A);A++;var T={type:"insert_node",path:j,node:K};e.apply(T),f=g.next(f),O.push(T),X.isText(K)?k.push(j):k.push(...Array.from(H.nodes(K),F=>{var[,G]=F;return j.concat(G)}))};for(var K of r)$()},()=>{Qa(e,k,$=>{var K=$;for(var N of O)if(g.operationCanTransformPath(N)&&(K=g.transform(K,N),!K))return null;return K})})}else for(var I of r){var L=b.concat(A);A++,e.apply({type:"insert_node",path:L,node:I}),f=g.next(f)}if(f=g.previous(f),d){var W=o.end(e,f);W&&P.select(e,W)}}}})},Go=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};o.withoutNormalizing(e,()=>{var{at:n=e.selection,mode:a="lowest",voids:u=!1}=r,{match:s}=r;if(s==null&&(s=g.isPath(n)?Bt(e,n):A=>J.isElement(A)&&o.isBlock(e,A)),!!n){var i=o.nodes(e,{at:n,match:s,mode:a,voids:u}),f=Array.from(i,A=>{var[,O]=A;return o.pathRef(e,O)});for(var c of f){var d=c.unref();if(d.length<2)throw new Error("Cannot lift node at a path [".concat(d,"] because it has a depth of less than `2`."));var h=o.node(e,g.parent(d)),[v,D]=h,C=d[d.length-1],{length:E}=v.children;if(E===1){var w=g.next(D);P.moveNodes(e,{at:d,to:w,voids:u}),P.removeNodes(e,{at:D,voids:u})}else if(C===0)P.moveNodes(e,{at:d,to:D,voids:u});else if(C===E-1){var p=g.next(D);P.moveNodes(e,{at:d,to:p,voids:u})}else{var l=g.next(d),b=g.next(D);P.splitNodes(e,{at:l,voids:u}),P.moveNodes(e,{at:d,to:b,voids:u})}}}})},Yo=["text"],Xo=["children"],_a=(t,e)=>{if(J.isElement(e)){var r=e;return o.isVoid(t,e)?!0:r.children.length===1?_a(t,r.children[0]):!1}else return!o.isEditor(e)},Jo=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};o.withoutNormalizing(e,()=>{var{match:n,at:a=e.selection}=r,{hanging:u=!1,voids:s=!1,mode:i="lowest"}=r;if(a){if(n==null)if(g.isPath(a)){var[f]=o.parent(e,a);n=$=>f.children.includes($)}else n=$=>J.isElement($)&&o.isBlock(e,$);if(!u&&y.isRange(a)&&(a=o.unhangRange(e,a,{voids:s})),y.isRange(a))if(y.isCollapsed(a))a=a.anchor;else{var[,c]=y.edges(a),d=o.pointRef(e,c);P.delete(e,{at:a}),a=d.unref(),r.at==null&&P.select(e,a)}var[h]=o.nodes(e,{at:a,match:n,voids:s,mode:i}),v=o.previous(e,{at:a,match:n,voids:s,mode:i});if(!(!h||!v)){var[D,C]=h,[E,w]=v;if(!(C.length===0||w.length===0)){var p=g.next(w),l=g.common(C,w),b=g.isSibling(C,w),A=Array.from(o.levels(e,{at:C}),$=>{var[K]=$;return K}).slice(l.length).slice(0,-1),O=o.above(e,{at:C,mode:"highest",match:$=>A.includes($)&&_a(e,$)}),k=O&&o.pathRef(e,O[1]),I,L;if(X.isText(D)&&X.isText(E)){var W=Ge(D,Yo);L=E.text.length,I=W}else if(J.isElement(D)&&J.isElement(E)){var W=Ge(D,Xo);L=E.children.length,I=W}else throw new Error("Cannot merge the node at path [".concat(C,"] with the previous sibling because it is not the same kind: ").concat(Be.stringify(D)," ").concat(Be.stringify(E)));b||P.moveNodes(e,{at:C,to:p,voids:s}),k&&P.removeNodes(e,{at:k.current,voids:s}),o.shouldMergeNodesRemovePrevNode(e,v,h)?P.removeNodes(e,{at:w,voids:s}):e.apply({type:"merge_node",path:p,position:L,properties:I}),k&&k.unref()}}}})},Zo=(t,e)=>{o.withoutNormalizing(t,()=>{var{to:r,at:n=t.selection,mode:a="lowest",voids:u=!1}=e,{match:s}=e;if(n){s==null&&(s=g.isPath(n)?Bt(t,n):D=>J.isElement(D)&&o.isBlock(t,D));var i=o.pathRef(t,r),f=o.nodes(t,{at:n,match:s,mode:a,voids:u}),c=Array.from(f,D=>{var[,C]=D;return o.pathRef(t,C)});for(var d of c){var h=d.unref(),v=i.current;h.length!==0&&t.apply({type:"move_node",path:h,newPath:v}),i.current&&g.isSibling(v,h)&&g.isAfter(v,h)&&(i.current=g.next(i.current))}i.unref()}})},Qo=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};o.withoutNormalizing(e,()=>{var{hanging:n=!1,voids:a=!1,mode:u="lowest"}=r,{at:s=e.selection,match:i}=r;if(s){i==null&&(i=g.isPath(s)?Bt(e,s):D=>J.isElement(D)&&o.isBlock(e,D)),!n&&y.isRange(s)&&(s=o.unhangRange(e,s,{voids:a}));var f=o.nodes(e,{at:s,match:i,mode:u,voids:a}),c=Array.from(f,D=>{var[,C]=D;return o.pathRef(e,C)});for(var d of c){var h=d.unref();if(h){var[v]=o.node(e,h);e.apply({type:"remove_node",path:h,node:v})}}}})},_o=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};o.withoutNormalizing(e,()=>{var{match:a,at:u=e.selection,compare:s,merge:i}=n,{hanging:f=!1,mode:c="lowest",split:d=!1,voids:h=!1}=n;if(u){if(a==null&&(a=g.isPath(u)?Bt(e,u):L=>J.isElement(L)&&o.isBlock(e,L)),!f&&y.isRange(u)&&(u=o.unhangRange(e,u,{voids:h})),d&&y.isRange(u)){if(y.isCollapsed(u)&&o.leaf(e,u.anchor)[0].text.length>0)return;var v=o.rangeRef(e,u,{affinity:"inward"}),[D,C]=y.edges(u),E=c==="lowest"?"lowest":"highest",w=o.isEnd(e,C,C.path);P.splitNodes(e,{at:C,match:a,mode:E,voids:h,always:!w});var p=o.isStart(e,D,D.path);P.splitNodes(e,{at:D,match:a,mode:E,voids:h,always:!p}),u=v.unref(),n.at==null&&P.select(e,u)}s||(s=(L,W)=>L!==W);for(var[l,b]of o.nodes(e,{at:u,match:a,mode:c,voids:h})){var A={},O={};if(b.length!==0){var k=!1;for(var I in r)I==="children"||I==="text"||s(r[I],l[I])&&(k=!0,l.hasOwnProperty(I)&&(A[I]=l[I]),i?r[I]!=null&&(O[I]=i(l[I],r[I])):r[I]!=null&&(O[I]=r[I]));k&&e.apply({type:"set_node",path:b,properties:A,newProperties:O})}}}})},el=(t,e)=>{if(y.isCollapsed(e))return e.anchor;var[,r]=y.edges(e),n=o.pointRef(t,r);return P.delete(t,{at:e}),n.unref()},tl=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};o.withoutNormalizing(e,()=>{var{mode:n="lowest",voids:a=!1}=r,{match:u,at:s=e.selection,height:i=0,always:f=!1}=r;if(u==null&&(u=q=>J.isElement(q)&&o.isBlock(e,q)),y.isRange(s)&&(s=el(e,s)),g.isPath(s)){var c=s,d=o.point(e,c),[h]=o.parent(e,c);u=q=>q===h,i=d.path.length-c.length+1,s=d,f=!0}if(s){var v=o.pointRef(e,s,{affinity:"backward"}),D;try{var[C]=o.nodes(e,{at:s,match:u,mode:n,voids:a});if(!C)return;var E=o.void(e,{at:s,mode:"highest"}),w=0;if(!a&&E){var[p,l]=E;if(J.isElement(p)&&e.isInline(p)){var b=o.after(e,l);if(!b){var A={text:""},O=g.next(l);P.insertNodes(e,A,{at:O,voids:a}),b=o.point(e,O)}s=b,f=!0}var k=s.path.length-l.length;i=k+1,f=!0}D=o.pointRef(e,s);var I=s.path.length-i,[,L]=C,W=s.path.slice(0,I),$=i===0?s.offset:s.path[I]+w;for(var[K,N]of o.levels(e,{at:W,reverse:!0,voids:a})){var j=!1;if(N.length<L.length||N.length===0||!a&&J.isElement(K)&&o.isVoid(e,K))break;var T=v.current,F=o.isEnd(e,T,N);if(f||!v||!o.isEdge(e,T,N)){j=!0;var G=H.extractProps(K);e.apply({type:"split_node",path:N,position:$,properties:G})}$=N[N.length-1]+(j||F?1:0)}if(r.at==null){var V=D.current||o.end(e,[]);P.select(e,V)}}finally{var re;v.unref(),(re=D)===null||re===void 0||re.unref()}}})},rl=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Array.isArray(r)||(r=[r]);var a={};for(var u of r)a[u]=null;P.setNodes(e,a,n)},nl=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};o.withoutNormalizing(e,()=>{var{mode:n="lowest",split:a=!1,voids:u=!1}=r,{at:s=e.selection,match:i}=r;if(s){i==null&&(i=g.isPath(s)?Bt(e,s):D=>J.isElement(D)&&o.isBlock(e,D)),g.isPath(s)&&(s=o.range(e,s));var f=y.isRange(s)?o.rangeRef(e,s):null,c=o.nodes(e,{at:s,match:i,mode:n,voids:u}),d=Array.from(c,D=>{var[,C]=D;return o.pathRef(e,C)}).reverse(),h=function(){var C=v.unref(),[E]=o.node(e,C),w=o.range(e,C);a&&f&&(w=y.intersection(f.current,w)),P.liftNodes(e,{at:w,match:p=>J.isAncestor(E)&&E.children.includes(p),voids:u})};for(var v of d)h();f&&f.unref()}})};function qn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Hn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?qn(Object(r),!0).forEach(function(n){Ae(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qn(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var al=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};o.withoutNormalizing(e,()=>{var{mode:a="lowest",split:u=!1,voids:s=!1}=n,{match:i,at:f=e.selection}=n;if(f){if(i==null&&(g.isPath(f)?i=Bt(e,f):e.isInline(r)?i=p=>J.isElement(p)&&o.isInline(e,p)||X.isText(p):i=p=>J.isElement(p)&&o.isBlock(e,p)),u&&y.isRange(f)){var[c,d]=y.edges(f),h=o.rangeRef(e,f,{affinity:"inward"}),v=p=>{var l=o.above(e,{at:p,match:b=>J.isElement(b)&&o.isBlock(e,b)});return l&&o.isEdge(e,p,l[1])};P.splitNodes(e,{at:d,match:i,voids:s,always:!v(d)}),P.splitNodes(e,{at:c,match:i,voids:s,always:!v(c)}),f=h.unref(),n.at==null&&P.select(e,f)}var D=Array.from(o.nodes(e,{at:f,match:e.isInline(r)?p=>J.isElement(p)&&o.isBlock(e,p):p=>o.isEditor(p),mode:"lowest",voids:s})),C=function(){var l=y.isRange(f)?y.intersection(f,o.range(e,w)):f;if(!l)return 0;var b=Array.from(o.nodes(e,{at:l,match:i,mode:a,voids:s}));if(b.length>0){var[A]=b,O=b[b.length-1],[,k]=A,[,I]=O;if(k.length===0&&I.length===0)return 0;var L=g.equals(k,I)?g.parent(k):g.common(k,I),W=o.range(e,k,I),$=o.node(e,L),[K]=$,N=L.length+1,j=g.next(I.slice(0,N)),T=Hn(Hn({},r),{},{children:[]});P.insertNodes(e,T,{at:j,voids:s}),P.moveNodes(e,{at:W,match:F=>J.isAncestor(K)&&K.children.includes(F),to:j.concat(0),voids:s})}},E;for(var[,w]of D)E=C()}})},ul=()=>{var t={children:[],operations:[],selection:null,marks:null,isElementReadOnly:()=>!1,isInline:()=>!1,isSelectable:()=>!0,isVoid:()=>!1,markableVoid:()=>!1,onChange:()=>{},apply:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return Oi(t,...n)},addMark:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return ki(t,...n)},deleteBackward:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return Ii(t,...n)},deleteForward:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return Li(t,...n)},deleteFragment:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return zi(t,...n)},getFragment:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return Si(t,...n)},insertBreak:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return Ji(t,...n)},insertSoftBreak:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return Qi(t,...n)},insertFragment:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return zo(t,...n)},insertNode:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return Zi(t,...n)},insertText:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return eo(t,...n)},normalizeNode:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return Pi(t,...n)},removeMark:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return Po(t,...n)},getDirtyPaths:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return ji(t,...n)},shouldNormalize:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return Ni(t,...n)},above:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return Ti(t,...n)},after:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return Ri(t,...n)},before:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return Mi(t,...n)},collapse:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return $o(t,...n)},delete:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return Lo(t,...n)},deselect:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return Wo(t,...n)},edges:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return $i(t,...n)},elementReadOnly:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return Wi(t,...n)},end:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return qi(t,...n)},first:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return Hi(t,...n)},fragment:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return Ki(t,...n)},getMarks:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return vo(t,...n)},hasBlocks:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return Ui(t,...n)},hasInlines:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return Gi(t,...n)},hasPath:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return Yi(t,...n)},hasTexts:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return Xi(t,...n)},insertNodes:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return Uo(t,...n)},isBlock:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return to(t,...n)},isEdge:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return ro(t,...n)},isEmpty:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return no(t,...n)},isEnd:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return ao(t,...n)},isNormalizing:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return uo(t,...n)},isStart:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return so(t,...n)},last:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return io(t,...n)},leaf:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return oo(t,...n)},levels:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return lo(t,...n)},liftNodes:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return Go(t,...n)},mergeNodes:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return Jo(t,...n)},move:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return qo(t,...n)},moveNodes:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return Zo(t,...n)},next:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return ho(t,...n)},node:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return go(t,...n)},nodes:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return Do(t,...n)},normalize:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return mo(t,...n)},parent:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return po(t,...n)},path:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return Eo(t,...n)},pathRef:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return Co(t,...n)},pathRefs:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return Bo(t,...n)},point:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return Ao(t,...n)},pointRef:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return bo(t,...n)},pointRefs:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return wo(t,...n)},positions:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return Fo(t,...n)},previous:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return yo(t,...n)},range:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return jo(t,...n)},rangeRef:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return xo(t,...n)},rangeRefs:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return Oo(t,...n)},removeNodes:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return Qo(t,...n)},select:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return Ho(t,...n)},setNodes:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return _o(t,...n)},setNormalizing:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return No(t,...n)},setPoint:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return Ko(t,...n)},setSelection:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return Vo(t,...n)},splitNodes:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return tl(t,...n)},start:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return To(t,...n)},string:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return ko(t,...n)},unhangRange:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return Ro(t,...n)},unsetNodes:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return rl(t,...n)},unwrapNodes:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return nl(t,...n)},void:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return Vi(t,...n)},withoutNormalizing:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return Mo(t,...n)},wrapNodes:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return al(t,...n)},shouldMergeNodesRemovePrevNode:function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return Io(t,...n)}};return t},sr,Kn;function sl(){if(Kn)return sr;Kn=1,sr=a;var t="---",e="A-Za-z--------",r=new RegExp("^[^"+e+"]*["+t+"]"),n=new RegExp("^[^"+t+"]*["+e+"]");function a(u){return u=String(u||""),r.test(u)?"rtl":n.test(u)?"ltr":"neutral"}return sr}var il=sl();const eu=rr(il);var ir,Vn;function Ur(){if(Vn)return ir;Vn=1;function t(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}return ir=t,ir}var or,Un;function ol(){if(Un)return or;Un=1;var t=typeof Mt=="object"&&Mt&&Mt.Object===Object&&Mt;return or=t,or}var lr,Gn;function tu(){if(Gn)return lr;Gn=1;var t=ol(),e=typeof self=="object"&&self&&self.Object===Object&&self,r=t||e||Function("return this")();return lr=r,lr}var cr,Yn;function ll(){if(Yn)return cr;Yn=1;var t=tu(),e=function(){return t.Date.now()};return cr=e,cr}var fr,Xn;function cl(){if(Xn)return fr;Xn=1;var t=/\s/;function e(r){for(var n=r.length;n--&&t.test(r.charAt(n)););return n}return fr=e,fr}var dr,Jn;function fl(){if(Jn)return dr;Jn=1;var t=cl(),e=/^\s+/;function r(n){return n&&n.slice(0,t(n)+1).replace(e,"")}return dr=r,dr}var vr,Zn;function ru(){if(Zn)return vr;Zn=1;var t=tu(),e=t.Symbol;return vr=e,vr}var hr,Qn;function dl(){if(Qn)return hr;Qn=1;var t=ru(),e=Object.prototype,r=e.hasOwnProperty,n=e.toString,a=t?t.toStringTag:void 0;function u(s){var i=r.call(s,a),f=s[a];try{s[a]=void 0;var c=!0}catch{}var d=n.call(s);return c&&(i?s[a]=f:delete s[a]),d}return hr=u,hr}var gr,_n;function vl(){if(_n)return gr;_n=1;var t=Object.prototype,e=t.toString;function r(n){return e.call(n)}return gr=r,gr}var Dr,ea;function hl(){if(ea)return Dr;ea=1;var t=ru(),e=dl(),r=vl(),n="[object Null]",a="[object Undefined]",u=t?t.toStringTag:void 0;function s(i){return i==null?i===void 0?a:n:u&&u in Object(i)?e(i):r(i)}return Dr=s,Dr}var mr,ta;function gl(){if(ta)return mr;ta=1;function t(e){return e!=null&&typeof e=="object"}return mr=t,mr}var pr,ra;function Dl(){if(ra)return pr;ra=1;var t=hl(),e=gl(),r="[object Symbol]";function n(a){return typeof a=="symbol"||e(a)&&t(a)==r}return pr=n,pr}var Cr,na;function ml(){if(na)return Cr;na=1;var t=fl(),e=Ur(),r=Dl(),n=NaN,a=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,s=/^0o[0-7]+$/i,i=parseInt;function f(c){if(typeof c=="number")return c;if(r(c))return n;if(e(c)){var d=typeof c.valueOf=="function"?c.valueOf():c;c=e(d)?d+"":d}if(typeof c!="string")return c===0?c:+c;c=t(c);var h=u.test(c);return h||s.test(c)?i(c.slice(2),h?2:8):a.test(c)?n:+c}return Cr=f,Cr}var Br,aa;function nu(){if(aa)return Br;aa=1;var t=Ur(),e=ll(),r=ml(),n="Expected a function",a=Math.max,u=Math.min;function s(i,f,c){var d,h,v,D,C,E,w=0,p=!1,l=!1,b=!0;if(typeof i!="function")throw new TypeError(n);f=r(f)||0,t(c)&&(p=!!c.leading,l="maxWait"in c,v=l?a(r(c.maxWait)||0,f):v,b="trailing"in c?!!c.trailing:b);function A(j){var T=d,F=h;return d=h=void 0,w=j,D=i.apply(F,T),D}function O(j){return w=j,C=setTimeout(L,f),p?A(j):D}function k(j){var T=j-E,F=j-w,G=f-T;return l?u(G,v-F):G}function I(j){var T=j-E,F=j-w;return E===void 0||T>=f||T<0||l&&F>=v}function L(){var j=e();if(I(j))return W(j);C=setTimeout(L,k(j))}function W(j){return C=void 0,b&&d?A(j):(d=h=void 0,D)}function $(){C!==void 0&&clearTimeout(C),w=0,d=E=h=C=void 0}function K(){return C===void 0?D:W(e())}function N(){var j=e(),T=I(j);if(d=arguments,h=this,E=j,T){if(C===void 0)return O(E);if(l)return clearTimeout(C),C=setTimeout(L,f),A(E)}return C===void 0&&(C=setTimeout(L,f)),D}return N.cancel=$,N.flush=K,N}return Br=s,Br}var pl=nu();const Cl=rr(pl);var Er,ua;function Bl(){if(ua)return Er;ua=1;var t=nu(),e=Ur(),r="Expected a function";function n(a,u,s){var i=!0,f=!0;if(typeof a!="function")throw new TypeError(r);return e(s)&&(i="leading"in s?!!s.leading:i,f="trailing"in s?!!s.trailing:f),t(a,u,{leading:i,maxWait:u,trailing:f})}return Er=n,Er}var El=Bl();const bl=rr(El),sa=t=>typeof t=="object"&&t!=null&&t.nodeType===1,ia=(t,e)=>(!e||t!=="hidden")&&t!=="visible"&&t!=="clip",zt=(t,e)=>{if(t.clientHeight<t.scrollHeight||t.clientWidth<t.scrollWidth){const r=getComputedStyle(t,null);return ia(r.overflowY,e)||ia(r.overflowX,e)||(n=>{const a=(u=>{if(!u.ownerDocument||!u.ownerDocument.defaultView)return null;try{return u.ownerDocument.defaultView.frameElement}catch{return null}})(n);return!!a&&(a.clientHeight<n.scrollHeight||a.clientWidth<n.scrollWidth)})(t)}return!1},$t=(t,e,r,n,a,u,s,i)=>u<t&&s>e||u>t&&s<e?0:u<=t&&i<=r||s>=e&&i>=r?u-t-n:s>e&&i<r||u<t&&i>r?s-e+a:0,wl=t=>{const e=t.parentElement;return e??(t.getRootNode().host||null)},oa=(t,e)=>{var r,n,a,u;if(typeof document>"u")return[];const{scrollMode:s,block:i,inline:f,boundary:c,skipOverflowHiddenElements:d}=e,h=typeof c=="function"?c:G=>G!==c;if(!sa(t))throw new TypeError("Invalid target");const v=document.scrollingElement||document.documentElement,D=[];let C=t;for(;sa(C)&&h(C);){if(C=wl(C),C===v){D.push(C);break}C!=null&&C===document.body&&zt(C)&&!zt(document.documentElement)||C!=null&&zt(C,d)&&D.push(C)}const E=(n=(r=window.visualViewport)==null?void 0:r.width)!=null?n:innerWidth,w=(u=(a=window.visualViewport)==null?void 0:a.height)!=null?u:innerHeight,{scrollX:p,scrollY:l}=window,{height:b,width:A,top:O,right:k,bottom:I,left:L}=t.getBoundingClientRect(),{top:W,right:$,bottom:K,left:N}=(G=>{const V=window.getComputedStyle(G);return{top:parseFloat(V.scrollMarginTop)||0,right:parseFloat(V.scrollMarginRight)||0,bottom:parseFloat(V.scrollMarginBottom)||0,left:parseFloat(V.scrollMarginLeft)||0}})(t);let j=i==="start"||i==="nearest"?O-W:i==="end"?I+K:O+b/2-W+K,T=f==="center"?L+A/2-N+$:f==="end"?k+$:L-N;const F=[];for(let G=0;G<D.length;G++){const V=D[G],{height:re,width:q,top:Z,right:ne,bottom:se,left:U}=V.getBoundingClientRect();if(s==="if-needed"&&O>=0&&L>=0&&I<=w&&k<=E&&(V===v&&!zt(V)||O>=Z&&I<=se&&L>=U&&k<=ne))return F;const ae=getComputedStyle(V),De=parseInt(ae.borderLeftWidth,10),pe=parseInt(ae.borderTopWidth,10),Fe=parseInt(ae.borderRightWidth,10),Pe=parseInt(ae.borderBottomWidth,10);let B=0,R=0;const S="offsetWidth"in V?V.offsetWidth-V.clientWidth-De-Fe:0,M="offsetHeight"in V?V.offsetHeight-V.clientHeight-pe-Pe:0,te="offsetWidth"in V?V.offsetWidth===0?0:q/V.offsetWidth:0,Y="offsetHeight"in V?V.offsetHeight===0?0:re/V.offsetHeight:0;if(v===V)B=i==="start"?j:i==="end"?j-w:i==="nearest"?$t(l,l+w,w,pe,Pe,l+j,l+j+b,b):j-w/2,R=f==="start"?T:f==="center"?T-E/2:f==="end"?T-E:$t(p,p+E,E,De,Fe,p+T,p+T+A,A),B=Math.max(0,B+l),R=Math.max(0,R+p);else{B=i==="start"?j-Z-pe:i==="end"?j-se+Pe+M:i==="nearest"?$t(Z,se,re,pe,Pe+M,j,j+b,b):j-(Z+re/2)+M/2,R=f==="start"?T-U-De:f==="center"?T-(U+q/2)+S/2:f==="end"?T-ne+Fe+S:$t(U,ne,q,De,Fe+S,T,T+A,A);const{scrollLeft:ve,scrollTop:le}=V;B=Y===0?0:Math.max(0,Math.min(le+B/Y,V.scrollHeight-re/Y+M)),R=te===0?0:Math.max(0,Math.min(ve+R/te,V.scrollWidth-q/te+S)),j+=le-B,T+=ve-R}F.push({el:V,top:B,left:R})}return F},Al=t=>t===!1?{block:"end",inline:"nearest"}:(e=>e===Object(e)&&Object.keys(e).length!==0)(t)?t:{block:"start",inline:"nearest"};function Fl(t,e){if(!t.isConnected||!(a=>{let u=a;for(;u&&u.parentNode;){if(u.parentNode===document)return!0;u=u.parentNode instanceof ShadowRoot?u.parentNode.host:u.parentNode}return!1})(t))return;const r=(a=>{const u=window.getComputedStyle(a);return{top:parseFloat(u.scrollMarginTop)||0,right:parseFloat(u.scrollMarginRight)||0,bottom:parseFloat(u.scrollMarginBottom)||0,left:parseFloat(u.scrollMarginLeft)||0}})(t);if((a=>typeof a=="object"&&typeof a.behavior=="function")(e))return e.behavior(oa(t,e));const n=typeof e=="boolean"||e==null?void 0:e.behavior;for(const{el:a,top:u,left:s}of oa(t,Al(e))){const i=u-r.top+r.bottom,f=s-r.left+r.right;a.scroll({top:i,left:f,behavior:n})}}var Re={},la;function yl(){if(la)return Re;la=1,Object.defineProperty(Re,"__esModule",{value:!0});for(var t=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),e={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},r={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:t?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},n={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},a=1;a<20;a++)n["f"+a]=111+a;function u(v,D,C){D&&!("byKey"in D)&&(C=D,D=null),Array.isArray(v)||(v=[v]);var E=v.map(function(l){return f(l,D)}),w=function(b){return E.some(function(A){return c(A,b)})},p=C==null?w:w(C);return p}function s(v,D){return u(v,D)}function i(v,D){return u(v,{byKey:!0},D)}function f(v,D){var C=D&&D.byKey,E={};v=v.replace("++","+add");var w=v.split("+"),p=w.length;for(var l in e)E[e[l]]=!1;var b=!0,A=!1,O=void 0;try{for(var k=w[Symbol.iterator](),I;!(b=(I=k.next()).done);b=!0){var L=I.value,W=L.endsWith("?")&&L.length>1;W&&(L=L.slice(0,-1));var $=h(L),K=e[$];if(L.length>1&&!K&&!r[L]&&!n[$])throw new TypeError('Unknown modifier: "'+L+'"');(p===1||!K)&&(C?E.key=$:E.which=d(L)),K&&(E[K]=W?null:!0)}}catch(N){A=!0,O=N}finally{try{!b&&k.return&&k.return()}finally{if(A)throw O}}return E}function c(v,D){for(var C in v){var E=v[C],w=void 0;if(E!=null&&(C==="key"&&D.key!=null?w=D.key.toLowerCase():C==="which"?w=E===91&&D.which===93?91:D.which:w=D[C],!(w==null&&E===!1)&&w!==E))return!1}return!0}function d(v){v=h(v);var D=n[v]||v.toUpperCase().charCodeAt(0);return D}function h(v){return v=v.toLowerCase(),v=r[v]||v,v}return Re.default=u,Re.isHotkey=u,Re.isCodeHotkey=s,Re.isKeyHotkey=i,Re.parseHotkey=f,Re.compareHotkey=c,Re.toKeyCode=d,Re.toKeyName=h,Re}var br=yl(),au=globalThis.Node,xl=globalThis.Text,Gr=t=>t&&t.ownerDocument&&t.ownerDocument.defaultView||null,Ol=t=>rt(t)&&t.nodeType===8,Te=t=>rt(t)&&t.nodeType===1,rt=t=>{var e=Gr(t);return!!e&&t instanceof e.Node},kr=t=>{var e=t&&t.anchorNode&&Gr(t.anchorNode);return!!e&&t instanceof e.Selection},uu=t=>rt(t)&&t.nodeType===3,jl=t=>t.clipboardData&&t.clipboardData.getData("text/plain")!==""&&t.clipboardData.types.length===1,Sl=t=>{var[e,r]=t;if(Te(e)&&e.childNodes.length){var n=r===e.childNodes.length,a=n?r-1:r;for([e,a]=su(e,a,n?"backward":"forward"),n=a<r;Te(e)&&e.childNodes.length;){var u=n?e.childNodes.length-1:0;e=Nl(e,u,n?"backward":"forward")}r=n&&e.textContent!=null?e.textContent.length:0}return[e,r]},Pl=t=>{for(var e=t&&t.parentNode;e;){if(e.toString()==="[object ShadowRoot]")return!0;e=e.parentNode}return!1},su=(t,e,r)=>{for(var{childNodes:n}=t,a=n[e],u=e,s=!1,i=!1;(Ol(a)||Te(a)&&a.childNodes.length===0||Te(a)&&a.getAttribute("contenteditable")==="false")&&!(s&&i);){if(u>=n.length){s=!0,u=e-1,r="backward";continue}if(u<0){i=!0,u=e+1,r="forward";continue}a=n[u],e=u,u+=r==="forward"?1:-1}return[a,e]},Nl=(t,e,r)=>{var[n]=su(t,e,r);return n},iu=t=>{var e="";if(uu(t)&&t.nodeValue)return t.nodeValue;if(Te(t)){for(var r of Array.from(t.childNodes))e+=iu(r);var n=getComputedStyle(t).getPropertyValue("display");(n==="block"||n==="list"||t.tagName==="BR")&&(e+=`
`)}return e},Tl=/data-slate-fragment="(.+?)"/m,kl=t=>{var e=t.getData("text/html"),[,r]=e.match(Tl)||[];return r},Ft=t=>t.getSelection!=null?t.getSelection():document.getSelection(),Yr=(t,e,r)=>{var{target:n}=e;if(Te(n)&&n.matches('[contentEditable="false"]'))return!1;var{document:a}=ee.getWindow(t);if(ot(a,n))return ee.hasDOMNode(t,n,{editable:!0});var u=r.find(s=>{var{addedNodes:i,removedNodes:f}=s;for(var c of i)if(c===n||ot(c,n))return!0;for(var d of f)if(d===n||ot(d,n))return!0});return!u||u===e?!1:Yr(t,u,r)},Rl=()=>{for(var t=document.activeElement;(e=t)!==null&&e!==void 0&&e.shadowRoot&&(r=t.shadowRoot)!==null&&r!==void 0&&r.activeElement;){var e,r,n;t=(n=t)===null||n===void 0||(n=n.shadowRoot)===null||n===void 0?void 0:n.activeElement}return t},ca=(t,e)=>!!(t.compareDocumentPosition(e)&au.DOCUMENT_POSITION_PRECEDING),Ml=(t,e)=>!!(t.compareDocumentPosition(e)&au.DOCUMENT_POSITION_FOLLOWING),fa=(t,e)=>{if(!t)return null;for(var r=t;r;){if(r.matches&&r.matches(e))return r;if(r.parentElement)r=r.parentElement;else if(r.parentNode&&"host"in r.parentNode)r=r.parentNode.host;else return null}return null},ot=(t,e)=>{if(!t||!e)return!1;if(t.contains(e))return!0;for(var r=e;r;){if(r===t)return!0;if(r.parentNode)"host"in r.parentNode?r=r.parentNode.host:r=r.parentNode;else return!1}return!1},wr,Ar,Il=typeof navigator<"u"&&typeof window<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,da=typeof navigator<"u"&&/Mac OS X/.test(navigator.userAgent),Oe=typeof navigator<"u"&&/Android/.test(navigator.userAgent),gt=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),st=typeof navigator<"u"&&/AppleWebKit(?!.*Chrome)/i.test(navigator.userAgent),Ll=typeof navigator<"u"&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])(?:\.)/i.test(navigator.userAgent),Xr=typeof navigator<"u"&&/Chrome/i.test(navigator.userAgent),ou=typeof navigator<"u"&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])(?:\.)/i.test(navigator.userAgent),zl=Oe&&typeof navigator<"u"&&/Chrome?\/(?:[0-5]?\d)(?:\.)/i.test(navigator.userAgent),$l=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])(?:\.)).*/i.test(navigator.userAgent),Wl=typeof navigator<"u"&&/.*UCBrowser/.test(navigator.userAgent),ql=typeof navigator<"u"&&/.*Wechat/.test(navigator.userAgent)&&!/.*MacWechat/.test(navigator.userAgent)&&(!Xr||ou),Yt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&/Version\/(\d+)/.test(navigator.userAgent)&&((wr=navigator.userAgent.match(/Version\/(\d+)/))!==null&&wr!==void 0&&wr[1]&&parseInt((Ar=navigator.userAgent.match(/Version\/(\d+)/))===null||Ar===void 0?void 0:Ar[1],10)<17);var Ze=(!ou||!zl)&&!Ll&&typeof globalThis<"u"&&globalThis.InputEvent&&typeof globalThis.InputEvent.prototype.getTargetRanges=="function";function Nt(t){"@babel/helpers - typeof";return Nt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nt(t)}function Hl(t,e){if(Nt(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Nt(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Kl(t){var e=Hl(t,"string");return Nt(e)==="symbol"?e:String(e)}function Jr(t,e,r){return e=Kl(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Vl=0;class lu{constructor(){Jr(this,"id",void 0),this.id="".concat(Vl++)}}var mt=new WeakMap,Dt=new WeakMap,yt=new WeakMap,cu=new WeakMap,xt=new WeakMap,Rr=new WeakMap,Tt=new WeakMap,lt=new WeakMap,er=new WeakMap,nr=new WeakMap,Mr=new WeakMap,tt=new WeakMap,it=new WeakMap,Ot=new WeakMap,Ir=new WeakMap,Zr=new WeakMap,Me=new WeakMap,Ue=new WeakMap,Ne=new WeakMap,_e=new WeakMap,Ve=new WeakMap,fu=new WeakMap,Ct=Symbol("placeholder"),du=Symbol("mark-placeholder"),ee={androidPendingDiffs:t=>Ne.get(t),androidScheduleFlush:t=>{var e;(e=Zr.get(t))===null||e===void 0||e()},blur:t=>{var e=ee.toDOMNode(t,t),r=ee.findDocumentOrShadowRoot(t);tt.set(t,!1),r.activeElement===e&&e.blur()},deselect:t=>{var{selection:e}=t,r=ee.findDocumentOrShadowRoot(t),n=Ft(r);n&&n.rangeCount>0&&n.removeAllRanges(),e&&P.deselect(t)},findDocumentOrShadowRoot:t=>{var e=ee.toDOMNode(t,t),r=e.getRootNode();return r instanceof Document||r instanceof ShadowRoot?r:e.ownerDocument},findEventRange:(t,e)=>{"nativeEvent"in e&&(e=e.nativeEvent);var{clientX:r,clientY:n,target:a}=e;if(r==null||n==null)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(e));var u=ee.toSlateNode(t,e.target),s=ee.findPath(t,u);if(J.isElement(u)&&o.isVoid(t,u)){var i=a.getBoundingClientRect(),f=t.isInline(u)?r-i.left<i.left+i.width-r:n-i.top<i.top+i.height-n,c=o.point(t,s,{edge:f?"start":"end"}),d=f?o.before(t,c):o.after(t,c);if(d){var h=o.range(t,d);return h}}var v,{document:D}=ee.getWindow(t);if(D.caretRangeFromPoint)v=D.caretRangeFromPoint(r,n);else{var C=D.caretPositionFromPoint(r,n);C&&(v=D.createRange(),v.setStart(C.offsetNode,C.offset),v.setEnd(C.offsetNode,C.offset))}if(!v)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(e));var E=ee.toSlateRange(t,v,{exactMatch:!1,suppressThrow:!1});return E},findKey:(t,e)=>{var r=er.get(e);return r||(r=new lu,er.set(e,r)),r},findPath:(t,e)=>{for(var r=[],n=e;;){var a=yt.get(n);if(a==null){if(o.isEditor(n))return r;break}var u=Dt.get(n);if(u==null)break;r.unshift(u),n=a}throw new Error("Unable to find the path for Slate node: ".concat(Be.stringify(e)))},focus:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{retries:5};if(!tt.get(e)&&xt.get(e)){if(r.retries<=0)throw new Error("Could not set focus, editor seems stuck with pending operations");if(e.operations.length>0){setTimeout(()=>{ee.focus(e,{retries:r.retries-1})},10);return}var n=ee.toDOMNode(e,e),a=ee.findDocumentOrShadowRoot(e);if(a.activeElement!==n){if(e.selection&&a instanceof Document){var u=Ft(a),s=ee.toDOMRange(e,e.selection);u?.removeAllRanges(),u?.addRange(s)}e.selection||P.select(e,o.start(e,[])),tt.set(e,!0),n.focus({preventScroll:!0})}}},getWindow:t=>{var e=cu.get(t);if(!e)throw new Error("Unable to find a host window element for this editor");return e},hasDOMNode:function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{editable:a=!1}=n,u=ee.toDOMNode(e,e),s;try{s=Te(r)?r:r.parentElement}catch(i){if(i instanceof Error&&!i.message.includes('Permission denied to access property "nodeType"'))throw i}return s?fa(s,"[data-slate-editor]")===u&&(!a||s.isContentEditable?!0:typeof s.isContentEditable=="boolean"&&fa(s,'[contenteditable="false"]')===u||!!s.getAttribute("data-slate-zero-width")):!1},hasEditableTarget:(t,e)=>rt(e)&&ee.hasDOMNode(t,e,{editable:!0}),hasRange:(t,e)=>{var{anchor:r,focus:n}=e;return o.hasPath(t,r.path)&&o.hasPath(t,n.path)},hasSelectableTarget:(t,e)=>ee.hasEditableTarget(t,e)||ee.isTargetInsideNonReadonlyVoid(t,e),hasTarget:(t,e)=>rt(e)&&ee.hasDOMNode(t,e),insertData:(t,e)=>{t.insertData(e)},insertFragmentData:(t,e)=>t.insertFragmentData(e),insertTextData:(t,e)=>t.insertTextData(e),isComposing:t=>!!it.get(t),isFocused:t=>!!tt.get(t),isReadOnly:t=>!!Mr.get(t),isTargetInsideNonReadonlyVoid:(t,e)=>{if(Mr.get(t))return!1;var r=ee.hasTarget(t,e)&&ee.toSlateNode(t,e);return J.isElement(r)&&o.isVoid(t,r)},setFragmentData:(t,e,r)=>t.setFragmentData(e,r),toDOMNode:(t,e)=>{var r=nr.get(t),n=o.isEditor(e)?xt.get(t):r?.get(ee.findKey(t,e));if(!n)throw new Error("Cannot resolve a DOM node from Slate node: ".concat(Be.stringify(e)));return n},toDOMPoint:(t,e)=>{var[r]=o.node(t,e.path),n=ee.toDOMNode(t,r),a;o.void(t,{at:e})&&(e={path:e.path,offset:0});for(var u="[data-slate-string], [data-slate-zero-width]",s=Array.from(n.querySelectorAll(u)),i=0,f=0;f<s.length;f++){var c=s[f],d=c.childNodes[0];if(!(d==null||d.textContent==null)){var{length:h}=d.textContent,v=c.getAttribute("data-slate-length"),D=v==null?h:parseInt(v,10),C=i+D,E=s[f+1];if(e.offset===C&&E!==null&&E!==void 0&&E.hasAttribute("data-slate-mark-placeholder")){var w,p=E.childNodes[0];a=[p instanceof xl?p:E,(w=E.textContent)!==null&&w!==void 0&&w.startsWith("\uFEFF")?1:0];break}if(e.offset<=C){var l=Math.min(h,Math.max(0,e.offset-i));a=[d,l];break}i=C}}if(!a)throw new Error("Cannot resolve a DOM point from Slate point: ".concat(Be.stringify(e)));return a},toDOMRange:(t,e)=>{var{anchor:r,focus:n}=e,a=y.isBackward(e),u=ee.toDOMPoint(t,r),s=y.isCollapsed(e)?u:ee.toDOMPoint(t,n),i=ee.getWindow(t),f=i.document.createRange(),[c,d]=a?s:u,[h,v]=a?u:s,D=Te(c)?c:c.parentElement,C=!!D.getAttribute("data-slate-zero-width"),E=Te(h)?h:h.parentElement,w=!!E.getAttribute("data-slate-zero-width");return f.setStart(c,C?1:d),f.setEnd(h,w?1:v),f},toSlateNode:(t,e)=>{var r=Te(e)?e:e.parentElement;r&&!r.hasAttribute("data-slate-node")&&(r=r.closest("[data-slate-node]"));var n=r?Tt.get(r):null;if(!n)throw new Error("Cannot resolve a Slate node from DOM node: ".concat(r));return n},toSlatePoint:(t,e,r)=>{var{exactMatch:n,suppressThrow:a,searchDirection:u}=r,[s,i]=n?e:Sl(e),f=s.parentNode,c=null,d=0;if(f){var h,v,D=ee.toDOMNode(t,t),C=f.closest('[data-slate-void="true"]'),E=C&&ot(D,C)?C:null,w=f.closest('[contenteditable="false"]'),p=w&&ot(D,w)?w:null,l=f.closest("[data-slate-leaf]"),b=null;if(l){if(c=l.closest('[data-slate-node="text"]'),c){var A=ee.getWindow(t),O=A.document.createRange();O.setStart(c,0),O.setEnd(s,i);var k=O.cloneContents(),I=[...Array.prototype.slice.call(k.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(k.querySelectorAll("[contenteditable=false]"))];I.forEach(U=>{if(Oe&&!n&&U.hasAttribute("data-slate-zero-width")&&U.textContent.length>0&&U.textContext!=="\uFEFF"){U.textContent.startsWith("\uFEFF")&&(U.textContent=U.textContent.slice(1));return}U.parentNode.removeChild(U)}),d=k.textContent.length,b=c}}else if(E){for(var L=E.querySelectorAll("[data-slate-leaf]"),W=0;W<L.length;W++){var $=L[W];if(ee.hasDOMNode(t,$)){l=$;break}}l?(c=l.closest('[data-slate-node="text"]'),b=l,d=b.textContent.length,b.querySelectorAll("[data-slate-zero-width]").forEach(U=>{d-=U.textContent.length})):d=1}else if(p){var K=U=>U?U.querySelectorAll("[data-slate-leaf]:not(:scope [data-slate-editor] [data-slate-leaf])"):[],N=p.closest('[data-slate-node="element"]');if(u==="backward"||!u){var j,T=[...K(N?.previousElementSibling),...K(N)];l=(j=T.findLast(U=>ca(p,U)))!==null&&j!==void 0?j:null}if(u==="forward"||!u){var F,G=[...K(N),...K(N?.nextElementSibling)];l=(F=G.find(U=>Ml(p,U)))!==null&&F!==void 0?F:null}l&&(c=l.closest('[data-slate-node="text"]'),b=l,u==="forward"?d=0:(d=b.textContent.length,b.querySelectorAll("[data-slate-zero-width]").forEach(U=>{d-=U.textContent.length})))}b&&d===b.textContent.length&&Oe&&b.getAttribute("data-slate-zero-width")==="z"&&(h=b.textContent)!==null&&h!==void 0&&h.startsWith("\uFEFF")&&(f.hasAttribute("data-slate-zero-width")||gt&&(v=b.textContent)!==null&&v!==void 0&&v.endsWith(`

`))&&d--}if(Oe&&!c&&!n){var V=f.hasAttribute("data-slate-node")?f:f.closest("[data-slate-node]");if(V&&ee.hasDOMNode(t,V,{editable:!0})){var re=ee.toSlateNode(t,V),{path:q,offset:Z}=o.start(t,ee.findPath(t,re));return V.querySelector("[data-slate-leaf]")||(Z=i),{path:q,offset:Z}}}if(!c){if(a)return null;throw new Error("Cannot resolve a Slate point from DOM point: ".concat(e))}var ne=ee.toSlateNode(t,c),se=ee.findPath(t,ne);return{path:se,offset:d}},toSlateRange:(t,e,r)=>{var n,{exactMatch:a,suppressThrow:u}=r,s=kr(e)?e.anchorNode:e.startContainer,i,f,c,d,h;if(s)if(kr(e)){if(gt&&e.rangeCount>1){c=e.focusNode;var v=e.getRangeAt(0),D=e.getRangeAt(e.rangeCount-1);if(c instanceof HTMLTableRowElement&&v.startContainer instanceof HTMLTableRowElement&&D.startContainer instanceof HTMLTableRowElement){let k=function(I){return I.childElementCount>0?k(I.children[0]):I};var C=v.startContainer,E=D.startContainer,w=k(C.children[v.startOffset]),p=k(E.children[D.startOffset]);d=0,p.childNodes.length>0?i=p.childNodes[0]:i=p,w.childNodes.length>0?c=w.childNodes[0]:c=w,p instanceof HTMLElement?f=p.innerHTML.length:f=0}else v.startContainer===c?(i=D.endContainer,f=D.endOffset,d=v.startOffset):(i=v.startContainer,f=v.endOffset,d=D.startOffset)}else i=e.anchorNode,f=e.anchorOffset,c=e.focusNode,d=e.focusOffset;Xr&&Pl(i)||gt?h=e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset:h=e.isCollapsed}else i=e.startContainer,f=e.startOffset,c=e.endContainer,d=e.endOffset,h=e.collapsed;if(i==null||c==null||f==null||d==null)throw new Error("Cannot resolve a Slate range from DOM range: ".concat(e));gt&&(n=c.textContent)!==null&&n!==void 0&&n.endsWith(`

`)&&d===c.textContent.length&&d--;var l=ee.toSlatePoint(t,[i,f],{exactMatch:a,suppressThrow:u});if(!l)return null;var b=ca(i,c)||i===c&&d<f,A=h?l:ee.toSlatePoint(t,[c,d],{exactMatch:a,suppressThrow:u,searchDirection:b?"forward":"backward"});if(!A)return null;var O={anchor:l,focus:A};return y.isExpanded(O)&&y.isForward(O)&&Te(c)&&o.void(t,{at:O.focus,mode:"highest"})&&(O=o.unhangRange(t,O,{voids:!0})),O}};function Ul(t,e){var{path:r,diff:n}=e;if(!o.hasPath(t,r))return!1;var a=H.get(t,r);if(!X.isText(a))return!1;if(n.start!==a.text.length||n.text.length===0)return a.text.slice(n.start,n.start+n.text.length)===n.text;var u=g.next(r);if(!o.hasPath(t,u))return!1;var s=H.get(t,u);return X.isText(s)&&s.text.startsWith(n.text)}function vu(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return r.reduce((a,u)=>a.slice(0,u.start)+u.text+a.slice(u.end),t)}function Gl(t,e){for(var r=Math.min(t.length,e.length),n=0;n<r;n++)if(t.charAt(n)!==e.charAt(n))return n;return r}function Yl(t,e,r){for(var n=Math.min(t.length,e.length,r),a=0;a<n;a++)if(t.charAt(t.length-a-1)!==e.charAt(e.length-a-1))return a;return n}function hu(t,e){var{start:r,end:n,text:a}=e,u=t.slice(r,n),s=Gl(u,a),i=Math.min(u.length-s,a.length-s),f=Yl(u,a,i),c={start:r+s,end:n-f,text:a.slice(s,a.length-f)};return c.start===c.end&&c.text.length===0?null:c}function Xl(t,e,r){var n=Math.min(e.start,r.start),a=Math.max(0,Math.min(e.start+e.text.length,r.end)-r.start),u=vu(t,e,r),s=Math.max(r.start+r.text.length,e.start+e.text.length+(e.start+e.text.length>r.start?r.text.length:0)-a),i=u.slice(n,s),f=Math.max(e.end,r.end-e.text.length+(e.end-e.start));return hu(t,{start:n,end:f,text:i})}function Jl(t){var{path:e,diff:r}=t;return{anchor:{path:e,offset:r.start},focus:{path:e,offset:r.end}}}function Lr(t,e){var{path:r,offset:n}=e;if(!o.hasPath(t,r))return null;var a=H.get(t,r);if(!X.isText(a))return null;var u=o.above(t,{match:i=>J.isElement(i)&&o.isBlock(t,i),at:r});if(!u)return null;for(;n>a.text.length;){var s=o.next(t,{at:r,match:X.isText});if(!s||!g.isDescendant(s[1],u[1]))return null;n-=a.text.length,a=s[0],r=s[1]}return{path:r,offset:n}}function va(t,e){var r=Lr(t,e.anchor);if(!r)return null;if(y.isCollapsed(e))return{anchor:r,focus:r};var n=Lr(t,e.focus);return n?{anchor:r,focus:n}:null}function zr(t,e,r){var n=Ne.get(t),a=n?.find(d=>{var{path:h}=d;return g.equals(h,e.path)});if(!a||e.offset<=a.diff.start)return ue.transform(e,r,{affinity:"backward"});var{diff:u}=a;if(e.offset<=u.start+u.text.length){var s={path:e.path,offset:u.start},i=ue.transform(s,r,{affinity:"backward"});return i?{path:i.path,offset:i.offset+e.offset-u.start}:null}var f={path:e.path,offset:e.offset-u.text.length+u.end-u.start},c=ue.transform(f,r,{affinity:"backward"});return c?r.type==="split_node"&&g.equals(r.path,e.path)&&f.offset<r.position&&u.start<r.position?c:{path:c.path,offset:c.offset+u.text.length-u.end+u.start}:null}function ha(t,e,r){var n=zr(t,e.anchor,r);if(!n)return null;if(y.isCollapsed(e))return{anchor:n,focus:n};var a=zr(t,e.focus,r);return a?{anchor:n,focus:a}:null}function Zl(t,e){var{path:r,diff:n,id:a}=t;switch(e.type){case"insert_text":return!g.equals(e.path,r)||e.offset>=n.end?t:e.offset<=n.start?{diff:{start:e.text.length+n.start,end:e.text.length+n.end,text:n.text},id:a,path:r}:{diff:{start:n.start,end:n.end+e.text.length,text:n.text},id:a,path:r};case"remove_text":return!g.equals(e.path,r)||e.offset>=n.end?t:e.offset+e.text.length<=n.start?{diff:{start:n.start-e.text.length,end:n.end-e.text.length,text:n.text},id:a,path:r}:{diff:{start:n.start,end:n.end-e.text.length,text:n.text},id:a,path:r};case"split_node":return!g.equals(e.path,r)||e.position>=n.end?{diff:n,id:a,path:g.transform(r,e,{affinity:"backward"})}:e.position>n.start?{diff:{start:n.start,end:Math.min(e.position,n.end),text:n.text},id:a,path:r}:{diff:{start:n.start-e.position,end:n.end-e.position,text:n.text},id:a,path:g.transform(r,e,{affinity:"forward"})};case"merge_node":return g.equals(e.path,r)?{diff:{start:n.start+e.position,end:n.end+e.position,text:n.text},id:a,path:g.transform(r,e)}:{diff:n,id:a,path:g.transform(r,e)}}var u=g.transform(r,e);return u?{diff:n,path:u,id:a}:null}var ga=(t,e)=>{var r=(e.top+e.bottom)/2;return t.top<=r&&t.bottom>=r},Da=(t,e,r)=>{var n=ee.toDOMRange(t,e).getBoundingClientRect(),a=ee.toDOMRange(t,r).getBoundingClientRect();return ga(n,a)&&ga(a,n)},Ql=(t,e)=>{var r=o.range(t,y.end(e)),n=Array.from(o.positions(t,{at:e})),a=0,u=n.length,s=Math.floor(u/2);if(Da(t,o.range(t,n[a]),r))return o.range(t,n[a],r);if(n.length<2)return o.range(t,n[n.length-1],r);for(;s!==n.length&&s!==a;)Da(t,o.range(t,n[s]),r)?u=s:a=s,s=Math.floor((a+u)/2);return o.range(t,n[a],r)};function ma(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function pa(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ma(Object(r),!0).forEach(function(n){Jr(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ma(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var _l=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"x-slate-fragment",n=e,{apply:a,onChange:u,deleteBackward:s,addMark:i,removeMark:f}=n;return nr.set(n,new WeakMap),n.addMark=(c,d)=>{var h,v;(h=Zr.get(n))===null||h===void 0||h(),!Me.get(n)&&(v=Ne.get(n))!==null&&v!==void 0&&v.length&&Me.set(n,null),Ue.delete(n),i(c,d)},n.removeMark=c=>{var d;!Me.get(n)&&(d=Ne.get(n))!==null&&d!==void 0&&d.length&&Me.set(n,null),Ue.delete(n),f(c)},n.deleteBackward=c=>{if(c!=="line")return s(c);if(n.selection&&y.isCollapsed(n.selection)){var d=o.above(n,{match:C=>J.isElement(C)&&o.isBlock(n,C),at:n.selection});if(d){var[,h]=d,v=o.range(n,h,n.selection.anchor),D=Ql(n,v);y.isCollapsed(D)||P.delete(n,{at:D})}}},n.apply=c=>{var d=[],h=[],v=Ne.get(n);if(v!=null&&v.length){var D=v.map(T=>Zl(T,c)).filter(Boolean);Ne.set(n,D)}var C=Ve.get(n);C&&Ve.set(n,ha(n,C,c));var E=_e.get(n);if(E!=null&&E.at){var w=ue.isPoint(E?.at)?zr(n,E.at,c):ha(n,E.at,c);_e.set(n,w?pa(pa({},E),{},{at:w}):null)}switch(c.type){case"insert_text":case"remove_text":case"set_node":case"split_node":{d.push(...vt(n,c.path));break}case"set_selection":{var p;(p=Ot.get(n))===null||p===void 0||p.unref(),Ot.delete(n);break}case"insert_node":case"remove_node":{d.push(...vt(n,g.parent(c.path)));break}case"merge_node":{var l=g.previous(c.path);d.push(...vt(n,l));break}case"move_node":{var b=g.common(g.parent(c.path),g.parent(c.newPath));d.push(...vt(n,b));var A;g.isBefore(c.path,c.newPath)?(d.push(...vt(n,g.parent(c.path))),A=c.newPath):(d.push(...vt(n,g.parent(c.newPath))),A=c.path);var O=H.get(e,g.parent(A)),k=ee.findKey(n,O),I=o.pathRef(n,g.parent(A));h.push([I,k]);break}}switch(a(c),c.type){case"insert_node":case"remove_node":case"merge_node":case"move_node":case"split_node":case"insert_text":case"remove_text":case"set_selection":mt.set(n,!0)}for(var[L,W]of d){var[$]=o.node(n,L);er.set($,W)}for(var[K,N]of h){if(K.current){var[j]=o.node(n,K.current);er.set(j,N)}K.unref()}},n.setFragmentData=c=>{var{selection:d}=n;if(d){var[h,v]=y.edges(d),D=o.void(n,{at:h.path}),C=o.void(n,{at:v.path});if(!(y.isCollapsed(d)&&!D)){var E=ee.toDOMRange(n,d),w=E.cloneContents(),p=w.childNodes[0];if(w.childNodes.forEach($=>{$.textContent&&$.textContent.trim()!==""&&(p=$)}),C){var[l]=C,b=E.cloneRange(),A=ee.toDOMNode(n,l);b.setEndAfter(A),w=b.cloneContents()}if(D&&(p=w.querySelector("[data-slate-spacer]")),Array.from(w.querySelectorAll("[data-slate-zero-width]")).forEach($=>{var K=$.getAttribute("data-slate-zero-width")==="n";$.textContent=K?`
`:""}),uu(p)){var O=p.ownerDocument.createElement("span");O.style.whiteSpace="pre",O.appendChild(p),w.appendChild(O),p=O}var k=n.getFragment(),I=JSON.stringify(k),L=window.btoa(encodeURIComponent(I));p.setAttribute("data-slate-fragment",L),c.setData("application/".concat(r),L);var W=w.ownerDocument.createElement("div");return W.appendChild(w),W.setAttribute("hidden","true"),w.ownerDocument.body.appendChild(W),c.setData("text/html",W.innerHTML),c.setData("text/plain",iu(W)),w.ownerDocument.body.removeChild(W),c}}},n.insertData=c=>{n.insertFragmentData(c)||n.insertTextData(c)},n.insertFragmentData=c=>{var d=c.getData("application/".concat(r))||kl(c);if(d){var h=decodeURIComponent(window.atob(d)),v=JSON.parse(h);return n.insertFragment(v),!0}return!1},n.insertTextData=c=>{var d=c.getData("text/plain");if(d){var h=d.split(/\r\n|\r|\n/),v=!1;for(var D of h)v&&P.splitNodes(n,{always:!0}),n.insertText(D),v=!0;return!0}return!1},n.onChange=c=>{var d=Ir.get(n);d&&d(c),u(c)},n},vt=(t,e)=>{var r=[];for(var[n,a]of o.levels(t,{at:e})){var u=ee.findKey(t,n);r.push([a,u])}return r},ec=3,tc={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",insertSoftBreak:"shift+enter",splitBlock:"enter",undo:"mod+z"},rc={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},nc={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},fe=t=>{var e=tc[t],r=rc[t],n=nc[t],a=e&&br.isHotkey(e),u=r&&br.isHotkey(r),s=n&&br.isHotkey(n);return i=>!!(a&&a(i)||da&&u&&u(i)||!da&&s&&s(i))},ge={isBold:fe("bold"),isCompose:fe("compose"),isMoveBackward:fe("moveBackward"),isMoveForward:fe("moveForward"),isDeleteBackward:fe("deleteBackward"),isDeleteForward:fe("deleteForward"),isDeleteLineBackward:fe("deleteLineBackward"),isDeleteLineForward:fe("deleteLineForward"),isDeleteWordBackward:fe("deleteWordBackward"),isDeleteWordForward:fe("deleteWordForward"),isExtendBackward:fe("extendBackward"),isExtendForward:fe("extendForward"),isExtendLineBackward:fe("extendLineBackward"),isExtendLineForward:fe("extendLineForward"),isItalic:fe("italic"),isMoveLineBackward:fe("moveLineBackward"),isMoveLineForward:fe("moveLineForward"),isMoveWordBackward:fe("moveWordBackward"),isMoveWordForward:fe("moveWordForward"),isRedo:fe("redo"),isSoftBreak:fe("insertSoftBreak"),isSplitBlock:fe("splitBlock"),isTransposeCharacter:fe("transposeCharacter"),isUndo:fe("undo")};function ac(t,e){if(t==null)return{};var r={},n=Object.keys(t),a,u;for(u=0;u<n.length;u++)a=n[u],!(e.indexOf(a)>=0)&&(r[a]=t[a]);return r}function Ca(t,e){if(t==null)return{};var r=ac(t,e),n,a;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(a=0;a<u.length;a++)n=u[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var uc=["anchor","focus"],sc=["anchor","focus"];function Ba(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ea(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ba(Object(r),!0).forEach(function(n){Jr(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ba(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var ic=(t,e)=>Object.keys(t).length===Object.keys(e).length&&Object.keys(t).every(r=>e.hasOwnProperty(r)&&t[r]===e[r]),gu=(t,e)=>{var r=Ca(t,uc),n=Ca(e,sc);return t[Ct]===e[Ct]&&ic(r,n)},Qr=(t,e)=>{if(t===e)return!0;if(!t||!e||t.length!==e.length)return!1;for(var r=0;r<t.length;r++){var n=t[r],a=e[r];if(!y.equals(n,a)||!gu(n,a))return!1}return!0},Du=(t,e)=>{if(t===e)return!0;if(!t||!e||t.length!==e.length)return!1;for(var r=0;r<t.length;r++){var n=t[r],a=e[r];if(n.anchor.offset!==a.anchor.offset||n.focus.offset!==a.focus.offset||!gu(n,a))return!1}return!0},oc=(t,e,r)=>{var n=Array.from(e.children,()=>[]);if(r.length===0)return n;var a=ee.findPath(t,e),u=a.length,s=o.range(t,a),i=new Array(e.children.length),f=b=>{var A=i[b];if(A)return A;var O=o.range(t,[...a,b]);return i[b]=O,O};for(var c of r){var d=y.intersection(s,c);if(d)for(var[h,v]=y.edges(d),D=h.path[u],C=v.path[u],E=D;E<=C;E++){var w=n[E];if(w){var p=f(E),l=y.intersection(p,c);l&&w.push(Ea(Ea({},c),l))}}}return n},ct=[],lc=function(){return ct.some(function(t){return t.activeTargets.length>0})},cc=function(){return ct.some(function(t){return t.skippedTargets.length>0})},ba="ResizeObserver loop completed with undelivered notifications.",fc=function(){var t;typeof ErrorEvent=="function"?t=new ErrorEvent("error",{message:ba}):(t=document.createEvent("Event"),t.initEvent("error",!1,!1),t.message=ba),window.dispatchEvent(t)},kt;(function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(kt||(kt={}));var ft=function(t){return Object.freeze(t)},dc=(function(){function t(e,r){this.inlineSize=e,this.blockSize=r,ft(this)}return t})(),mu=(function(){function t(e,r,n,a){return this.x=e,this.y=r,this.width=n,this.height=a,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,ft(this)}return t.prototype.toJSON=function(){var e=this,r=e.x,n=e.y,a=e.top,u=e.right,s=e.bottom,i=e.left,f=e.width,c=e.height;return{x:r,y:n,top:a,right:u,bottom:s,left:i,width:f,height:c}},t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t})(),_r=function(t){return t instanceof SVGElement&&"getBBox"in t},pu=function(t){if(_r(t)){var e=t.getBBox(),r=e.width,n=e.height;return!r&&!n}var a=t,u=a.offsetWidth,s=a.offsetHeight;return!(u||s||t.getClientRects().length)},wa=function(t){var e;if(t instanceof Element)return!0;var r=(e=t?.ownerDocument)===null||e===void 0?void 0:e.defaultView;return!!(r&&t instanceof r.Element)},vc=function(t){switch(t.tagName){case"INPUT":if(t.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},jt=typeof window<"u"?window:{},Wt=new WeakMap,Aa=/auto|scroll/,hc=/^tb|vertical/,gc=/msie|trident/i.test(jt.navigator&&jt.navigator.userAgent),Ie=function(t){return parseFloat(t||"0")},pt=function(t,e,r){return t===void 0&&(t=0),e===void 0&&(e=0),r===void 0&&(r=!1),new dc((r?e:t)||0,(r?t:e)||0)},Fa=ft({devicePixelContentBoxSize:pt(),borderBoxSize:pt(),contentBoxSize:pt(),contentRect:new mu(0,0,0,0)}),Cu=function(t,e){if(e===void 0&&(e=!1),Wt.has(t)&&!e)return Wt.get(t);if(pu(t))return Wt.set(t,Fa),Fa;var r=getComputedStyle(t),n=_r(t)&&t.ownerSVGElement&&t.getBBox(),a=!gc&&r.boxSizing==="border-box",u=hc.test(r.writingMode||""),s=!n&&Aa.test(r.overflowY||""),i=!n&&Aa.test(r.overflowX||""),f=n?0:Ie(r.paddingTop),c=n?0:Ie(r.paddingRight),d=n?0:Ie(r.paddingBottom),h=n?0:Ie(r.paddingLeft),v=n?0:Ie(r.borderTopWidth),D=n?0:Ie(r.borderRightWidth),C=n?0:Ie(r.borderBottomWidth),E=n?0:Ie(r.borderLeftWidth),w=h+c,p=f+d,l=E+D,b=v+C,A=i?t.offsetHeight-b-t.clientHeight:0,O=s?t.offsetWidth-l-t.clientWidth:0,k=a?w+l:0,I=a?p+b:0,L=n?n.width:Ie(r.width)-k-O,W=n?n.height:Ie(r.height)-I-A,$=L+w+O+l,K=W+p+A+b,N=ft({devicePixelContentBoxSize:pt(Math.round(L*devicePixelRatio),Math.round(W*devicePixelRatio),u),borderBoxSize:pt($,K,u),contentBoxSize:pt(L,W,u),contentRect:new mu(h,f,L,W)});return Wt.set(t,N),N},Bu=function(t,e,r){var n=Cu(t,r),a=n.borderBoxSize,u=n.contentBoxSize,s=n.devicePixelContentBoxSize;switch(e){case kt.DEVICE_PIXEL_CONTENT_BOX:return s;case kt.BORDER_BOX:return a;default:return u}},Dc=(function(){function t(e){var r=Cu(e);this.target=e,this.contentRect=r.contentRect,this.borderBoxSize=ft([r.borderBoxSize]),this.contentBoxSize=ft([r.contentBoxSize]),this.devicePixelContentBoxSize=ft([r.devicePixelContentBoxSize])}return t})(),Eu=function(t){if(pu(t))return 1/0;for(var e=0,r=t.parentNode;r;)e+=1,r=r.parentNode;return e},mc=function(){var t=1/0,e=[];ct.forEach(function(s){if(s.activeTargets.length!==0){var i=[];s.activeTargets.forEach(function(c){var d=new Dc(c.target),h=Eu(c.target);i.push(d),c.lastReportedSize=Bu(c.target,c.observedBox),h<t&&(t=h)}),e.push(function(){s.callback.call(s.observer,i,s.observer)}),s.activeTargets.splice(0,s.activeTargets.length)}});for(var r=0,n=e;r<n.length;r++){var a=n[r];a()}return t},ya=function(t){ct.forEach(function(r){r.activeTargets.splice(0,r.activeTargets.length),r.skippedTargets.splice(0,r.skippedTargets.length),r.observationTargets.forEach(function(a){a.isActive()&&(Eu(a.target)>t?r.activeTargets.push(a):r.skippedTargets.push(a))})})},pc=function(){var t=0;for(ya(t);lc();)t=mc(),ya(t);return cc()&&fc(),t>0},Fr,bu=[],Cc=function(){return bu.splice(0).forEach(function(t){return t()})},Bc=function(t){if(!Fr){var e=0,r=document.createTextNode(""),n={characterData:!0};new MutationObserver(function(){return Cc()}).observe(r,n),Fr=function(){r.textContent="".concat(e?e--:e++)}}bu.push(t),Fr()},Ec=function(t){Bc(function(){requestAnimationFrame(t)})},Xt=0,bc=function(){return!!Xt},wc=250,Ac={attributes:!0,characterData:!0,childList:!0,subtree:!0},xa=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],Oa=function(t){return t===void 0&&(t=0),Date.now()+t},yr=!1,Fc=(function(){function t(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return t.prototype.run=function(e){var r=this;if(e===void 0&&(e=wc),!yr){yr=!0;var n=Oa(e);Ec(function(){var a=!1;try{a=pc()}finally{if(yr=!1,e=n-Oa(),!bc())return;a?r.run(1e3):e>0?r.run(e):r.start()}})}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var e=this,r=function(){return e.observer&&e.observer.observe(document.body,Ac)};document.body?r():jt.addEventListener("DOMContentLoaded",r)},t.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),xa.forEach(function(r){return jt.addEventListener(r,e.listener,!0)}))},t.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),xa.forEach(function(r){return jt.removeEventListener(r,e.listener,!0)}),this.stopped=!0)},t})(),$r=new Fc,ja=function(t){!Xt&&t>0&&$r.start(),Xt+=t,!Xt&&$r.stop()},yc=function(t){return!_r(t)&&!vc(t)&&getComputedStyle(t).display==="inline"},xc=(function(){function t(e,r){this.target=e,this.observedBox=r||kt.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var e=Bu(this.target,this.observedBox,!0);return yc(this.target)&&(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},t})(),Oc=(function(){function t(e,r){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=r}return t})(),qt=new WeakMap,Sa=function(t,e){for(var r=0;r<t.length;r+=1)if(t[r].target===e)return r;return-1},Ht=(function(){function t(){}return t.connect=function(e,r){var n=new Oc(e,r);qt.set(e,n)},t.observe=function(e,r,n){var a=qt.get(e),u=a.observationTargets.length===0;Sa(a.observationTargets,r)<0&&(u&&ct.push(a),a.observationTargets.push(new xc(r,n&&n.box)),ja(1),$r.schedule())},t.unobserve=function(e,r){var n=qt.get(e),a=Sa(n.observationTargets,r),u=n.observationTargets.length===1;a>=0&&(u&&ct.splice(ct.indexOf(n),1),n.observationTargets.splice(a,1),ja(-1))},t.disconnect=function(e){var r=this,n=qt.get(e);n.observationTargets.slice().forEach(function(a){return r.unobserve(e,a.target)}),n.activeTargets.splice(0,n.activeTargets.length)},t})(),jc=(function(){function t(e){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof e!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");Ht.connect(this,e)}return t.prototype.observe=function(e,r){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!wa(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");Ht.observe(this,e,r)},t.prototype.unobserve=function(e){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!wa(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");Ht.unobserve(this,e)},t.prototype.disconnect=function(){Ht.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t})();function Sc(t,e){if(t==null)return{};var r={},n=Object.keys(t),a,u;for(u=0;u<n.length;u++)a=n[u],!(e.indexOf(a)>=0)&&(r[a]=t[a]);return r}function tr(t,e){if(t==null)return{};var r=Sc(t,e),n,a;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(a=0;a<u.length;a++)n=u[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Rt(t){"@babel/helpers - typeof";return Rt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rt(t)}function Pc(t,e){if(Rt(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Rt(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Nc(t){var e=Pc(t,"string");return Rt(e)==="symbol"?e:String(e)}function de(t,e,r){return e=Nc(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var en=x.createContext(null),We=()=>{var t=x.useContext(en);if(!t)throw new Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");return t},z=ee;function Pa(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Kt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Pa(Object(r),!0).forEach(function(n){de(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Pa(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Tc=25,kc=200,Rc=function(){},Mc=t=>t?.constructor.name==="DataTransfer";function Ic(t){var{editor:e,scheduleOnDOMSelectionChange:r,onDOMSelectionChange:n}=t,a=!1,u=null,s=null,i=null,f=0,c=!1,d=()=>{var N=Ve.get(e);if(Ve.delete(e),N){var{selection:j}=e,T=va(e,N);T&&(!j||!y.equals(T,j))&&P.select(e,T)}},h=()=>{var N=_e.get(e);if(_e.delete(e),!!N){if(N.at){var j=ue.isPoint(N.at)?Lr(e,N.at):va(e,N.at);if(!j)return;var T=o.range(e,j);(!e.selection||!y.equals(e.selection,T))&&P.select(e,j)}N.run()}},v=()=>{if(s&&(clearTimeout(s),s=null),i&&(clearTimeout(i),i=null),!A()&&!b()){d();return}a||(a=!0,setTimeout(()=>a=!1)),b()&&(a="action");var N=e.selection&&o.rangeRef(e,e.selection,{affinity:"forward"});Ue.set(e,e.marks),Rc("flush",_e.get(e),Ne.get(e));for(var j=A(),T;T=(F=Ne.get(e))===null||F===void 0?void 0:F[0];){var F,G,V=Me.get(e);V!==void 0&&(Me.delete(e),e.marks=V),V&&c===!1&&(c=null);var re=Jl(T);(!e.selection||!y.equals(e.selection,re))&&P.select(e,re),T.diff.text?o.insertText(e,T.diff.text):o.deleteFragment(e),Ne.set(e,(G=Ne.get(e))===null||G===void 0?void 0:G.filter(ne=>{var{id:se}=ne;return se!==T.id})),Ul(e,T)||(j=!1,_e.delete(e),Ue.delete(e),a="action",Ve.delete(e),r.cancel(),n.cancel(),N?.unref())}var q=N?.unref();if(q&&!Ve.get(e)&&(!e.selection||!y.equals(q,e.selection))&&P.select(e,q),b()){h();return}j&&r(),r.flush(),n.flush(),d();var Z=Ue.get(e);Ue.delete(e),Z!==void 0&&(e.marks=Z,e.onChange())},D=N=>{u&&clearTimeout(u),u=setTimeout(()=>{it.set(e,!1),v()},Tc)},C=N=>{it.set(e,!0),u&&(clearTimeout(u),u=null)},E=function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,T=Rr.get(e);if(T){if(A()||j){T.style.display="none";return}T.style.removeProperty("display")}},w=(N,j)=>{var T,F=(T=Ne.get(e))!==null&&T!==void 0?T:[];Ne.set(e,F);var G=H.leaf(e,N),V=F.findIndex(Z=>g.equals(Z.path,N));if(V<0){var re=hu(G.text,j);re&&F.push({path:N,diff:j,id:f++}),E();return}var q=Xl(G.text,F[V].diff,j);if(!q){F.splice(V,1),E();return}F[V]=Kt(Kt({},F[V]),{},{diff:q})},p=function(j){var{at:T}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};c=!1,Ve.delete(e),r.cancel(),n.cancel(),b()&&v(),_e.set(e,{at:T,run:j}),i=setTimeout(v)},l=N=>{var j;if(s&&(clearTimeout(s),s=null),!mt.get(e)){var{inputType:T}=N,F=null,G=N.dataTransfer||N.data||void 0;c!==!1&&T!=="insertText"&&T!=="insertCompositionText"&&(c=!1);var[V]=N.getTargetRanges();V&&(F=z.toSlateRange(e,V,{exactMatch:!1,suppressThrow:!0}));var re=z.getWindow(e),q=re.getSelection();if(!F&&q&&(V=q,F=z.toSlateRange(e,q,{exactMatch:!1,suppressThrow:!0})),F=(j=F)!==null&&j!==void 0?j:e.selection,!!F){var Z=!0;if(T.startsWith("delete")){var ne=T.endsWith("Backward")?"backward":"forward",[se,U]=y.edges(F),[ae,De]=o.leaf(e,se.path);if(y.isExpanded(F)&&ae.text.length===se.offset&&U.offset===0){var pe=o.next(e,{at:se.path,match:X.isText});pe&&g.equals(pe[1],U.path)&&(ne==="backward"?(F={anchor:U,focus:U},se=U,[ae,De]=pe):(F={anchor:se,focus:se},U=se))}var Fe={text:"",start:se.offset,end:U.offset},Pe=Ne.get(e),B=Pe?.find(ke=>g.equals(ke.path,De)),R=B?[B.diff,Fe]:[Fe],S=vu(ae.text,...R);if(S.length===0&&(Z=!1),y.isExpanded(F)){if(Z&&g.equals(F.anchor.path,F.focus.path)){var M={path:F.anchor.path,offset:se.offset},te=o.range(e,M,M);return I(te),w(F.anchor.path,{text:"",end:U.offset,start:se.offset})}return p(()=>o.deleteFragment(e,{direction:ne}),{at:F})}}switch(T){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":return p(()=>o.deleteFragment(e),{at:F});case"deleteContent":case"deleteContentForward":{var{anchor:Y}=F;if(Z&&y.isCollapsed(F)){var ve=H.leaf(e,Y.path);if(Y.offset<ve.text.length)return w(Y.path,{text:"",start:Y.offset,end:Y.offset+1})}return p(()=>o.deleteForward(e),{at:F})}case"deleteContentBackward":{var le,{anchor:oe}=F,Ee=kr(V)?V.isCollapsed:!!((le=V)!==null&&le!==void 0&&le.collapsed);return Z&&Ee&&y.isCollapsed(F)&&oe.offset>0?w(oe.path,{text:"",start:oe.offset-1,end:oe.offset}):p(()=>o.deleteBackward(e),{at:F})}case"deleteEntireSoftLine":return p(()=>{o.deleteBackward(e,{unit:"line"}),o.deleteForward(e,{unit:"line"})},{at:F});case"deleteHardLineBackward":return p(()=>o.deleteBackward(e,{unit:"block"}),{at:F});case"deleteSoftLineBackward":return p(()=>o.deleteBackward(e,{unit:"line"}),{at:F});case"deleteHardLineForward":return p(()=>o.deleteForward(e,{unit:"block"}),{at:F});case"deleteSoftLineForward":return p(()=>o.deleteForward(e,{unit:"line"}),{at:F});case"deleteWordBackward":return p(()=>o.deleteBackward(e,{unit:"word"}),{at:F});case"deleteWordForward":return p(()=>o.deleteForward(e,{unit:"word"}),{at:F});case"insertLineBreak":return p(()=>o.insertSoftBreak(e),{at:F});case"insertParagraph":return p(()=>o.insertBreak(e),{at:F});case"insertCompositionText":case"deleteCompositionText":case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{if(Mc(G))return p(()=>z.insertData(e,G),{at:F});var ie=G??"";if(Me.get(e)&&(ie=ie.replace("\uFEFF","")),T==="insertText"&&/.*\n.*\n$/.test(ie)&&(ie=ie.slice(0,-1)),ie.includes(`
`))return p(()=>{var ke=ie.split(`
`);ke.forEach((ye,be)=>{ye&&o.insertText(e,ye),be!==ke.length-1&&o.insertSoftBreak(e)})},{at:F});if(g.equals(F.anchor.path,F.focus.path)){var[Ce,he]=y.edges(F),we={start:Ce.offset,end:he.offset,text:ie};if(ie&&c&&T==="insertCompositionText"){var Xe=c.start+c.text.search(/\S|$/),dt=we.start+we.text.search(/\S|$/);dt===Xe+1&&we.end===c.start+c.text.length?(we.start-=1,c=null,$()):c=!1}else T==="insertText"?c===null?c=we:c&&y.isCollapsed(F)&&c.end+c.text.length===Ce.offset?c=Kt(Kt({},c),{},{text:c.text+ie}):c=!1:c=!1;if(Z){var qe=e.selection;if(w(Ce.path,we),qe){var Je={path:Ce.path,offset:Ce.offset+ie.length};p(()=>{P.select(e,{anchor:Je,focus:Je})},{at:Je})}return}}return p(()=>o.insertText(e,ie),{at:F})}}}}},b=()=>!!_e.get(e),A=()=>{var N;return!!((N=Ne.get(e))!==null&&N!==void 0&&N.length)},O=()=>b()||A(),k=()=>a,I=N=>{Ve.set(e,N),s&&(clearTimeout(s),s=null);var{selection:j}=e;if(N){var T=!j||!g.equals(j.anchor.path,N.anchor.path),F=!j||!g.equals(j.anchor.path.slice(0,-1),N.anchor.path.slice(0,-1));(T&&c||F)&&(c=!1),(T||A())&&(s=setTimeout(v,kc))}},L=()=>{(b()||!A())&&v()},W=N=>{A()||(E(!0),setTimeout(E))},$=()=>{b()||(i=setTimeout(v))},K=N=>{if(!(A()||b())&&N.some(T=>Yr(e,T,N))){var j;(j=fu.get(e))===null||j===void 0||j()}};return{flush:v,scheduleFlush:$,hasPendingDiffs:A,hasPendingAction:b,hasPendingChanges:O,isFlushing:k,handleUserSelect:I,handleCompositionEnd:D,handleCompositionStart:C,handleDOMBeforeInput:l,handleKeyDown:W,handleDomMutations:K,handleInput:L}}function Lc(){var t=x.useRef(!1);return x.useEffect(()=>(t.current=!0,()=>{t.current=!1}),[]),t.current}var Ye=Yt?x.useLayoutEffect:x.useEffect;function zc(t,e,r){var[n]=x.useState(()=>new MutationObserver(e));Ye(()=>{n.takeRecords()}),x.useEffect(()=>{if(!t.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");return n.observe(t.current,r),()=>n.disconnect()},[n,t,r])}var $c=["node"];function Na(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Wc(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Na(Object(r),!0).forEach(function(n){de(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Na(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var qc={subtree:!0,childList:!0,characterData:!0},Hc=Oe?t=>{var{node:e}=t,r=tr(t,$c);if(!Oe)return null;var n=We(),a=Lc(),[u]=x.useState(()=>Ic(Wc({editor:n},r)));return zc(e,u.handleDomMutations,qc),Zr.set(n,u.scheduleFlush),a&&u.flush(),u}:()=>null;function Ta(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Kc(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ta(Object(r),!0).forEach(function(n){de(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ta(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Vc=t=>{var{isLast:e,leaf:r,parent:n,text:a}=t,u=We(),s=z.findPath(u,a),i=g.parent(s),f=!!r[du];return u.isVoid(n)?Q.createElement(xr,{length:H.string(n).length}):r.text===""&&n.children[n.children.length-1]===a&&!u.isInline(n)&&o.string(u,i)===""?Q.createElement(xr,{isLineBreak:!0,isMarkPlaceholder:f}):r.text===""?Q.createElement(xr,{isMarkPlaceholder:f}):e&&r.text.slice(-1)===`
`?Q.createElement(ka,{isTrailing:!0,text:r.text}):Q.createElement(ka,{text:r.text})},ka=t=>{var{text:e,isTrailing:r=!1}=t,n=x.useRef(null),a=()=>"".concat(e??"").concat(r?`
`:""),[u]=x.useState(a);return Ye(()=>{var s=a();n.current&&n.current.textContent!==s&&(n.current.textContent=s)}),Q.createElement(Uc,{ref:n},u)},Uc=x.memo(x.forwardRef((t,e)=>Q.createElement("span",{"data-slate-string":!0,ref:e},t.children))),xr=t=>{var{length:e=0,isLineBreak:r=!1,isMarkPlaceholder:n=!1}=t,a={"data-slate-zero-width":r?"n":"z","data-slate-length":e};return n&&(a["data-slate-mark-placeholder"]=!0),Q.createElement("span",Kc({},a),!Oe||!r?"\uFEFF":null,r?Q.createElement("br",null):null)};function Ra(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function wu(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ra(Object(r),!0).forEach(function(n){de(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ra(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Gc=Oe?300:0;function Yc(t,e){t.current&&(t.current.disconnect(),e&&(t.current=null))}function Ma(t){t.current&&(clearTimeout(t.current),t.current=null)}var Xc=t=>Q.createElement(Qc,wu({},t)),Jc=t=>{var{leaf:e,isLast:r,text:n,parent:a,renderPlaceholder:u,renderLeaf:s=Xc,leafPosition:i}=t,f=We(),c=x.useRef(null),d=x.useRef(null),[h,v]=x.useState(!1),D=x.useRef(null),C=x.useCallback(b=>{if(Yc(c,b==null),b==null){var A;Rr.delete(f),(A=e.onPlaceholderResize)===null||A===void 0||A.call(e,null)}else{if(Rr.set(f,b),!c.current){var O=window.ResizeObserver||jc;c.current=new O(()=>{var k;(k=e.onPlaceholderResize)===null||k===void 0||k.call(e,b)})}c.current.observe(b),d.current=b}},[d,e,f]),E=Q.createElement(Vc,{isLast:r,leaf:e,parent:a,text:n}),w=!!e[Ct];if(x.useEffect(()=>(w?D.current||(D.current=setTimeout(()=>{v(!0),D.current=null},Gc)):(Ma(D),v(!1)),()=>Ma(D)),[w,v]),w&&h){var p={children:e.placeholder,attributes:{"data-slate-placeholder":!0,style:{position:"absolute",top:0,pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none",WebkitUserModify:st?"inherit":void 0},contentEditable:!1,ref:C}};E=Q.createElement(Q.Fragment,null,E,u(p))}var l={"data-slate-leaf":!0};return s({attributes:l,children:E,leaf:e,text:n,leafPosition:i})},Zc=Q.memo(Jc,(t,e)=>e.parent===t.parent&&e.isLast===t.isLast&&e.renderLeaf===t.renderLeaf&&e.renderPlaceholder===t.renderPlaceholder&&e.text===t.text&&X.equals(e.leaf,t.leaf)&&e.leaf[Ct]===t.leaf[Ct]),Qc=t=>{var{attributes:e,children:r}=t;return Q.createElement("span",wu({},e),r)};function _c(t,e){var[,r]=x.useReducer(c=>c+1,0),n=x.useRef(),a=x.useRef(()=>null),u=x.useRef(null),s;try{if(t!==a.current||n.current){var i=t();e(u.current,i)?s=u.current:s=i}else s=u.current}catch(c){throw n.current&&ef(c)&&(c.message+=`
The error may be correlated with this previous error:
`.concat(n.current.stack,`

`)),c}a.current=t,u.current=s,n.current=void 0;var f=x.useCallback(()=>{try{var c=a.current();if(e(u.current,c))return;u.current=c}catch(d){d instanceof Error?n.current=d:n.current=new Error(String(d))}r()},[]);return[s,f]}function ef(t){return t instanceof Error}var Au=x.createContext({}),Fu=(t,e)=>{var r=We(),{decorate:n,addEventListener:a}=x.useContext(Au),u=()=>{var c=z.findPath(r,t);return n([t,c])},s=X.isText(t)?Du:Qr,[i,f]=_c(u,s);return Ye(()=>{var c=a(f);return f(),c},[a,f]),x.useMemo(()=>[...i,...e],[i,e])},tf=t=>{var e=x.useRef(new Set),r=x.useRef(t);Ye(()=>{r.current=t,e.current.forEach(u=>u())},[t]);var n=x.useCallback(u=>r.current(u),[]),a=x.useCallback(u=>(e.current.add(u),()=>{e.current.delete(u)}),[]);return x.useMemo(()=>({decorate:n,addEventListener:a}),[n,a])};function Ia(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function yu(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ia(Object(r),!0).forEach(function(n){de(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ia(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var rf=t=>Q.createElement(af,yu({},t)),nf=t=>{for(var{decorations:e,isLast:r,parent:n,renderPlaceholder:a,renderLeaf:u,renderText:s=rf,text:i}=t,f=We(),c=x.useRef(null),d=Fu(i,e),h=X.decorations(i,d),v=z.findKey(f,i),D=[],C=0;C<h.length;C++){var{leaf:E,position:w}=h[C];D.push(Q.createElement(Zc,{isLast:r&&C===h.length-1,key:"".concat(v.id,"-").concat(C),renderPlaceholder:a,leaf:E,leafPosition:w,text:i,parent:n,renderLeaf:u}))}var p=x.useCallback(b=>{var A=nr.get(f);b?(A?.set(v,b),lt.set(i,b),Tt.set(b,i)):(A?.delete(v),lt.delete(i),c.current&&Tt.delete(c.current)),c.current=b},[c,f,v,i]),l={"data-slate-node":"text",ref:p};return s({text:i,children:D,attributes:l})},xu=Q.memo(nf,(t,e)=>e.parent===t.parent&&e.isLast===t.isLast&&e.renderText===t.renderText&&e.renderLeaf===t.renderLeaf&&e.renderPlaceholder===t.renderPlaceholder&&e.text===t.text&&Du(e.decorations,t.decorations)),af=t=>{var{attributes:e,children:r}=t;return Q.createElement("span",yu({},e),r)};function La(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Wr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?La(Object(r),!0).forEach(function(n){de(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):La(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var uf=t=>Q.createElement(lf,Wr({},t)),sf=t=>{var{decorations:e,element:r,renderElement:n=uf,renderChunk:a,renderPlaceholder:u,renderLeaf:s,renderText:i}=t,f=We(),c=Cf(),d=f.isInline(r),h=Fu(r,e),v=z.findKey(f,r),D=x.useCallback(A=>{var O=nr.get(f);A?(O?.set(v,A),lt.set(r,A),Tt.set(A,r)):(O?.delete(v),lt.delete(r))},[f,v,r]),C=Su({decorations:h,node:r,renderElement:n,renderChunk:a,renderPlaceholder:u,renderLeaf:s,renderText:i}),E={"data-slate-node":"element",ref:D};if(d&&(E["data-slate-inline"]=!0),!d&&o.hasInlines(f,r)){var w=H.string(r),p=eu(w);p==="rtl"&&(E.dir=p)}if(o.isVoid(f,r)){E["data-slate-void"]=!0,!c&&d&&(E.contentEditable=!1);var l=d?"span":"div",[[b]]=H.texts(r);C=Q.createElement(l,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},Q.createElement(xu,{renderPlaceholder:u,decorations:[],isLast:!1,parent:r,text:b})),Dt.set(b,0),yt.set(b,r)}return n({attributes:E,children:C,element:r})},of=Q.memo(sf,(t,e)=>t.element===e.element&&t.renderElement===e.renderElement&&t.renderChunk===e.renderChunk&&t.renderText===e.renderText&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&Qr(t.decorations,e.decorations)),lf=t=>{var{attributes:e,children:r,element:n}=t,a=We(),u=a.isInline(n)?"span":"div";return Q.createElement(u,Wr(Wr({},e),{},{style:{position:"relative"}}),r)};class cf{constructor(e,r){var{chunkSize:n,debug:a}=r;de(this,"root",void 0),de(this,"chunkSize",void 0),de(this,"debug",void 0),de(this,"reachedEnd",void 0),de(this,"pointerChunk",void 0),de(this,"pointerIndex",void 0),de(this,"pointerIndexStack",void 0),de(this,"cachedPointerNode",void 0),this.root=e,this.chunkSize=n,this.debug=a??!1,this.pointerChunk=e,this.pointerIndex=-1,this.pointerIndexStack=[],this.reachedEnd=!1,this.validateState()}readLeaf(){if(this.reachedEnd)return null;for(;;)if(this.pointerIndex+1<this.pointerSiblings.length){this.pointerIndex++,this.cachedPointerNode=void 0;break}else{if(this.pointerChunk.type==="root")return this.reachedEnd=!0,null;this.exitChunk()}return this.validateState(),this.enterChunkUntilLeaf(!1),this.pointerNode}returnToPreviousLeaf(){if(this.reachedEnd){this.reachedEnd=!1,this.enterChunkUntilLeaf(!0);return}for(;;)if(this.pointerIndex>=1){this.pointerIndex--,this.cachedPointerNode=void 0;break}else if(this.pointerChunk.type==="root"){this.pointerIndex=-1;return}else this.exitChunk();this.validateState(),this.enterChunkUntilLeaf(!0)}insertBefore(e){this.returnToPreviousLeaf(),this.insertAfter(e),this.readLeaf()}insertAfter(e){if(e.length!==0){for(var r=0,n=0;this.pointerChunk.type==="chunk"&&this.pointerIndex===this.pointerSiblings.length-1;){var a=this.chunkSize-this.pointerSiblings.length,u=Math.min(a,e.length);if(u>0){var s=e.splice(0,u);this.rawInsertAfter(s,r)}this.exitChunk(),r++}if(e.length!==0){var i=this.savePointer(),f=null;if(this.readLeaf())for(;this.pointerChunk.type==="chunk"&&this.pointerIndex===0;){var c=this.chunkSize-this.pointerSiblings.length,d=Math.min(c,e.length);if(d>0){var h=e.splice(-d,d);this.pointerIndex=-1,this.cachedPointerNode=void 0,this.rawInsertAfter(h,n),f||(f=this.savePointer())}this.exitChunk(),n++}this.restorePointer(i);var v=Math.max(r,n);this.rawInsertAfter(e,v),f&&this.restorePointer(f),this.validateState()}}}remove(){this.pointerSiblings.splice(this.pointerIndex--,1),this.cachedPointerNode=void 0,this.pointerSiblings.length===0&&this.pointerChunk.type==="chunk"?(this.exitChunk(),this.remove()):this.invalidateChunk(),this.validateState()}invalidateChunk(){for(var e=this.pointerChunk;e.type==="chunk";e=e.parent)this.root.modifiedChunks.add(e)}get atStart(){return this.pointerChunk.type==="root"&&this.pointerIndex===-1}get pointerSiblings(){return this.pointerChunk.children}getPointerNode(){return this.reachedEnd||this.pointerIndex===-1?null:this.pointerSiblings[this.pointerIndex]}get pointerNode(){if(this.cachedPointerNode!==void 0)return this.cachedPointerNode;var e=this.getPointerNode();return this.cachedPointerNode=e,e}getChunkPath(e){for(var r=[],n=e;n.type==="chunk";n=n.parent){var a=n.parent.children.indexOf(n);if(a===-1)return null;r.unshift(a)}return r}savePointer(){if(this.atStart)return"start";if(!this.pointerNode)throw new Error("Cannot save pointer when pointerNode is null");return{chunk:this.pointerChunk,node:this.pointerNode}}restorePointer(e){if(e==="start"){this.pointerChunk=this.root,this.pointerIndex=-1,this.pointerIndexStack=[],this.reachedEnd=!1,this.cachedPointerNode=void 0;return}var{chunk:r,node:n}=e,a=r.children.indexOf(n);if(a===-1)throw new Error("Cannot restore point because saved node is no longer in saved chunk");var u=this.getChunkPath(r);if(!u)throw new Error("Cannot restore point because saved chunk is no longer connected to root");this.pointerChunk=r,this.pointerIndex=a,this.pointerIndexStack=u,this.reachedEnd=!1,this.cachedPointerNode=n,this.validateState()}enterChunk(e){var r;if(((r=this.pointerNode)===null||r===void 0?void 0:r.type)!=="chunk")throw new Error("Cannot enter non-chunk");if(this.pointerIndexStack.push(this.pointerIndex),this.pointerChunk=this.pointerNode,this.pointerIndex=e?this.pointerSiblings.length-1:0,this.cachedPointerNode=void 0,this.validateState(),this.pointerChunk.children.length===0)throw new Error("Cannot enter empty chunk")}enterChunkUntilLeaf(e){for(;((r=this.pointerNode)===null||r===void 0?void 0:r.type)==="chunk";){var r;this.enterChunk(e)}}exitChunk(){if(this.pointerChunk.type==="root")throw new Error("Cannot exit root");var e=this.pointerChunk;this.pointerChunk=e.parent,this.pointerIndex=this.pointerIndexStack.pop(),this.cachedPointerNode=void 0,this.validateState()}rawInsertAfter(e,r){if(e.length!==0){for(var n=(d,h,v)=>{if(v===1)return d;for(var D=[],C=0;C<this.chunkSize;C++){var E=d.slice(C*v,(C+1)*v);if(E.length===0)break;var w={type:"chunk",key:new lu,parent:h,children:[]};w.children=n(E,w,v/this.chunkSize),D.push(w)}return D},a=this.pointerSiblings.length+e.length,u=0,s=this.chunkSize;s<a;s*=this.chunkSize)u++;var i=Math.max(u,r),f=Math.pow(this.chunkSize,i),c=n(e,this.pointerChunk,f);this.pointerSiblings.splice(this.pointerIndex+1,0,...c),this.pointerIndex+=c.length,this.cachedPointerNode=void 0,this.invalidateChunk(),this.validateState()}}validateState(){if(this.debug){var e=n=>{if(n.type==="chunk"){var{parent:a,children:u}=n;if(!a.children.includes(n))throw new Error("Debug: Chunk ".concat(n.key.id," has an incorrect parent property"));u.forEach(e)}};if(this.root.children.forEach(e),this.cachedPointerNode!==void 0&&this.cachedPointerNode!==this.getPointerNode())throw new Error("Debug: The cached pointer is incorrect and has not been invalidated");var r=this.getChunkPath(this.pointerChunk);if(!r)throw new Error("Debug: The pointer chunk is not connected to the root");if(!g.equals(this.pointerIndexStack,r))throw new Error("Debug: The cached index stack [".concat(this.pointerIndexStack.join(", "),"] does not match the path of the pointer chunk [").concat(r.join(", "),"]"))}}}class ff{constructor(e,r){de(this,"editor",void 0),de(this,"children",void 0),de(this,"cachedKeys",void 0),de(this,"pointerIndex",void 0),this.editor=e,this.children=r,this.cachedKeys=new Array(r.length),this.pointerIndex=0}read(e){if(e===1)return[this.children[this.pointerIndex++]];var r=this.remaining(e);return this.pointerIndex+=e,r}remaining(e){return e===void 0?this.children.slice(this.pointerIndex):this.children.slice(this.pointerIndex,this.pointerIndex+e)}get reachedEnd(){return this.pointerIndex>=this.children.length}lookAhead(e,r){var n=this.children.indexOf(e,this.pointerIndex);if(n>-1)return n-this.pointerIndex;for(var a=this.pointerIndex;a<this.children.length;a++){var u=this.children[a],s=this.findKey(u,a);if(s===r)return a-this.pointerIndex}return-1}toChunkLeaves(e,r){return e.map((n,a)=>({type:"leaf",node:n,key:this.findKey(n,r+a),index:r+a}))}findKey(e,r){var n=this.cachedKeys[r];if(n)return n;var a=z.findKey(this.editor,e);return this.cachedKeys[r]=a,a}}var df=(t,e)=>{var{chunkTree:r,children:n,chunkSize:a,rerenderChildren:u=[],onInsert:s,onUpdate:i,onIndexChange:f,debug:c}=e;r.modifiedChunks.clear();for(var d=new cf(r,{chunkSize:a,debug:c}),h=new ff(t,n),v,D=function(){var p=h.lookAhead(v.node,v.key),l=p>0&&r.movedNodeKeys.has(v.key);if(p===-1||l)return d.remove(),1;var b=h.pointerIndex,A=h.read(p+1),O=A.pop();if(A.length){var k=h.toChunkLeaves(A,b);d.insertBefore(k),A.forEach((L,W)=>{s?.(L,b+W)})}var I=h.pointerIndex-1;v.node!==O&&(v.node=O,d.invalidateChunk(),i?.(O,I)),v.index!==I&&(v.index=I,f?.(O,I)),u.includes(I)&&d.invalidateChunk()};v=d.readLeaf();)D();if(!h.reachedEnd){var C=h.remaining(),E=h.toChunkLeaves(C,h.pointerIndex);d.returnToPreviousLeaf(),d.insertAfter(E),C.forEach((w,p)=>{s?.(w,h.pointerIndex+p)})}r.movedNodeKeys.clear()};function za(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function vf(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?za(Object(r),!0).forEach(function(n){de(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):za(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var $a=new WeakMap,Ou=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=z.findKey(e,r),u=$a.get(a);return u||(u={type:"root",movedNodeKeys:new Set,modifiedChunks:new Set,children:[]},$a.set(a,u)),n.reconcile&&df(e,vf({chunkTree:u,children:r.children},n.reconcile)),u},hf=t=>{var{children:e}=t;return e},ju=t=>{var{root:e,ancestor:r,renderElement:n,renderChunk:a=hf}=t;return r.children.map(u=>{if(u.type==="chunk"){var s=u.key.id,i=a({highest:r===e,lowest:u.children.some(c=>c.type==="leaf"),attributes:{"data-slate-chunk":!0},children:Q.createElement(Df,{root:e,ancestor:u,renderElement:n,renderChunk:a})});return Q.createElement(x.Fragment,{key:s},i)}var f=u.node;return n(f,u.index,u.key)})},gf=ju,Df=Q.memo(ju,(t,e)=>t.root===e.root&&t.renderElement===e.renderElement&&t.renderChunk===e.renderChunk&&!e.root.modifiedChunks.has(e.ancestor)),mf=x.createContext(null),Su=t=>{var{decorations:e,node:r,renderElement:n,renderChunk:a,renderPlaceholder:u,renderText:s,renderLeaf:i}=t,f=We();mt.set(f,!1);var c=o.isEditor(r),d=!c&&J.isElement(r)&&!f.isInline(r),h=d&&o.hasInlines(f,r),v=h?null:f.getChunkSize(r),D=!!v,{decorationsByChild:C,childrenToRedecorate:E}=pf(f,r,e);D||r.children.forEach((b,A)=>{Dt.set(b,A),yt.set(b,r)});var w=x.useCallback((b,A,O)=>{var k=O??z.findKey(f,b);return Q.createElement(mf.Provider,{key:"provider-".concat(k.id),value:b},Q.createElement(of,{decorations:C[A],element:b,key:k.id,renderElement:n,renderChunk:a,renderPlaceholder:u,renderLeaf:i,renderText:s}))},[f,C,n,a,u,i,s]),p=(b,A)=>{var O=z.findKey(f,b);return Q.createElement(xu,{decorations:C[A],key:O.id,isLast:A===r.children.length-1,parent:r,renderPlaceholder:u,renderLeaf:i,renderText:s,text:b})};if(!D)return r.children.map((b,A)=>X.isText(b)?p(b,A):w(b,A));var l=Ou(f,r,{reconcile:{chunkSize:v,rerenderChildren:E,onInsert:(b,A)=>{Dt.set(b,A),yt.set(b,r)},onUpdate:(b,A)=>{Dt.set(b,A),yt.set(b,r)},onIndexChange:(b,A)=>{Dt.set(b,A)}}});return Q.createElement(gf,{root:l,ancestor:l,renderElement:w,renderChunk:a})},pf=(t,e,r)=>{var n=oc(t,e,r),a=x.useRef(n).current,u=[];a.length=n.length;for(var s=0;s<n.length;s++){var i,f=n[s],c=(i=a[s])!==null&&i!==void 0?i:null;Qr(c,f)||(a[s]=f,u.push(s))}return{decorationsByChild:a,childrenToRedecorate:u}},Pu=x.createContext(!1),Cf=()=>x.useContext(Pu),tn=x.createContext({});function Bf(){var t=x.useRef(new Set),e=x.useRef(new Set),r=x.useCallback(()=>{t.current.forEach(s=>s())},[]),n=x.useCallback(()=>{e.current.forEach(s=>s()),e.current.clear()},[]),a=x.useCallback(function(s){var{deferred:i=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},f=i?()=>e.current.add(s):s;return t.current.add(f),()=>{t.current.delete(f)}},[]),u=x.useMemo(()=>({addEventListener:a,flushDeferred:n}),[a,n]);return{selectorContext:u,onChange:r}}function Ef(){var{flushDeferred:t}=x.useContext(tn);Ye(t)}var Nu=()=>{var{addEventListener:t}=x.useContext(tn),[,e]=x.useReducer(r=>r+1,0);if(!t)throw new Error("The `useSlate` hook must be used inside the <Slate> component's context.");return Ye(()=>t(e),[t]),We()};function bf(){var t=We(),e=x.useRef(!1),r=x.useRef(0),n=x.useCallback(()=>{if(!e.current){e.current=!0;var a=z.getWindow(t);a.cancelAnimationFrame(r.current),r.current=a.requestAnimationFrame(()=>{e.current=!1})}},[t]);return x.useEffect(()=>()=>cancelAnimationFrame(r.current),[]),{receivedUserInput:e,onUserInput:n}}var wf=(t,e)=>{var r=[],n=()=>{r=[]},a=s=>{if(e.current){var i=s.filter(f=>Yr(t,f,s));r.push(...i)}};function u(){r.length>0&&(r.reverse().forEach(s=>{s.type!=="characterData"&&(s.removedNodes.forEach(i=>{s.target.insertBefore(i,s.nextSibling)}),s.addedNodes.forEach(i=>{s.target.removeChild(i)}))}),n())}return{registerMutations:a,restoreDOM:u,clear:n}},Af={subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0};class Tu extends x.Component{constructor(){super(...arguments),de(this,"context",null),de(this,"manager",null),de(this,"mutationObserver",null)}observe(){var e,{node:r}=this.props;if(!r.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");(e=this.mutationObserver)===null||e===void 0||e.observe(r.current,Af)}componentDidMount(){var{receivedUserInput:e}=this.props,r=this.context;this.manager=wf(r,e),this.mutationObserver=new MutationObserver(this.manager.registerMutations),this.observe()}getSnapshotBeforeUpdate(){var e,r,n,a=(e=this.mutationObserver)===null||e===void 0?void 0:e.takeRecords();if(a!=null&&a.length){var u;(u=this.manager)===null||u===void 0||u.registerMutations(a)}return(r=this.mutationObserver)===null||r===void 0||r.disconnect(),(n=this.manager)===null||n===void 0||n.restoreDOM(),null}componentDidUpdate(){var e;(e=this.manager)===null||e===void 0||e.clear(),this.observe()}componentWillUnmount(){var e;(e=this.mutationObserver)===null||e===void 0||e.disconnect()}render(){return this.props.children}}de(Tu,"contextType",en);var Ff=Oe?Tu:t=>{var{children:e}=t;return Q.createElement(Q.Fragment,null,e)},yf=x.createContext(!1),xf=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderChunk","renderLeaf","renderText","renderPlaceholder","scrollSelectionIntoView","style","as","disableDefaultStyles"],Of=["text"];function Wa(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Le(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Wa(Object(r),!0).forEach(function(n){de(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Wa(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var jf=t=>Q.createElement(Q.Fragment,null,Su(t)),Sf=x.forwardRef((t,e)=>{var r=x.useCallback(B=>Q.createElement(Pf,Le({},B)),[]),{autoFocus:n,decorate:a=Nf,onDOMBeforeInput:u,placeholder:s,readOnly:i=!1,renderElement:f,renderChunk:c,renderLeaf:d,renderText:h,renderPlaceholder:v=r,scrollSelectionIntoView:D=Tf,style:C={},as:E="div",disableDefaultStyles:w=!1}=t,p=tr(t,xf),l=Nu(),[b,A]=x.useState(!1),O=x.useRef(null),k=x.useRef([]),[I,L]=x.useState(),W=x.useRef(!1),{onUserInput:$,receivedUserInput:K}=bf(),[,N]=x.useReducer(B=>B+1,0);fu.set(l,N),Mr.set(l,i);var j=x.useMemo(()=>({isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null,hasMarkPlaceholder:!1}),[]);x.useEffect(()=>{O.current&&n&&O.current.focus()},[n]);var T=x.useRef(),F=x.useMemo(()=>bl(()=>{if(mt.get(l)){F();return}var B=z.toDOMNode(l,l),R=B.getRootNode();if(!W.current&&st&&R instanceof ShadowRoot){W.current=!0;var S=Rl();S?document.execCommand("indent"):P.deselect(l),W.current=!1;return}var M=T.current;if((Oe||!z.isComposing(l))&&(!j.isUpdatingSelection||M!=null&&M.isFlushing())&&!j.isDraggingInternally){var te=z.findDocumentOrShadowRoot(l),{activeElement:Y}=te,ve=z.toDOMNode(l,l),le=Ft(te);if(Y===ve?(j.latestElement=Y,tt.set(l,!0)):tt.delete(l),!le)return P.deselect(l);var{anchorNode:oe,focusNode:Ee}=le,ie=z.hasEditableTarget(l,oe)||z.isTargetInsideNonReadonlyVoid(l,oe),Ce=z.hasTarget(l,Ee);if(ie&&Ce){var he=z.toSlateRange(l,le,{exactMatch:!1,suppressThrow:!0});he&&(!z.isComposing(l)&&!(M!=null&&M.hasPendingChanges())&&!(M!=null&&M.isFlushing())?P.select(l,he):M?.handleUserSelect(he))}i&&(!ie||!Ce)&&P.deselect(l)}},100),[l,i,j]),G=x.useMemo(()=>Cl(F,0),[F]);T.current=Hc({node:O,onDOMSelectionChange:F,scheduleOnDOMSelectionChange:G}),Ye(()=>{var B,R,S;O.current&&(S=Gr(O.current))?(cu.set(l,S),xt.set(l,O.current),lt.set(l,O.current),Tt.set(O.current,l)):lt.delete(l);var{selection:M}=l,te=z.findDocumentOrShadowRoot(l),Y=Ft(te);if(!(!Y||!z.isFocused(l)||(B=T.current)!==null&&B!==void 0&&B.hasPendingAction())){var ve=ie=>{var Ce=Y.type!=="None";if(!(!M&&!Ce)){var he=Y.focusNode,we;if(gt&&Y.rangeCount>1){var Xe=Y.getRangeAt(0),dt=Y.getRangeAt(Y.rangeCount-1);Xe.startContainer===he?we=dt.endContainer:we=Xe.startContainer}else we=Y.anchorNode;var qe=xt.get(l),Je=!1;if(ot(qe,we)&&ot(qe,he)&&(Je=!0),Ce&&Je&&M&&!ie){var ke=z.toSlateRange(l,Y,{exactMatch:!0,suppressThrow:!0});if(ke&&y.equals(ke,M)){var ye;if(!j.hasMarkPlaceholder||(ye=we)!==null&&ye!==void 0&&(ye=ye.parentElement)!==null&&ye!==void 0&&ye.hasAttribute("data-slate-mark-placeholder"))return}}if(M&&!z.hasRange(l,M)){l.selection=z.toSlateRange(l,Y,{exactMatch:!1,suppressThrow:!0});return}j.isUpdatingSelection=!0;var be=null;try{be=M&&z.toDOMRange(l,M)}catch{}return be?(z.isComposing(l)&&!Oe?Y.collapseToEnd():y.isBackward(M)?Y.setBaseAndExtent(be.endContainer,be.endOffset,be.startContainer,be.startOffset):Y.setBaseAndExtent(be.startContainer,be.startOffset,be.endContainer,be.endOffset),D(l,be)):Y.removeAllRanges(),be}};Y.rangeCount<=1&&ve();var le=((R=T.current)===null||R===void 0?void 0:R.isFlushing())==="action";if(!Oe||!le){setTimeout(()=>{j.isUpdatingSelection=!1});return}var oe=null,Ee=requestAnimationFrame(()=>{if(le){var ie=Ce=>{try{var he=z.toDOMNode(l,l);he.focus(),ve(Ce)}catch{}};ie(),oe=setTimeout(()=>{ie(!0),j.isUpdatingSelection=!1})}});return()=>{cancelAnimationFrame(Ee),oe&&clearTimeout(oe)}}});var V=x.useCallback(B=>{qa(l,B);var R=z.toDOMNode(l,l),S=R.getRootNode();if(W!=null&&W.current&&st&&S instanceof ShadowRoot){var M=B.getTargetRanges(),te=M[0],Y=new window.Range;Y.setStart(te.startContainer,te.startOffset),Y.setEnd(te.endContainer,te.endOffset);var ve=z.toSlateRange(l,Y,{exactMatch:!1,suppressThrow:!1});P.select(l,ve),B.preventDefault(),B.stopImmediatePropagation();return}if($(),!i&&z.hasEditableTarget(l,B.target)&&!kf(B,u)){var le;if(T.current)return T.current.handleDOMBeforeInput(B);G.flush(),F.flush();var{selection:oe}=l,{inputType:Ee}=B,ie=B.dataTransfer||B.data||void 0,Ce=Ee==="insertCompositionText"||Ee==="deleteCompositionText";if(Ce&&z.isComposing(l))return;var he=!1;if(Ee==="insertText"&&oe&&y.isCollapsed(oe)&&B.data&&B.data.length===1&&/[a-z ]/i.test(B.data)&&oe.anchor.offset!==0&&(he=!0,l.marks&&(he=!1),!mt.get(l))){var we,Xe,{anchor:dt}=oe,[qe,Je]=z.toDOMPoint(l,dt),ke=(we=qe.parentElement)===null||we===void 0?void 0:we.closest("a"),ye=z.getWindow(l);if(he&&ke&&z.hasDOMNode(l,ke)){var be,ar=ye?.document.createTreeWalker(ke,NodeFilter.SHOW_TEXT).lastChild();ar===qe&&((be=ar.textContent)===null||be===void 0?void 0:be.length)===Je&&(he=!1)}if(he&&qe.parentElement&&(ye==null||(Xe=ye.getComputedStyle(qe.parentElement))===null||Xe===void 0?void 0:Xe.whiteSpace)==="pre"){var rn=o.above(l,{at:dt.path,match:sn=>J.isElement(sn)&&o.isBlock(l,sn)});rn&&H.string(rn[0]).includes("	")&&(he=!1)}}if((!Ee.startsWith("delete")||Ee.startsWith("deleteBy"))&&!mt.get(l)){var[nn]=B.getTargetRanges();if(nn){var an=z.toSlateRange(l,nn,{exactMatch:!1,suppressThrow:!1});if(!oe||!y.equals(oe,an)){he=!1;var un=!Ce&&l.selection&&o.rangeRef(l,l.selection);P.select(l,an),un&&Ot.set(l,un)}}}if(Ce)return;if(he||B.preventDefault(),oe&&y.isExpanded(oe)&&Ee.startsWith("delete")){var Ru=Ee.endsWith("Backward")?"backward":"forward";o.deleteFragment(l,{direction:Ru});return}switch(Ee){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":{o.deleteFragment(l);break}case"deleteContent":case"deleteContentForward":{o.deleteForward(l);break}case"deleteContentBackward":{o.deleteBackward(l);break}case"deleteEntireSoftLine":{o.deleteBackward(l,{unit:"line"}),o.deleteForward(l,{unit:"line"});break}case"deleteHardLineBackward":{o.deleteBackward(l,{unit:"block"});break}case"deleteSoftLineBackward":{o.deleteBackward(l,{unit:"line"});break}case"deleteHardLineForward":{o.deleteForward(l,{unit:"block"});break}case"deleteSoftLineForward":{o.deleteForward(l,{unit:"line"});break}case"deleteWordBackward":{o.deleteBackward(l,{unit:"word"});break}case"deleteWordForward":{o.deleteForward(l,{unit:"word"});break}case"insertLineBreak":o.insertSoftBreak(l);break;case"insertParagraph":{o.insertBreak(l);break}case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{Ee==="insertFromComposition"&&z.isComposing(l)&&(A(!1),it.set(l,!1)),ie?.constructor.name==="DataTransfer"?z.insertData(l,ie):typeof ie=="string"&&(he?k.current.push(()=>o.insertText(l,ie)):o.insertText(l,ie));break}}var ur=(le=Ot.get(l))===null||le===void 0?void 0:le.unref();Ot.delete(l),ur&&(!l.selection||!y.equals(l.selection,ur))&&P.select(l,ur)}},[l,F,$,u,i,G]),re=x.useCallback(B=>{B==null?(F.cancel(),G.cancel(),xt.delete(l),lt.delete(l),O.current&&Ze&&O.current.removeEventListener("beforeinput",V)):Ze&&B.addEventListener("beforeinput",V),O.current=B,typeof e=="function"?e(B):e&&(e.current=B)},[F,G,l,V,e]);Ye(()=>{var B=z.getWindow(l),R=M=>{var{target:te}=M,Y=te instanceof HTMLElement?te:null,ve=Y?.tagName;ve==="INPUT"||ve==="TEXTAREA"||G()};B.document.addEventListener("selectionchange",R);var S=()=>{j.isDraggingInternally=!1};return B.document.addEventListener("dragend",S),B.document.addEventListener("drop",S),()=>{B.document.removeEventListener("selectionchange",R),B.document.removeEventListener("dragend",S),B.document.removeEventListener("drop",S)}},[G,j]);var q=a([l,[]]),Z=tf(a),ne=s&&l.children.length===1&&Array.from(H.texts(l)).length===1&&H.string(l)===""&&!b,se=x.useCallback(B=>{if(B&&ne){var R;L((R=B.getBoundingClientRect())===null||R===void 0?void 0:R.height)}else L(void 0)},[ne]);if(ne){var U=o.start(l,[]);q.push({[Ct]:!0,placeholder:s,onPlaceholderResize:se,anchor:U,focus:U})}var{marks:ae}=l;if(j.hasMarkPlaceholder=!1,l.selection&&y.isCollapsed(l.selection)&&ae){var{anchor:De}=l.selection,pe=H.leaf(l,De.path),Fe=tr(pe,Of);if(!X.equals(pe,ae,{loose:!0})){j.hasMarkPlaceholder=!0;var Pe=Object.fromEntries(Object.keys(Fe).map(B=>[B,null]));q.push(Le(Le(Le({[du]:!0},Pe),ae),{},{anchor:De,focus:De}))}}return x.useEffect(()=>{setTimeout(()=>{var{selection:B}=l;if(B){var{anchor:R}=B,S=H.leaf(l,R.path);if(ae&&!X.equals(S,ae,{loose:!0})){Me.set(l,ae);return}}Me.delete(l)})}),Ef(),Q.createElement(Pu.Provider,{value:i},Q.createElement(yf.Provider,{value:b},Q.createElement(Au.Provider,{value:Z},Q.createElement(Ff,{node:O,receivedUserInput:K},Q.createElement(E,Le(Le({role:i?void 0:"textbox","aria-multiline":i?void 0:!0,translate:"no"},p),{},{spellCheck:Ze||!Yt?p.spellCheck:!1,autoCorrect:Ze||!Yt?p.autoCorrect:"false",autoCapitalize:Ze||!Yt?p.autoCapitalize:"false","data-slate-editor":!0,"data-slate-node":"value",contentEditable:!i,zindex:-1,suppressContentEditableWarning:!0,ref:re,style:Le(Le({},w?{}:Le({position:"relative",whiteSpace:"pre-wrap",wordWrap:"break-word"},I?{minHeight:I}:{})),C),onBeforeInput:x.useCallback(B=>{if(!Ze&&!i&&!Se(B,p.onBeforeInput)&&z.hasSelectableTarget(l,B.target)&&(B.preventDefault(),!z.isComposing(l))){var R=B.data;o.insertText(l,R)}},[p.onBeforeInput,l,i]),onInput:x.useCallback(B=>{if(!Se(B,p.onInput)){if(T.current){T.current.handleInput();return}for(var R of k.current)R();k.current=[],z.isFocused(l)||qa(l,B.nativeEvent)}},[p.onInput,l]),onBlur:x.useCallback(B=>{if(!(i||j.isUpdatingSelection||!z.hasSelectableTarget(l,B.target)||Se(B,p.onBlur))){var R=z.findDocumentOrShadowRoot(l);if(j.latestElement!==R.activeElement){var{relatedTarget:S}=B,M=z.toDOMNode(l,l);if(S!==M&&!(Te(S)&&S.hasAttribute("data-slate-spacer"))){if(S!=null&&rt(S)&&z.hasDOMNode(l,S)){var te=z.toSlateNode(l,S);if(J.isElement(te)&&!l.isVoid(te))return}if(st){var Y=Ft(R);Y?.removeAllRanges()}tt.delete(l)}}}},[i,j.isUpdatingSelection,j.latestElement,l,p.onBlur]),onClick:x.useCallback(B=>{if(z.hasTarget(l,B.target)&&!Se(B,p.onClick)&&rt(B.target)){var R=z.toSlateNode(l,B.target),S=z.findPath(l,R);if(!o.hasPath(l,S)||H.get(l,S)!==R)return;if(B.detail===ec&&S.length>=1){var M=S;if(!(J.isElement(R)&&o.isBlock(l,R))){var te,Y=o.above(l,{match:he=>J.isElement(he)&&o.isBlock(l,he),at:S});M=(te=Y?.[1])!==null&&te!==void 0?te:S.slice(0,1)}var ve=o.range(l,M);P.select(l,ve);return}if(i)return;var le=o.start(l,S),oe=o.end(l,S),Ee=o.void(l,{at:le}),ie=o.void(l,{at:oe});if(Ee&&ie&&g.equals(Ee[1],ie[1])){var Ce=o.range(l,le);P.select(l,Ce)}}},[l,p.onClick,i]),onCompositionEnd:x.useCallback(B=>{if(!Et(B)&&z.hasSelectableTarget(l,B.target)){var R;if(z.isComposing(l)&&Promise.resolve().then(()=>{A(!1),it.set(l,!1)}),(R=T.current)===null||R===void 0||R.handleCompositionEnd(B),Se(B,p.onCompositionEnd)||Oe)return;if(!st&&!$l&&!Il&&!ql&&!Wl&&B.data){var S=Me.get(l);Me.delete(l),S!==void 0&&(Ue.set(l,l.marks),l.marks=S),o.insertText(l,B.data);var M=Ue.get(l);Ue.delete(l),M!==void 0&&(l.marks=M)}}},[p.onCompositionEnd,l]),onCompositionUpdate:x.useCallback(B=>{z.hasSelectableTarget(l,B.target)&&!Se(B,p.onCompositionUpdate)&&!Et(B)&&(z.isComposing(l)||(A(!0),it.set(l,!0)))},[p.onCompositionUpdate,l]),onCompositionStart:x.useCallback(B=>{if(!Et(B)&&z.hasSelectableTarget(l,B.target)){var R;if((R=T.current)===null||R===void 0||R.handleCompositionStart(B),Se(B,p.onCompositionStart)||Oe)return;A(!0);var{selection:S}=l;if(S&&y.isExpanded(S)){o.deleteFragment(l);return}}},[p.onCompositionStart,l]),onCopy:x.useCallback(B=>{z.hasSelectableTarget(l,B.target)&&!Se(B,p.onCopy)&&!Et(B)&&(B.preventDefault(),z.setFragmentData(l,B.clipboardData,"copy"))},[p.onCopy,l]),onCut:x.useCallback(B=>{if(!i&&z.hasSelectableTarget(l,B.target)&&!Se(B,p.onCut)&&!Et(B)){B.preventDefault(),z.setFragmentData(l,B.clipboardData,"cut");var{selection:R}=l;if(R)if(y.isExpanded(R))o.deleteFragment(l);else{var S=H.parent(l,R.anchor.path);o.isVoid(l,S)&&P.delete(l)}}},[i,l,p.onCut]),onDragOver:x.useCallback(B=>{if(z.hasTarget(l,B.target)&&!Se(B,p.onDragOver)){var R=z.toSlateNode(l,B.target);J.isElement(R)&&o.isVoid(l,R)&&B.preventDefault()}},[p.onDragOver,l]),onDragStart:x.useCallback(B=>{if(!i&&z.hasTarget(l,B.target)&&!Se(B,p.onDragStart)){var R=z.toSlateNode(l,B.target),S=z.findPath(l,R),M=J.isElement(R)&&o.isVoid(l,R)||o.void(l,{at:S,voids:!0});if(M){var te=o.range(l,S);P.select(l,te)}j.isDraggingInternally=!0,z.setFragmentData(l,B.dataTransfer,"drag")}},[i,l,p.onDragStart,j]),onDrop:x.useCallback(B=>{if(!i&&z.hasTarget(l,B.target)&&!Se(B,p.onDrop)){B.preventDefault();var R=l.selection,S=z.findEventRange(l,B),M=B.dataTransfer;P.select(l,S),j.isDraggingInternally&&R&&!y.equals(R,S)&&!o.void(l,{at:S,voids:!0})&&P.delete(l,{at:R}),z.insertData(l,M),z.isFocused(l)||z.focus(l)}},[i,l,p.onDrop,j]),onDragEnd:x.useCallback(B=>{!i&&j.isDraggingInternally&&p.onDragEnd&&z.hasTarget(l,B.target)&&p.onDragEnd(B)},[i,j,p,l]),onFocus:x.useCallback(B=>{if(!i&&!j.isUpdatingSelection&&z.hasEditableTarget(l,B.target)&&!Se(B,p.onFocus)){var R=z.toDOMNode(l,l),S=z.findDocumentOrShadowRoot(l);if(j.latestElement=S.activeElement,gt&&B.target!==R){R.focus();return}tt.set(l,!0)}},[i,j,l,p.onFocus]),onKeyDown:x.useCallback(B=>{if(!i&&z.hasEditableTarget(l,B.target)){var R;(R=T.current)===null||R===void 0||R.handleKeyDown(B);var{nativeEvent:S}=B;if(z.isComposing(l)&&S.isComposing===!1&&(it.set(l,!1),A(!1)),Se(B,p.onKeyDown)||z.isComposing(l))return;var{selection:M}=l,te=l.children[M!==null?M.focus.path[0]:0],Y=eu(H.string(te))==="rtl";if(ge.isRedo(S)){B.preventDefault();var ve=l;typeof ve.redo=="function"&&ve.redo();return}if(ge.isUndo(S)){B.preventDefault();var le=l;typeof le.undo=="function"&&le.undo();return}if(ge.isMoveLineBackward(S)){B.preventDefault(),P.move(l,{unit:"line",reverse:!0});return}if(ge.isMoveLineForward(S)){B.preventDefault(),P.move(l,{unit:"line"});return}if(ge.isExtendLineBackward(S)){B.preventDefault(),P.move(l,{unit:"line",edge:"focus",reverse:!0});return}if(ge.isExtendLineForward(S)){B.preventDefault(),P.move(l,{unit:"line",edge:"focus"});return}if(ge.isMoveBackward(S)){B.preventDefault(),M&&y.isCollapsed(M)?P.move(l,{reverse:!Y}):P.collapse(l,{edge:Y?"end":"start"});return}if(ge.isMoveForward(S)){B.preventDefault(),M&&y.isCollapsed(M)?P.move(l,{reverse:Y}):P.collapse(l,{edge:Y?"start":"end"});return}if(ge.isMoveWordBackward(S)){B.preventDefault(),M&&y.isExpanded(M)&&P.collapse(l,{edge:"focus"}),P.move(l,{unit:"word",reverse:!Y});return}if(ge.isMoveWordForward(S)){B.preventDefault(),M&&y.isExpanded(M)&&P.collapse(l,{edge:"focus"}),P.move(l,{unit:"word",reverse:Y});return}if(Ze){if((Xr||st)&&M&&(ge.isDeleteBackward(S)||ge.isDeleteForward(S))&&y.isCollapsed(M)){var oe=H.parent(l,M.anchor.path);if(J.isElement(oe)&&o.isVoid(l,oe)&&(o.isInline(l,oe)||o.isBlock(l,oe))){B.preventDefault(),o.deleteBackward(l,{unit:"block"});return}}}else{if(ge.isBold(S)||ge.isItalic(S)||ge.isTransposeCharacter(S)){B.preventDefault();return}if(ge.isSoftBreak(S)){B.preventDefault(),o.insertSoftBreak(l);return}if(ge.isSplitBlock(S)){B.preventDefault(),o.insertBreak(l);return}if(ge.isDeleteBackward(S)){B.preventDefault(),M&&y.isExpanded(M)?o.deleteFragment(l,{direction:"backward"}):o.deleteBackward(l);return}if(ge.isDeleteForward(S)){B.preventDefault(),M&&y.isExpanded(M)?o.deleteFragment(l,{direction:"forward"}):o.deleteForward(l);return}if(ge.isDeleteLineBackward(S)){B.preventDefault(),M&&y.isExpanded(M)?o.deleteFragment(l,{direction:"backward"}):o.deleteBackward(l,{unit:"line"});return}if(ge.isDeleteLineForward(S)){B.preventDefault(),M&&y.isExpanded(M)?o.deleteFragment(l,{direction:"forward"}):o.deleteForward(l,{unit:"line"});return}if(ge.isDeleteWordBackward(S)){B.preventDefault(),M&&y.isExpanded(M)?o.deleteFragment(l,{direction:"backward"}):o.deleteBackward(l,{unit:"word"});return}if(ge.isDeleteWordForward(S)){B.preventDefault(),M&&y.isExpanded(M)?o.deleteFragment(l,{direction:"forward"}):o.deleteForward(l,{unit:"word"});return}}}},[i,l,p.onKeyDown]),onPaste:x.useCallback(B=>{!i&&z.hasEditableTarget(l,B.target)&&!Se(B,p.onPaste)&&(!Ze||jl(B.nativeEvent)||st)&&(B.preventDefault(),z.insertData(l,B.clipboardData))},[i,l,p.onPaste])}),Q.createElement(jf,{decorations:q,node:l,renderElement:f,renderChunk:c,renderPlaceholder:v,renderLeaf:d,renderText:h}))))))}),Pf=t=>{var{attributes:e,children:r}=t;return Q.createElement("span",Le({},e),r,Oe&&Q.createElement("br",null))},Nf=()=>[],Tf=(t,e)=>{var r=!!t.selection&&y.isBackward(t.selection),n=e.cloneRange();if(n.collapse(r),n.getBoundingClientRect){var a=n.startContainer.parentElement,u=n.getBoundingClientRect(),s=u.width===0&&u.height===0&&u.x===0&&u.y===0;if(s){var i=a.getBoundingClientRect(),f=i.width>0||i.height>0;if(f)return}a.getBoundingClientRect=n.getBoundingClientRect.bind(n),Fl(a,{scrollMode:"if-needed"}),delete a.getBoundingClientRect}},Se=(t,e)=>{if(!e)return!1;var r=e(t);return r??(t.isDefaultPrevented()||t.isPropagationStopped())},Et=t=>rt(t.target)&&(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement),kf=(t,e)=>{if(!e)return!1;var r=e(t);return r??t.defaultPrevented},qa=(t,e)=>{var r=t;if(e.inputType==="historyUndo"&&typeof r.undo=="function"){r.undo();return}if(e.inputType==="historyRedo"&&typeof r.redo=="function"){r.redo();return}},Rf=x.createContext(!1),ku=parseInt(Q.version.split(".")[0],10),Mf=["editor","children","onChange","onSelectionChange","onValueChange","initialValue"],If=t=>{var{editor:e,children:r,onChange:n,onSelectionChange:a,onValueChange:u,initialValue:s}=t,i=tr(t,Mf);Q.useState(()=>{if(!H.isNodeList(s))throw new Error("[Slate] initialValue is invalid! Expected a list of elements but got: ".concat(Be.stringify(s)));if(!o.isEditor(e))throw new Error("[Slate] editor is invalid! You passed: ".concat(Be.stringify(e)));e.children=s,Object.assign(e,i)});var{selectorContext:f,onChange:c}=Bf(),d=x.useCallback(()=>{n&&n(e.children),a&&e.operations.find(D=>D.type==="set_selection")&&a(e.selection),u&&e.operations.find(D=>D.type!=="set_selection")&&u(e.children),c()},[e,c,n,a,u]);x.useEffect(()=>(Ir.set(e,d),()=>{Ir.set(e,()=>{})}),[e,d]);var[h,v]=x.useState(z.isFocused(e));return x.useEffect(()=>{v(z.isFocused(e))},[e]),Ye(()=>{var D=()=>v(z.isFocused(e));return ku>=17?(document.addEventListener("focusin",D),document.addEventListener("focusout",D),()=>{document.removeEventListener("focusin",D),document.removeEventListener("focusout",D)}):(document.addEventListener("focus",D,!0),document.addEventListener("blur",D,!0),()=>{document.removeEventListener("focus",D,!0),document.removeEventListener("blur",D,!0)})},[]),Q.createElement(tn.Provider,{value:f},Q.createElement(en.Provider,{value:e},Q.createElement(Rf.Provider,{value:h},r)))},Lf=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"x-slate-fragment",n=e;n=_l(n,r);var{onChange:a,apply:u,insertText:s}=n;return n.getChunkSize=()=>null,Oe&&(n.insertText=(i,f)=>(Ve.delete(n),s(i,f))),n.onChange=i=>{var f=ku<18?as.unstable_batchedUpdates:c=>c();f(()=>{a(i)})},n.apply=i=>{if(i.type==="move_node"){var f=H.parent(n,i.path),c=!!n.getChunkSize(f);if(c){var d=H.get(n,i.path),h=Ou(n,f),v=z.findKey(n,d);h.movedNodeKeys.add(v)}}u(i)},n};function Ha(t){return Object.prototype.toString.call(t)==="[object Object]"}function zf(t){var e,r;return Ha(t)===!1?!1:(e=t.constructor,e===void 0?!0:(r=e.prototype,!(Ha(r)===!1||r.hasOwnProperty("isPrototypeOf")===!1)))}var $f={isHistory(t){return zf(t)&&Array.isArray(t.redos)&&Array.isArray(t.undos)&&(t.redos.length===0||et.isOperationList(t.redos[0].operations))&&(t.undos.length===0||et.isOperationList(t.undos[0].operations))}},Or=new WeakMap,at=new WeakMap,Vt=new WeakMap,ze={isHistoryEditor(t){return $f.isHistory(t.history)&&o.isEditor(t)},isMerging(t){return at.get(t)},isSplittingOnce(t){return Vt.get(t)},setSplittingOnce(t,e){Vt.set(t,e)},isSaving(t){return Or.get(t)},redo(t){t.redo()},undo(t){t.undo()},withMerging(t,e){var r=ze.isMerging(t);at.set(t,!0),e(),at.set(t,r)},withNewBatch(t,e){var r=ze.isMerging(t);at.set(t,!0),Vt.set(t,!0),e(),at.set(t,r),Vt.delete(t)},withoutMerging(t,e){var r=ze.isMerging(t);at.set(t,!1),e(),at.set(t,r)},withoutSaving(t,e){var r=ze.isSaving(t);Or.set(t,!1);try{e()}finally{Or.set(t,r)}}},Wf=t=>{var e=t,{apply:r}=e;return e.history={undos:[],redos:[]},e.redo=()=>{var{history:n}=e,{redos:a}=n;if(a.length>0){var u=a[a.length-1];u.selectionBefore&&P.setSelection(e,u.selectionBefore),ze.withoutSaving(e,()=>{o.withoutNormalizing(e,()=>{for(var s of u.operations)e.apply(s)})}),n.redos.pop(),e.writeHistory("undos",u)}},e.undo=()=>{var{history:n}=e,{undos:a}=n;if(a.length>0){var u=a[a.length-1];ze.withoutSaving(e,()=>{o.withoutNormalizing(e,()=>{var s=u.operations.map(et.inverse).reverse();for(var i of s)e.apply(i);u.selectionBefore&&P.setSelection(e,u.selectionBefore)})}),e.writeHistory("redos",u),n.undos.pop()}},e.apply=n=>{var{operations:a,history:u}=e,{undos:s}=u,i=s[s.length-1],f=i&&i.operations[i.operations.length-1],c=ze.isSaving(e),d=ze.isMerging(e);if(c==null&&(c=Hf(n)),c){if(d==null&&(i==null?d=!1:a.length!==0?d=!0:d=qf(n,f)),ze.isSplittingOnce(e)&&(d=!1,ze.setSplittingOnce(e,void 0)),i&&d)i.operations.push(n);else{var h={operations:[n],selectionBefore:e.selection};e.writeHistory("undos",h)}for(;s.length>100;)s.shift();u.redos=[]}r(n)},e.writeHistory=(n,a)=>{e.history[n].push(a)},e},qf=(t,e)=>!!(e&&t.type==="insert_text"&&e.type==="insert_text"&&t.offset===e.offset+e.text.length&&g.equals(t.path,e.path)||e&&t.type==="remove_text"&&e.type==="remove_text"&&t.offset+t.text.length===e.offset&&g.equals(t.path,e.path)),Hf=(t,e)=>t.type!=="set_selection";const Kf={type:"paragraph",children:[{text:""}]},Vf=({attributes:t,children:e,leaf:r})=>(r.bold&&(e=m.jsx("strong",{children:e})),r.italic&&(e=m.jsx("em",{children:e})),r.underline&&(e=m.jsx("u",{children:e})),r.code&&(e=m.jsx("code",{children:e})),m.jsx("span",{...t,children:e})),Uf=({attributes:t,children:e,element:r})=>{switch(r.type){case"block-quote":return m.jsx("blockquote",{className:"border-l-4 border-gray-500 pl-4 italic",...t,children:e});case"bulleted-list":return m.jsx("ul",{className:"list-disc list-inside",...t,children:e});case"heading-one":return m.jsx("h1",{className:"text-3xl font-bold",...t,children:e});case"heading-two":return m.jsx("h2",{className:"text-2xl font-bold",...t,children:e});case"list-item":return m.jsx("li",{...t,children:e});case"numbered-list":return m.jsx("ol",{className:"list-decimal list-inside",...t,children:e});case"link":return m.jsx("a",{href:r.url,className:"text-blue-400 underline",...t,children:e});default:return m.jsx("p",{...t,children:e})}},Ka=(t,e)=>{const{selection:r}=t;if(!r)return!1;const[n]=o.nodes(t,{at:o.unhangRange(t,r),match:a=>!o.isEditor(a)&&J.isElement(a)&&a.type===e});return!!n},Va=(t,e)=>{const r=o.marks(t);return r?r[e]===!0:!1},Ke=({format:t,icon:e,tooltip:r})=>{const n=Nu(),u=["bold","italic","underline","code"].includes(t),s=u?Va(n,t):Ka(n,t),i=(h,v)=>{Va(h,v)?o.removeMark(h,v):o.addMark(h,v,!0)},f=(h,v)=>{const D=Ka(h,v),C=["numbered-list","bulleted-list"].includes(v);P.unwrapNodes(h,{match:w=>!o.isEditor(w)&&J.isElement(w)&&["numbered-list","bulleted-list"].includes(w.type),split:!0});const E={type:D?"paragraph":C?"list-item":v};if(P.setNodes(h,E),!D&&C){const w={type:v,children:[]};P.wrapNodes(h,w)}},c=h=>{h.preventDefault(),u?i(n,t):f(n,t)},d=e;return m.jsx("button",{type:"button",onMouseDown:c,className:`p-2 rounded hover:bg-gray-600 ${s?"bg-gray-500":""}`,title:r,children:m.jsx(d,{size:16})})},Gf=({value:t,onChange:e})=>{const r=x.useMemo(()=>Wf(Lf(ul())),[]),n=x.useCallback(s=>m.jsx(Uf,{...s}),[]),a=x.useCallback(s=>m.jsx(Vf,{...s}),[]),u=x.useMemo(()=>t.length>0?t:[Kf],[t]);return m.jsx(If,{editor:r,initialValue:u,onChange:e,children:m.jsxs("div",{className:"bg-gray-800 rounded-md border border-gray-700",children:[m.jsxs("div",{className:"p-2 flex gap-1 border-b border-gray-700 text-white",children:[m.jsx(Ke,{format:"bold",icon:ss,tooltip:"Bold"}),m.jsx(Ke,{format:"italic",icon:bs,tooltip:"Italic"}),m.jsx(Ke,{format:"underline",icon:Ms,tooltip:"Underline"}),m.jsx(Ke,{format:"code",icon:os,tooltip:"Code"}),m.jsx(Ke,{format:"heading-one",icon:Ds,tooltip:"Heading 1"}),m.jsx(Ke,{format:"heading-two",icon:ps,tooltip:"Heading 2"}),m.jsx(Ke,{format:"block-quote",icon:ks,tooltip:"Quote"}),m.jsx(Ke,{format:"numbered-list",icon:As,tooltip:"Numbered List"}),m.jsx(Ke,{format:"bulleted-list",icon:ys,tooltip:"Bulleted List"})]}),m.jsx(Sf,{renderElement:n,renderLeaf:a,className:"w-full p-4 bg-gray-700 text-white rounded-b-md min-h-[200px]",placeholder:"Start writing your story...",autoFocus:!0})]})})};function Yf({postData:t,onClose:e}){const r=x.useMemo(()=>Xu.sanitize(t.content,{USE_PROFILES:{html:!0}}),[t.content]);return x.useEffect(()=>{if(r){const n=document.getElementById("preview-content");n&&n.querySelectorAll("pre code").forEach(a=>{Ju.highlightElement(a)})}},[r]),m.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",children:m.jsxs("div",{className:"bg-background rounded-2xl w-full max-w-5xl h-[90vh] relative overflow-hidden flex flex-col",children:[m.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-border/10",children:[m.jsx("h2",{className:"text-xl font-bold",children:"Post Preview"}),m.jsx($e,{variant:"ghost",size:"icon",onClick:e,children:m.jsx(bt,{})})]}),m.jsx("div",{className:"overflow-y-auto p-8 scrollbar-thin scrollbar-thumb-accent/50 scrollbar-track-surface/10",children:m.jsx("div",{className:"max-w-4xl mx-auto",children:m.jsxs("article",{children:[m.jsxs("header",{className:"mb-8",children:[m.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-text leading-tight mb-3",children:t.title}),t.readTime&&m.jsxs("div",{className:"flex items-center gap-2 text-muted text-sm mt-4",children:[m.jsx(Xa,{size:16}),m.jsxs("span",{children:[t.readTime," min read"]})]})]}),m.jsxs(Ut,{className:"p-12",children:[m.jsx("div",{className:"flex items-center justify-between text-muted border-b border-border/10 pb-4 mb-8",children:m.jsxs("div",{className:"flex items-center gap-6",children:[m.jsxs("span",{className:"flex items-center gap-2",children:[m.jsx(Iu,{size:18}),m.jsx("span",{className:"font-medium text-text",children:t.authorName||"Chiari Voices Admin"})]}),m.jsxs("span",{className:"flex items-center gap-2",children:[m.jsx(Zu,{size:18}),m.jsx("span",{children:t.createdAt?.seconds?cn(new Date(t.createdAt.seconds*1e3),"MMMM d, yyyy"):cn(new Date,"MMMM d, yyyy")})]})]})}),t.imageUrl&&m.jsx("img",{src:t.imageUrl,alt:t.title,className:"w-full h-auto object-cover rounded-xl mb-8"}),m.jsx("div",{id:"preview-content",className:"prose prose-invert prose-lg max-w-none mx-auto text-text/90 prose-headings:text-text prose-a:text-accent prose-strong:text-text prose-blockquote:border-accent",dangerouslySetInnerHTML:{__html:r}}),t.tags&&t.tags.length>0&&m.jsxs("div",{className:"mt-8 pt-6 border-t border-border/10 flex flex-wrap items-center gap-3",children:[m.jsx("span",{className:"font-semibold text-text",children:m.jsx(Qu,{size:16})}),t.tags.map(n=>m.jsx("span",{className:"px-3 py-1 text-sm rounded-full bg-accent/10 text-accent",children:n},n))]})]})]})})})]})})}const Ua=t=>t.map(e=>H.string(e)).join(`
`),Xf={type:"paragraph",children:[{text:""}]},jr=[Xf],Ga=t=>t.toLowerCase().replace(/[^a-z0-9\s-]/g,"").trim().replace(/\s+/g,"-").replace(/-+/g,"-");function Jf({post:t,onClose:e}){const{user:r}=Lu(),[n,a]=x.useState(!1),[u,s]=x.useState(""),[i,f]=x.useState(jr),[c,d]=x.useState([]),[h,v]=x.useState(""),[D,C]=x.useState(""),[E,w]=x.useState("draft"),[p,l]=x.useState(0),[b,A]=x.useState(!1),[O,k]=x.useState(""),[I,L]=x.useState(""),[W,$]=x.useState(""),[K,N]=x.useState(""),[j,T]=x.useState("");x.useEffect(()=>{if(t){s(t.title);try{if(t.content){const q=JSON.parse(t.content);f(q)}}catch(q){console.error("Error parsing content:",q),f(jr)}d(t.tags||[]),C(t.imageUrl||""),w(t.status),l(t.readTime||0),k(t.metaTitle||""),L(t.metaDescription||""),$(t.slug||""),N(t.primaryKeyword||""),T((t.secondaryKeywords||[]).join(", "))}else s(""),f(jr),d([]),v(""),C(""),w("draft"),l(0),k(""),L(""),$(""),N(""),T("")},[t]),x.useEffect(()=>{u&&!t&&$(Ga(u))},[u,t]),x.useEffect(()=>{const q=Ua(i),Z=Ls(q);l(Z)},[i]);const F=async q=>{if(!r||!u.trim())return alert("Title is required.");a(!0);const Z=q?"published":"draft";w(Z);const se=Ua(i).slice(0,150)+"...",U={title:u,content:JSON.stringify(i),excerpt:se,tags:c,imageUrl:D,status:Z,readTime:p,authorId:r.uid,authorName:"Chiari Voices Admin",updatedAt:Pr(),metaTitle:O||u,metaDescription:I,slug:W||Ga(u),primaryKeyword:K,secondaryKeywords:j.split(",").map(ae=>ae.trim()).filter(Boolean)};try{t?await Ya(Sr(wt,"posts",t.id),U):await $u(Sr(Nr(wt,"posts")),{...U,createdAt:Pr(),featured:!1}),alert(`Post ${Z} successfully!`),e()}catch(ae){console.error("Error saving post:",ae)}finally{a(!1)}},G=async q=>{if(!q.target.files?.[0])return;a(!0);const Z=q.target.files[0],ne=Wu(qu,`blog_images/${Date.now()}_${Z.name}`);try{await Hu(ne,Z),C(await Ku(ne))}catch(se){console.error("Error uploading image:",se)}finally{a(!1)}},V=q=>{q.key==="Enter"&&h.trim()&&(q.preventDefault(),c.includes(h.trim())||d([...c,h.trim()]),v(""))},re=q=>d(c.filter(Z=>Z!==q));return m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"p-8 overflow-y-auto h-full scrollbar-thin scrollbar-thumb-accent/50 scrollbar-track-surface/10",children:m.jsxs("form",{onSubmit:q=>{q.preventDefault(),F(!0)},className:"space-y-6",children:[m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h2",{className:"text-2xl font-bold text-white",children:t?"Edit Post":"Create New Post"}),m.jsx($e,{variant:"destructive",size:"icon",onClick:e,children:m.jsx(bt,{})})]}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[m.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[m.jsx(Qe,{label:"Post Title",value:u,onChange:q=>s(q.target.value),required:!0}),m.jsx(Gf,{value:i,onChange:f}),m.jsxs("div",{className:"pt-6 border-t border-surface/10",children:[m.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"SEO Settings"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsx(Qe,{label:"Meta Title",value:O,onChange:q=>k(q.target.value)}),m.jsx(Qe,{label:"Meta Description",value:I,onChange:q=>L(q.target.value)}),m.jsx(Qe,{label:"Slug",value:W,onChange:q=>$(q.target.value)}),m.jsx(Qe,{label:"Primary Keyword",value:K,onChange:q=>N(q.target.value)}),m.jsx(Qe,{label:"Secondary Keywords",value:j,onChange:q=>T(q.target.value),placeholder:"Comma, separated"})]})]})]}),m.jsxs("div",{className:"space-y-6",children:[m.jsxs(Ut,{className:"p-4",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("h3",{className:"font-bold text-white",children:"Actions"}),m.jsx("span",{className:"text-sm text-surface/60 capitalize",children:E})]}),m.jsxs("div",{className:"flex flex-col gap-2",children:[m.jsxs($e,{type:"button",variant:"outline",onClick:()=>A(!0),disabled:n,className:"w-full flex items-center gap-2",children:[m.jsx(cs,{size:16})," Preview"]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx($e,{type:"button",variant:"secondary",onClick:()=>F(!1),disabled:n,className:"w-full",children:n?"Saving...":"Save Draft"}),m.jsx($e,{type:"submit",disabled:n,className:"w-full",children:n?"Publishing...":"Publish"})]}),m.jsx($e,{type:"button",variant:"ghost",onClick:e,className:"w-full",children:"Close"})]})]}),m.jsxs(Ut,{className:"p-4",children:[m.jsx("label",{className:"text-sm font-medium text-white",children:"Cover Image"}),m.jsx("div",{className:"relative h-40 mt-2 border-2 border-dashed border-accent/30 rounded-lg flex items-center justify-center bg-surface/10",children:D?m.jsxs(m.Fragment,{children:[m.jsx("img",{src:D,alt:"Cover",className:"w-full h-full object-cover rounded-md"}),m.jsx("button",{type:"button",onClick:()=>C(""),className:"absolute top-2 right-2 bg-black/50 p-1 rounded-full",children:m.jsx(bt,{size:14})})]}):m.jsxs("label",{className:"cursor-pointer flex flex-col items-center p-4 w-full h-full justify-center text-surface/60 hover:text-white",children:[m.jsx(Bs,{className:"mb-2"}),m.jsx("span",{children:"Click to upload"}),m.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:G})]})})]}),m.jsxs(Ut,{className:"p-4",children:[m.jsx("label",{className:"text-sm font-medium text-white",children:"Tags"}),m.jsx(Qe,{placeholder:"Type & press Enter...",value:h,onChange:q=>v(q.target.value),onKeyDown:V,className:"mt-2"}),m.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:c.map(q=>m.jsxs("span",{className:"px-2 py-1 rounded-md bg-accent/20 text-xs text-white",children:[q,m.jsx("button",{type:"button",onClick:()=>re(q),className:"ml-1 text-white/70 hover:text-white",children:m.jsx(bt,{size:12})})]},q))})]}),m.jsxs("div",{className:"text-center text-surface/60 flex items-center justify-center gap-2",children:[m.jsx(Xa,{size:14}),m.jsxs("span",{children:["~",p," min read"]})]})]})]})]})}),b&&m.jsx(Yf,{postData:{title:u,content:JSON.stringify(i),tags:c,imageUrl:D,readTime:p,authorName:"Chiari Voices Admin",createdAt:t?.createdAt||zu.now()},onClose:()=>A(!1)})]})}function nd(){const{user:t,isModerator:e,loading:r}=Vu(),n=Uu(),[a,u]=x.useState([]),[s,i]=x.useState([]),[f,c]=x.useState(null),[d,h]=x.useState(!1),[v,D]=x.useState(!0),[C,E]=x.useState("all"),[w,p]=x.useState(""),[l,b]=x.useState([]),A=e;x.useEffect(()=>{r||(A?O():setTimeout(()=>n("/"),3e3))},[t,r,A,n]);const O=async()=>{D(!0);try{const F=Gu(Nr(wt,"posts"),Yu("createdAt","desc")),G=Nr(wt,"comments"),[V,re]=await Promise.all([on(F),on(G)]),q=V.docs.map(Z=>({id:Z.id,...Z.data()}));u(q),i(re.docs.map(Z=>({id:Z.id,...Z.data()})))}catch(F){console.error("Error fetching dashboard data:",F)}finally{D(!1)}},k=async F=>{if(window.confirm("Are you sure you want to move this post to the trash?"))try{const G=Sr(wt,"posts",F);await Ya(G,{status:"trashed",trashedAt:Pr()}),O()}catch(G){console.error("Error moving post to trash:",G),alert("An error occurred while moving the post to the trash.")}},I=()=>{c(null),h(!0)},L=F=>{h(!1),c(F)},W=()=>{c(null),h(!1),O()},$=x.useMemo(()=>({totalPosts:a.filter(F=>F.status!=="trashed").length,publishedPosts:a.filter(F=>F.status==="published").length,draftPosts:a.filter(F=>F.status==="draft").length,trashedPosts:a.filter(F=>F.status==="trashed").length,totalComments:s.length,reportedComments:s.filter(F=>F.reported).length}),[a,s]),K=x.useMemo(()=>{const F=new Set;return a.forEach(G=>{G.tags?.forEach(V=>F.add(V))}),Array.from(F).sort()},[a]),N=F=>{b(G=>G.includes(F)?G.filter(V=>V!==F):[...G,F])},j=x.useMemo(()=>{const F=a.filter(G=>G.status!=="trashed");return C==="all"?F:F.filter(G=>G.status===C).filter(G=>G.title.toLowerCase().includes(w.toLowerCase())).filter(G=>l.length===0||l.every(V=>G.tags?.includes(V)))},[a,C,w,l]);if(r||v&&A)return m.jsx("div",{className:"flex justify-center items-center h-[50vh]",children:m.jsx(_u,{className:"animate-spin text-accent",size:40})});if(!A)return m.jsxs("div",{className:"flex flex-col justify-center items-center h-[50vh] text-center",children:[m.jsx(es,{className:"text-red-400 mb-4",size:48}),m.jsx("h1",{className:"text-3xl font-bold",children:"Access Denied"}),m.jsx("p",{className:"text-muted mt-2",children:"You do not have permission to view this page. Redirecting..."})]});const T=d||f!==null;return m.jsxs("div",{className:"flex gap-8 h-full",children:[m.jsx("div",{className:nt("w-full transition-all duration-300",T?"lg:w-1/3":"w-full"),children:m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("h1",{className:"text-3xl font-bold text-surface",children:"Dashboard"}),m.jsxs($e,{onClick:I,children:[m.jsx(Ns,{size:18})," New Post"]})]}),m.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-5",children:[m.jsxs("button",{onClick:()=>E("all"),className:nt("text-left p-4 rounded-xl bg-surface/5 border border-surface/10 transition-colors",C==="all"&&"border-accent"),children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("h3",{className:"font-bold",children:"Total Posts"}),m.jsx(ds,{className:"text-surface/60"})]}),m.jsx("p",{className:"text-2xl font-bold",children:$.totalPosts})]}),m.jsxs("button",{onClick:()=>E("published"),className:nt("text-left p-4 rounded-xl bg-surface/5 border border-surface/10 transition-colors",C==="published"&&"border-accent"),children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("h3",{className:"font-bold",children:"Published"}),m.jsx(ts,{className:"text-green-400"})]}),m.jsx("p",{className:"text-2xl font-bold",children:$.publishedPosts})]}),m.jsxs("button",{onClick:()=>E("draft"),className:nt("text-left p-4 rounded-xl bg-surface/5 border border-surface/10 transition-colors",C==="draft"&&"border-accent"),children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("h3",{className:"font-bold",children:"Drafts"}),m.jsx(Ss,{className:"text-yellow-400"})]}),m.jsx("p",{className:"text-2xl font-bold",children:$.draftPosts})]}),m.jsxs(ln,{to:"/admin/trash",className:"block p-4 rounded-xl bg-surface/5 border border-surface/10 transition-colors hover:border-accent/70",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("h3",{className:"font-bold",children:"Trash"}),m.jsx(fn,{className:"text-red-400"})]}),m.jsx("p",{className:"text-2xl font-bold",children:$.trashedPosts})]}),m.jsxs(ln,{to:"/admin/comments",className:"block p-4 rounded-xl bg-surface/5 border border-surface/10 transition-colors hover:border-accent/70",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("h3",{className:"font-bold",children:"Reported"}),m.jsx(hs,{className:"text-red-400"})]}),m.jsx("p",{className:"text-2xl font-bold",children:$.reportedComments})]})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsx("h2",{className:"text-2xl font-bold text-surface",children:"All Posts"}),m.jsx("div",{className:"flex gap-4",children:m.jsxs("div",{className:"relative flex-grow",children:[m.jsx(Qe,{placeholder:"Search by title...",value:w,onChange:F=>p(F.target.value),className:"pl-10"}),m.jsx(rs,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-surface/60",size:20})]})}),m.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[m.jsx("span",{className:"text-sm font-medium text-surface/80 mr-2",children:"Filter by tag:"}),K.length>0?m.jsxs(m.Fragment,{children:[K.map(F=>m.jsx("button",{onClick:()=>N(F),className:nt("px-2.5 py-1 text-xs rounded-full transition-colors",l.includes(F)?"bg-accent text-background":"bg-surface/10 hover:bg-surface/20"),children:F},F)),l.length>0&&m.jsxs($e,{variant:"ghost",size:"sm",onClick:()=>b([]),className:"flex items-center gap-1 text-accent",children:[m.jsx(bt,{size:14}),"Clear"]})]}):m.jsx("p",{className:"text-sm text-surface/60",children:"No tags found. Add tags to posts to enable filtering."})]}),m.jsxs("div",{className:"bg-surface/5 rounded-lg overflow-hidden",children:[m.jsxs("div",{className:"flex items-center px-4 py-2 font-bold bg-surface/10 text-sm text-surface/80",children:[m.jsx("div",{className:"flex-grow",children:"Title"}),m.jsx("div",{className:"w-28 text-center",children:"Status"}),m.jsx("div",{className:"w-32 text-center",children:"Actions"})]}),m.jsx("div",{className:"divide-y divide-surface/10",children:j.length>0?j.map(F=>m.jsxs("div",{className:"flex items-center px-4 py-3 group hover:bg-surface/10 transition-colors",children:[m.jsx("div",{className:"flex-grow min-w-0",children:m.jsx("p",{className:"font-medium text-surface truncate group-hover:underline",children:F.title})}),m.jsx("div",{className:"w-28 text-center",children:m.jsx("span",{className:nt("px-2 py-1 text-xs rounded-full font-medium",F.status==="published"?"bg-green-400/10 text-green-300":"bg-yellow-400/10 text-yellow-300"),children:F.status})}),m.jsxs("div",{className:"w-32 flex justify-center gap-1",children:[m.jsx($e,{variant:"ghost",size:"icon",onClick:()=>L(F),className:"h-8 w-8",children:m.jsx(Os,{size:16})}),m.jsx($e,{variant:"ghost",size:"icon",onClick:()=>k(F.id),className:"h-8 w-8 text-red-400/70 hover:text-red-400",children:m.jsx(fn,{size:16})})]})]},F.id)):m.jsx("p",{className:"text-surface/60 p-4 text-center",children:"No posts match your criteria."})})]})]})]})}),m.jsx("div",{className:nt("fixed top-0 right-0 h-full z-50 transition-transform duration-500 ease-in-out","w-full lg:w-2/3 bg-background/80 backdrop-blur-xl border-l border-surface/10 overflow-y-auto",T?"translate-x-0":"translate-x-full"),children:T&&m.jsx(Jf,{post:f,onClose:W})})]})}export{nd as default};
