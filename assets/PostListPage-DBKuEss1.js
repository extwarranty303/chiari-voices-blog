import{r as a,j as e,L as b,G as N,q as v,a as w,d as S,w as A,o as P,g as C}from"./index-Cwzn0Rv2.js";import{S as E}from"./SEO-xVIEJjQ_.js";import{S as L}from"./search-DQT7nwcl.js";const T="/assets/blog-homepage-hero_one-CekHHMe2.png";function U(l){return l.map(s=>({id:s.id,title:typeof s.title=="string"?s.title:"Untitled Post",excerpt:typeof s.excerpt=="string"?s.excerpt:"No excerpt available.",imageUrl:typeof s.imageUrl=="string"?s.imageUrl:void 0,tags:Array.isArray(s.tags)?s.tags:[],createdAt:s.createdAt,authorName:typeof s.authorName=="string"?s.authorName:"Anonymous",slug:typeof s.slug=="string"?s.slug:s.id}))}function F(){const[l,s]=a.useState([]),[p,u]=a.useState(!0),[m,o]=a.useState(null),[i,j]=a.useState(""),[c,x]=a.useState(null);a.useEffect(()=>{(async()=>{u(!0),o(null);try{const r=v(w(S,"posts"),A("status","==","published"),P("createdAt","desc")),d=(await C(r)).docs.map(f=>({id:f.id,...f.data()})),y=U(d);s(y)}catch(r){console.error("Firebase Error:",r),o("Failed to fetch posts. Please ensure Firestore indexes are configured correctly."),s([])}finally{u(!1)}})()},[]);const h=a.useMemo(()=>{try{return l.filter(t=>{const r=i.toLowerCase(),n=(t.title||"").toLowerCase().includes(r)||(t.excerpt||"").toLowerCase().includes(r),d=c?(t.tags||[]).includes(c):!0;return n&&d})}catch(t){return console.error("Filtering Error:",t),o("An error occurred while filtering posts."),[]}},[l,i,c]),g=a.useMemo(()=>{const t=new Set;return l.forEach(r=>r.tags?.forEach(n=>t.add(n))),Array.from(t)},[l]);return e.jsxs("div",{className:"space-y-12",children:[e.jsx(E,{title:"Blog",description:"Browse the latest stories and articles from the Chiari Voices community."}),e.jsxs("div",{className:"w-screen h-[40vh] relative left-1/2 -translate-x-1/2",children:[e.jsx("img",{src:T,alt:"A vibrant, abstract image of a brain in a forest, representing thought and community",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/50 flex flex-col justify-center items-center text-center p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-white tracking-tight drop-shadow-lg",children:"Understanding Chiari Malformation"}),e.jsx("p",{className:"text-lg md:text-xl text-white/90 mt-2 drop-shadow-md",children:"Finding Hope & Support"})]})})]}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-6",children:[e.jsx("h2",{className:"text-3xl font-bold text-text",children:"All Stories"}),e.jsxs("div",{className:"relative w-full md:w-64",children:[e.jsx(L,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted",size:18}),e.jsx("input",{type:"text",placeholder:"Search articles...",className:"w-full pl-10 pr-4 py-2 glass-input rounded-lg focus:outline-none focus:ring-2 focus:ring-accent/50 text-text",value:i,onChange:t=>j(t.target.value)})]})]}),g.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>x(null),className:`px-3 py-1 rounded-full text-sm transition-colors ${c?"bg-surface text-muted hover:bg-surface/80":"glass-button"}`,children:"All"}),g.map(t=>e.jsxs("button",{onClick:()=>x(c===t?null:t),className:`px-3 py-1 rounded-full text-sm transition-colors ${c===t?"glass-button":"bg-surface text-muted hover:bg-surface/80"}`,children:["#",t]},t))]}),p?e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6 animate-pulse",children:[...Array(6)].map((t,r)=>e.jsx("div",{className:"h-96 glass-panel rounded-lg"},r))}):m?e.jsx("div",{className:"text-center py-20 text-destructive",children:e.jsx("p",{children:m})}):h.length>0?e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:h.map(t=>e.jsx(b,{to:`/posts/${t.slug}`,className:"group",children:e.jsxs(N,{className:"h-full flex flex-col p-6 transition-all duration-300 border-2 border-transparent hover:border-accent/50 hover:bg-surface/50",children:[e.jsx("div",{className:"h-40 w-full overflow-hidden rounded-lg mb-4",children:e.jsx("img",{src:t.imageUrl||"/placeholder.jpg",alt:t.title,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"})}),e.jsx("h3",{className:"text-xl font-bold text-text mb-2 flex-grow group-hover:text-accent transition-colors line-clamp-2",children:t.title}),e.jsx("p",{className:"text-muted text-sm line-clamp-3",children:t.excerpt})]})},t.id))}):e.jsxs("div",{className:"text-center py-20 text-muted",children:[e.jsx("p",{children:"No stories found."}),l.length>0&&e.jsx("p",{className:"text-sm mt-2",children:"Try clearing your search or tag filter."})]})]})}export{F as default};
